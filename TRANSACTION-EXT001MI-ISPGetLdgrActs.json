{"utilities":{},"programModules":{"EXT001MI":{"program":"EXT001MI","triggers":{},"transactions":{"ISPGetLdgrActs":{"sourceUuid":"f5df9ba5-1cd2-457c-aaef-ace499d78ca3","name":"ISPGetLdgrActs","program":"EXT001MI","description":"ALL_MI_0001_GetLedgerAccounts","active":true,"multi":true,"modified":1678443888392,"modifiedBy":"APE_SMA","outputFields":[{"name":"RCTP","description":"Record Type","length":1,"mandatory":false,"type":"A"},{"name":"DIVI","description":"division","length":3,"mandatory":false,"type":"A"},{"name":"AITP","description":"accounting dimension","length":1,"mandatory":false,"type":"N"},{"name":"AITM","description":"accounting identity","length":10,"mandatory":false,"type":"A"},{"name":"TX40","description":"description","length":40,"mandatory":false,"type":"A"},{"name":"LCCD","description":"blocked accounting identity","length":1,"mandatory":false,"type":"N"},{"name":"VFDT","description":"valid from","length":8,"mandatory":false,"type":"N"},{"name":"VTDT","description":"valid to","length":8,"mandatory":false,"type":"N"},{"name":"MQCD","description":"quantity mandatory","length":1,"mandatory":false,"type":"N"},{"name":"ACR2","description":"ACR for accounting dimension 2","length":1,"mandatory":false,"type":"N"},{"name":"ACR3","description":"ACR for accounting dimension 3","length":1,"mandatory":false,"type":"N"},{"name":"ACR4","description":"ACR for accounting dimension 4","length":1,"mandatory":false,"type":"N"},{"name":"ACR5","description":"ACR for accounting dimension 5","length":1,"mandatory":false,"type":"N"},{"name":"ACR6","description":"ACR for accounting dimension 6","length":1,"mandatory":false,"type":"N"},{"name":"ACR7","description":"ACR for accounting dimension 7","length":1,"mandatory":false,"type":"N"},{"name":"AT04","description":"VAT account type","length":1,"mandatory":false,"type":"N"},{"name":"KV06","description":"Dimension","length":15,"mandatory":false,"type":"A"},{"name":"FV02","description":"Range","length":40,"mandatory":false,"type":"A"},{"name":"FV03","description":"From Value","length":40,"mandatory":false,"type":"A"},{"name":"FV04","description":"To Value","length":40,"mandatory":false,"type":"A"}],"inputFields":[{"name":"AITM","description":"accounting identity","length":10,"mandatory":false,"type":"A"},{"name":"DIVI","description":"Division","length":3,"mandatory":false,"type":"A"}],"utilities":[]}},"batches":{}}},"sources":{"f5df9ba5-1cd2-457c-aaef-ace499d78ca3":{"uuid":"f5df9ba5-1cd2-457c-aaef-ace499d78ca3","updated":1678443865813,"updatedBy":"APE_SMA","created":1671807129239,"createdBy":"RLO","apiVersion":"0.14","beVersion":"16.0.0.20221210044646.5","codeHash":"7E200E90E817B718EFE9A94B16DB8E912F773B0AFEA2790F7930BDEB0D9A47BF","code":"LyoqDQoqIFJFQURNRQ0KKiBUaGlzIGV4dGVuc2lvbiBzZW5kcyBzcGVjaWZpYyBNMyBnZW5lcmFsIGxlZGdlciBkZXRhaWxzIHRvIDNyZCBwYXJ0eSBhcHBsaWNhdGlvbiBJU1AuIA0KKiANCioNCiogTmFtZTogRVhUMDAxTUkuSVNQR2V0TGRnckFjdHMNCiogRGVzY3JpcHRpb246IA0KKiBEYXRlICAgICAgICAgIENoYW5nZWQgYnkgICAgICAgICAgICAgIERlc2NyaXB0aW9uDQoqIDIwMjEtMDUtMTkgICAgSGl0ZXNoIENob3RyYW5pICAgICAgICAgSW5pdGlhbCB2ZXJzaW9uDQoqIDIwMjMtMDMtMTAgICAgU2hhc2hhbmsgTWFsYWxpICAgICAgICAgUmVtb3ZlIHVudXNlZCBjb2RlLCB1c2FnZSBsb3dlckNhbWVsQ2FzZQ0KKiAgDQoqLw0KDQoNCg0KcHVibGljIGNsYXNzIElTUEdldExkZ3JBY3RzIGV4dGVuZHMgRXh0ZW5kTTNUcmFuc2FjdGlvbiB7DQogIHByaXZhdGUgZmluYWwgTUlBUEkgbWk7DQogIHByaXZhdGUgZmluYWwgUHJvZ3JhbUFQSSBwcm9ncmFtOw0KICBwcml2YXRlIGZpbmFsIE1JQ2FsbGVyQVBJIG1pQ2FsbGVyOw0KICBwcml2YXRlIGZpbmFsIERhdGFiYXNlQVBJIGRhdGFiYXNlDQogIHByaXZhdGUgQXJyYXlMaXN0IDwgU3RyaW5nID4gbGVkZ2VyQWNjb3VudFR5cGUgPSBudWxsOw0KICBwcml2YXRlIE1hcCA8IFN0cmluZywgU3RyaW5nID4gZGltZW5zaW9uTWFwID0gbnVsbDsNCiAgcHJpdmF0ZSBNYXAgPCBTdHJpbmcsIFN0cmluZyA+IHF1YW50aXR5TWFwID0gbnVsbDsNCiAgcHJpdmF0ZSBNYXAgPCBTdHJpbmcsIFN0cmluZyA+IHZhdFJhbmdlTWFwID0gbnVsbDsNCiAgcHJpdmF0ZSBTdHJpbmcgQ09OTyA9ICIiOw0KICBwcml2YXRlIFN0cmluZyBpbnB1dEFJVE0gPSAiIjsNCiAgcHJpdmF0ZSBTdHJpbmcgaW5wdXRESVZJID0gIiI7DQogIHByaXZhdGUgQXJyYXlMaXN0IDwgSGFzaHRhYmxlID4gbGVkZ2VyQWNjb3VudHMgPSBudWxsOw0KICBwcml2YXRlIEFycmF5TGlzdCA8IEhhc2h0YWJsZSA+IGFjckxpc3QgPSBudWxsOw0KICBwcml2YXRlIEFycmF5TGlzdCA8IEhhc2h0YWJsZSA+IHZhdFJhbmdlTGlzdCA9IG51bGw7DQogIHByaXZhdGUgYm9vbGVhbiBpc0VuZE9mRmlsZSA9IGZhbHNlOw0KDQogIHB1YmxpYyBJU1BHZXRMZGdyQWN0cyhNSUFQSSBtaSwgUHJvZ3JhbUFQSSBwcm9ncmFtLCBNSUNhbGxlckFQSSBtaUNhbGxlciwgRGF0YWJhc2VBUEkgZGF0YWJhc2UpIHsNCiAgICB0aGlzLm1pID0gbWk7DQogICAgdGhpcy5wcm9ncmFtID0gcHJvZ3JhbTsNCiAgICB0aGlzLm1pQ2FsbGVyID0gbWlDYWxsZXI7DQogICAgdGhpcy5kYXRhYmFzZSA9IGRhdGFiYXNlOw0KICB9DQoNCiAgcHVibGljIHZvaWQgbWFpbigpIHsNCiAgICBpbnB1dEFJVE0gPSBtaS5pbkRhdGEuZ2V0KCdBSVRNJyk7DQogICAgaW5wdXRESVZJID0gbWkuaW5EYXRhLmdldCgnRElWSScpOw0KICAgIHBvcHVsYXRlUmFuZ2VNYXBzKCk7DQogICAgZ2V0QWxsTGVkZ2VyQWNjb3VudHMoKTsNCiAgICBpZiAobGVkZ2VyQWNjb3VudHMuc2l6ZSA8IDEwMDApIHsNCiAgICAgIGlzRW5kT2ZGaWxlID0gdHJ1ZTsNCiAgICB9DQogICAgaWYgKCFpbnB1dEFJVE0udHJpbSgpLmlzRW1wdHkoKSkgew0KICAgICAgbGVkZ2VyQWNjb3VudHMucmVtb3ZlKDApOw0KICAgIH0NCiAgICBsZWRnZXJBY2NvdW50cy5lYWNoIHsNCiAgICAgIGVhY2hBY2NvdW50IC0+DQogICAgICAgIGZpbGxBQ1JMaXN0KGVhY2hBY2NvdW50KTsNCiAgICAgIG1hcFZhbHVlc1RvSVNQKGVhY2hBY2NvdW50KTsNCiAgICAgIGZpbGxBQ1JSYW5nZShlYWNoQWNjb3VudCk7DQogICAgICBmaWxsVkFUUmFuZ2UoZWFjaEFjY291bnQpOw0KICAgIH0NCiAgICBpZiAoaXNFbmRPZkZpbGUpIHsNCiAgICAgIG1pLm91dERhdGEucHV0KCdSQ1RQJywgJ0wnKTsNCiAgICAgIG1pLm91dERhdGEucHV0KCdBSVRNJywgJyUlRU9GJSUnKTsNCiAgICAgIG1pLndyaXRlKCk7DQogICAgfQ0KICB9DQoNCiAvKioNCiAgICogQ2hlY2sgYW5kIHJldHJpdmUgY29udHJvbCBwcm9wZXJ0aWVzIGZyb20gQ1VHRVgxDQogICAqIA0KICAgKi8NCg0KICBwdWJsaWMgcG9wdWxhdGVSYW5nZU1hcHMoKSB7DQogICAgQ09OTyA9IHByb2dyYW0uTERBWkQuZ2V0KCdDT05PJyk7DQoNCiAgICBsZWRnZXJBY2NvdW50VHlwZSA9IG5ldyBBcnJheUxpc3QgPCBTdHJpbmcgPiAoKTsNCiAgICBib29sZWFuIHJlY29yZEV4aXN0cyA9IHRydWU7DQogICAgZGVmIGNhbGxiYWNrID0gew0KICAgICAgTWFwIDwgU3RyaW5nLA0KICAgICAgU3RyaW5nID4gcmVzdWx0cyAtPg0KICAgICAgcmVjb3JkRXhpc3RzID0gIXJlc3VsdHMuZ2V0KCdlcnJvcicpOw0KICAgICAgaWYgKHJlY29yZEV4aXN0cykgew0KICAgICAgICBTdHJpbmcgbGVkZ2VyQWN0cyA9IHJlc3VsdHMuZ2V0KCdBMTIxJyk7DQogICAgICAgIFN0cmluZ1tdIGxlZGdlckFjdHNBcnJheSA9IGxlZGdlckFjdHMuc3BsaXQoJzsnKTsNCiAgICAgICAgbGVkZ2VyQWN0c0FycmF5LmVhY2ggew0KICAgICAgICAgIHZhbHVlIC0+DQogICAgICAgICAgICBTdHJpbmcgbGVkZ2VyQWNjb3VudCA9IHZhbHVlOw0KICAgICAgICAgIGxlZGdlckFjY291bnRUeXBlLmFkZChsZWRnZXJBY2NvdW50LnRyaW0oKSk7DQoNCiAgICAgICAgfQ0KDQogICAgICB9IGVsc2Ugew0KICAgICAgICBtaS5lcnJvcigiUGxlYXNlIG1haW50YWluIHJlY29yZCBpbiBDVUdFWDEgZm9yIExFREdFUkFDVFRZUEUiKTsNCiAgICAgICAgcmV0dXJuOw0KICAgICAgfQ0KDQogICAgfQ0KICAgIGRlZiBwYXJhbXMgPSBbIkZJTEUiOiAiSVNQRklMRSIsICJQSzAxIjogIkdFVExFREdFUkFDQ09VTlRTIiwgIlBLMDIiOiAiTEVER0VSQUNUVFlQRSJdOw0KICAgIG1pQ2FsbGVyLmNhbGwoIkNVU0VYVE1JIiwgIkdldEZpZWxkVmFsdWUiLCBwYXJhbXMsIGNhbGxiYWNrKTsNCg0KICAgIGRpbWVuc2lvbk1hcCA9IG5ldyBIYXNoTWFwIDwgU3RyaW5nLCBTdHJpbmcgPiAoKTsNCg0KICAgIGRlZiBjYWxsYmFjazIgPSB7DQogICAgICBNYXAgPCBTdHJpbmcsDQogICAgICBTdHJpbmcgPiByZXN1bHRzIC0+DQogICAgICByZWNvcmRFeGlzdHMgPSAhcmVzdWx0cy5nZXQoJ2Vycm9yJyk7DQogICAgICBpZiAocmVjb3JkRXhpc3RzKSB7DQogICAgICAgIFN0cmluZyBhY3REaW1lbnNpb25zID0gcmVzdWx0cy5nZXQoJ0ExMjEnKTsNCiAgICAgICAgU3RyaW5nW10gYWN0RGltZW5zaW9uc0FycmF5ID0gYWN0RGltZW5zaW9ucy5zcGxpdCgnOycpOw0KICAgICAgICBhY3REaW1lbnNpb25zQXJyYXkuZWFjaCB7DQogICAgICAgICAgdmFsdWUgLT4NCiAgICAgICAgICAgIFN0cmluZyBhY3REaW1lbnNpb24gPSB2YWx1ZTsNCiAgICAgICAgICBkaW1lbnNpb25NYXAucHV0KGFjdERpbWVuc2lvbi5zdWJzdHJpbmcoMCwgMSksIGFjdERpbWVuc2lvbi5zdWJzdHJpbmcoMiwgMykpOw0KDQogICAgICAgIH0NCg0KICAgICAgfSBlbHNlIHsNCiAgICAgICAgbWkuZXJyb3IoIlBsZWFzZSBtYWludGFpbiByZWNvcmQgaW4gQ1VHRVgxIGZvciBBQ1RESU1FTlNJT04iKTsNCiAgICAgICAgcmV0dXJuOw0KICAgICAgfQ0KDQogICAgfQ0KICAgIGRlZiBwYXJhbXMyID0gWyJGSUxFIjogIklTUEZJTEUiLCAiUEswMSI6ICJHRVRMRURHRVJBQ0NPVU5UUyIsICJQSzAyIjogIkFDVERJTUVOU0lPTiJdOw0KICAgIG1pQ2FsbGVyLmNhbGwoIkNVU0VYVE1JIiwgIkdldEZpZWxkVmFsdWUiLCBwYXJhbXMyLCBjYWxsYmFjazIpOw0KDQogICAgcXVhbnRpdHlNYXAgPSBuZXcgSGFzaE1hcCA8IFN0cmluZywgU3RyaW5nID4gKCk7DQoNCiAgICBkZWYgY2FsbGJhY2szID0gew0KICAgICAgTWFwIDwgU3RyaW5nLA0KICAgICAgU3RyaW5nID4gcmVzdWx0cyAtPg0KICAgICAgcmVjb3JkRXhpc3RzID0gIXJlc3VsdHMuZ2V0KCdlcnJvcicpOw0KICAgICAgaWYgKHJlY29yZEV4aXN0cykgew0KICAgICAgICBTdHJpbmcgcXVhbnRpdGllcyA9IHJlc3VsdHMuZ2V0KCdBMTIxJyk7DQogICAgICAgIFN0cmluZ1tdIHF1YW50aXR5VmFsdWVBcnJheSA9IHF1YW50aXRpZXMuc3BsaXQoJzsnKTsNCiAgICAgICAgcXVhbnRpdHlWYWx1ZUFycmF5LmVhY2ggew0KICAgICAgICAgIHZhbHVlIC0+DQogICAgICAgICAgICBTdHJpbmcgcXVhbnRpdHlWYWx1ZSA9IHZhbHVlOw0KICAgICAgICAgIHF1YW50aXR5TWFwLnB1dChxdWFudGl0eVZhbHVlLnN1YnN0cmluZygwLCAxKSwgcXVhbnRpdHlWYWx1ZS5zdWJzdHJpbmcoMiwgMykpOw0KICAgICAgICB9DQoNCiAgICAgIH0gZWxzZSB7DQogICAgICAgIG1pLmVycm9yKCJQbGVhc2UgbWFpbnRhaW4gcmVjb3JkIGluIENVR0VYMSBmb3IgUVVBTlRJVFkiKTsNCiAgICAgICAgcmV0dXJuOw0KICAgICAgfQ0KDQogICAgfQ0KICAgIGRlZiBwYXJhbXMzID0gWyJGSUxFIjogIklTUEZJTEUiLCAiUEswMSI6ICJHRVRMRURHRVJBQ0NPVU5UUyIsICJQSzAyIjogIlFVQU5USVRZIl07DQogICAgbWlDYWxsZXIuY2FsbCgiQ1VTRVhUTUkiLCAiR2V0RmllbGRWYWx1ZSIsIHBhcmFtczMsIGNhbGxiYWNrMyk7DQoNCiAgICB2YXRSYW5nZU1hcCA9IG5ldyBIYXNoTWFwIDwgU3RyaW5nLCBTdHJpbmcgPiAoKTsNCg0KICAgIGRlZiBjYWxsYmFjazQgPSB7DQoNCiAgICAgIE1hcCA8IFN0cmluZywNCiAgICAgIFN0cmluZyA+IHJlc3VsdHMgLT4NCiAgICAgIHJlY29yZEV4aXN0cyA9ICFyZXN1bHRzLmdldCgnZXJyb3InKTsNCiAgICAgIGlmIChyZWNvcmRFeGlzdHMpIHsNCiAgICAgICAgU3RyaW5nIHZhdFJhbmdlcyA9IHJlc3VsdHMuZ2V0KCdBMTIxJyk7DQogICAgICAgIFN0cmluZ1tdIHZhdFJhbmdlQXJyYXkgPSB2YXRSYW5nZXMuc3BsaXQoJzsnKTsNCiAgICAgICAgdmF0UmFuZ2VBcnJheS5lYWNoIHsNCiAgICAgICAgICB2YWx1ZSAtPg0KICAgICAgICAgICAgU3RyaW5nIHZhdFJhbmdlID0gdmFsdWU7DQogICAgICAgICAgdmF0UmFuZ2VNYXAucHV0KHZhdFJhbmdlLnN1YnN0cmluZygwLCAxKSwgdmF0UmFuZ2Uuc3Vic3RyaW5nKDIsIDMpKTsNCiAgICAgICAgfQ0KDQogICAgICB9IGVsc2Ugew0KICAgICAgICBtaS5lcnJvcigiUGxlYXNlIG1haW50YWluIHJlY29yZCBpbiBDVUdFWDEgZm9yIFZBVFJBTkdFIik7DQogICAgICAgIHJldHVybjsNCiAgICAgIH0NCg0KICAgIH0NCiAgICBkZWYgcGFyYW1zNCA9IFsiRklMRSI6ICJJU1BGSUxFIiwgIlBLMDEiOiAiR0VUTEVER0VSQUNDT1VOVFMiLCAiUEswMiI6ICJWQVRSQU5HRSJdOw0KICAgIG1pQ2FsbGVyLmNhbGwoIkNVU0VYVE1JIiwgIkdldEZpZWxkVmFsdWUiLCBwYXJhbXM0LCBjYWxsYmFjazQpOw0KDQogIH0NCg0KICAvKioNCiAgICogZ2V0IE0zIGxlZGdlciBhY2NvdW50IHVzaW5nIENSUzYzME1JLkxzdEFjY291bnRJRA0KICAgKiANCiAgICovDQogICANCiAgcHVibGljIGdldEFsbExlZGdlckFjY291bnRzKCkgew0KICAgIGxlZGdlckFjY291bnRzID0gbmV3IEFycmF5TGlzdCA8IEhhc2h0YWJsZSA+ICgpOw0KICAgIGJvb2xlYW4gcmVjb3JkRXhpc3RzID0gdHJ1ZTsNCiAgICBkZWYgY2FsbGJhY2sgPSB7DQogICAgICBNYXAgPCBTdHJpbmcsDQogICAgICBTdHJpbmcgPiByZXN1bHRzIC0+DQogICAgICByZWNvcmRFeGlzdHMgPSAhcmVzdWx0cy5nZXQoJ2Vycm9yJyk7DQogICAgICBpZiAocmVjb3JkRXhpc3RzKSB7DQogICAgICAgIFN0cmluZyBBSVRQID0gcmVzdWx0cy5nZXQoJ0FJVFAnKTsNCiAgICAgICAgU3RyaW5nIEFUMDQgPSByZXN1bHRzLmdldCgnQVQwNCcpOw0KDQogICAgICAgIGlmIChBSVRQLnRyaW0oKS5lcXVhbHMoIjEiKSAmJiBsZWRnZXJBY2NvdW50VHlwZS5jb250YWlucyhBVDA0LnRyaW0oKSkpIHsNCiAgICAgICAgICBIYXNodGFibGUgYWNjb3VudCA9IG5ldyBIYXNodGFibGUoKTsNCiAgICAgICAgICBhY2NvdW50LnB1dCgiRElWSSIsIHJlc3VsdHMuZ2V0KCdESVZJJykpOw0KICAgICAgICAgIGFjY291bnQucHV0KCJBSVRQIiwgcmVzdWx0cy5nZXQoJ0FJVFAnKSk7DQogICAgICAgICAgYWNjb3VudC5wdXQoIkFJVE0iLCByZXN1bHRzLmdldCgnQUlUTScpKTsNCiAgICAgICAgICBhY2NvdW50LnB1dCgiVFg0MCIsIHJlc3VsdHMuZ2V0KCdUWDQwJykpOw0KICAgICAgICAgIGFjY291bnQucHV0KCJMQ0NEIiwgcmVzdWx0cy5nZXQoJ0xDQ0QnKSk7DQogICAgICAgICAgYWNjb3VudC5wdXQoIlZGRFQiLCByZXN1bHRzLmdldCgnVkZEVCcpKTsNCiAgICAgICAgICBhY2NvdW50LnB1dCgiVlREVCIsIHJlc3VsdHMuZ2V0KCdWVERUJykpOw0KICAgICAgICAgIGFjY291bnQucHV0KCJBQ1IyIiwgcmVzdWx0cy5nZXQoJ0FDUjInKSk7DQogICAgICAgICAgYWNjb3VudC5wdXQoIkFDUjMiLCByZXN1bHRzLmdldCgnQUNSMycpKTsNCiAgICAgICAgICBhY2NvdW50LnB1dCgiQUNSNCIsIHJlc3VsdHMuZ2V0KCdBQ1I0JykpOw0KICAgICAgICAgIGFjY291bnQucHV0KCJBQ1I1IiwgcmVzdWx0cy5nZXQoJ0FDUjUnKSk7DQogICAgICAgICAgYWNjb3VudC5wdXQoIkFDUjYiLCByZXN1bHRzLmdldCgnQUNSNicpKTsNCiAgICAgICAgICBhY2NvdW50LnB1dCgiQUNSNyIsIHJlc3VsdHMuZ2V0KCdBQ1I3JykpOw0KICAgICAgICAgIGFjY291bnQucHV0KCJBVDA0IiwgcmVzdWx0cy5nZXQoJ0FUMDQnKSk7DQogICAgICAgICAgYWNjb3VudC5wdXQoIkFDUlYiLCByZXN1bHRzLmdldCgnQUNSVicpKTsNCiAgICAgICAgICBhY2NvdW50LnB1dCgiTVFDRCIsIHJlc3VsdHMuZ2V0KCdNUUNEJykpOw0KICAgICAgICAgIGFjY291bnQucHV0KCJBVDEzIiwgcmVzdWx0cy5nZXQoJ0FUMTMnKSk7DQogICAgICAgICAgbGVkZ2VyQWNjb3VudHMuYWRkKGFjY291bnQpOw0KDQogICAgICAgIH0NCiAgICAgIH0NCiAgICB9DQogICAgZGVmIHBhcmFtcyA9IFsiQUlUUCI6ICIxIiwgIkFJVE0iOiBpbnB1dEFJVE0sICJESVZJIjogaW5wdXRESVZJXTsNCiAgICBtaUNhbGxlci5zZXRMaXN0TWF4UmVjb3JkcygyMDAwMCk7DQogICAgbWlDYWxsZXIuY2FsbCgiQ1JTNjMwTUkiLCAiTHN0QWNjb3VudElEIiwgcGFyYW1zLCBjYWxsYmFjayk7DQogICAgcmV0dXJuIHJlY29yZEV4aXN0czsNCg0KICB9DQogIA0KIC8qKg0KICAgKiBGaWxsIHRoZSB2YWx1ZXMgb2YgQWNjb3VudGluZyBjb250cm9sIE9iamVjdCBmb3IgQWNjb3VudGluZyBkaW1lbnNpb25zDQogICAqIA0KICAgKi8NCg0KICBwdWJsaWMgZmlsbEFDUkxpc3QoSGFzaHRhYmxlIGFjY291bnQpIHsNCiAgICBhY3JMaXN0ID0gbmV3IEFycmF5TGlzdCA8IEhhc2h0YWJsZSA+ICgpOw0KICAgIFN0cmluZyBBQ1IyID0gYWNjb3VudC5nZXQoIkFDUjIiKTsNCiAgICBTdHJpbmcgQUNSMyA9IGFjY291bnQuZ2V0KCJBQ1IzIik7DQogICAgU3RyaW5nIEFDUjQgPSBhY2NvdW50LmdldCgiQUNSNCIpOw0KICAgIFN0cmluZyBBQ1I1ID0gYWNjb3VudC5nZXQoIkFDUjUiKTsNCiAgICBTdHJpbmcgQUNSNiA9IGFjY291bnQuZ2V0KCJBQ1I2Iik7DQogICAgU3RyaW5nIEFDUjcgPSBhY2NvdW50LmdldCgiQUNSNyIpOw0KDQogICAgaWYgKEFDUjIuZXF1YWxzKCIyIikgfHwgQUNSMi5lcXVhbHMoIjQiKSB8fCBBQ1IyLmVxdWFscygiNiIpKSB7DQogICAgICBqYXZhLnV0aWwuSGFzaHRhYmxlIGFjciA9IG5ldyBqYXZhLnV0aWwuSGFzaHRhYmxlKCk7DQogICAgICBhY3IucHV0KCJBQ1IiLCAiMiIpOw0KICAgICAgYWNyLnB1dCgiVmFsdWUiLCBBQ1IyKTsNCiAgICAgIGFjckxpc3QuYWRkKGFjcik7DQogICAgfQ0KICAgIGlmIChBQ1IzLmVxdWFscygiMiIpIHx8IEFDUjMuZXF1YWxzKCI0IikgfHwgQUNSMy5lcXVhbHMoIjYiKSkgew0KICAgICAgamF2YS51dGlsLkhhc2h0YWJsZSBhY3IgPSBuZXcgamF2YS51dGlsLkhhc2h0YWJsZSgpOw0KICAgICAgYWNyLnB1dCgiQUNSIiwgIjMiKTsNCiAgICAgIGFjci5wdXQoIlZhbHVlIiwgQUNSMyk7DQogICAgICBhY3JMaXN0LmFkZChhY3IpOw0KICAgIH0NCiAgICBpZiAoQUNSNC5lcXVhbHMoIjIiKSB8fCBBQ1I0LmVxdWFscygiNCIpIHx8IEFDUjQuZXF1YWxzKCI2IikpIHsNCiAgICAgIGphdmEudXRpbC5IYXNodGFibGUgYWNyID0gbmV3IGphdmEudXRpbC5IYXNodGFibGUoKTsNCiAgICAgIGFjci5wdXQoIkFDUiIsICI0Iik7DQogICAgICBhY3IucHV0KCJWYWx1ZSIsIEFDUjQpOw0KICAgICAgYWNyTGlzdC5hZGQoYWNyKTsNCiAgICB9DQogICAgaWYgKEFDUjUuZXF1YWxzKCIyIikgfHwgQUNSNS5lcXVhbHMoIjQiKSB8fCBBQ1I1LmVxdWFscygiNiIpKSB7DQogICAgICBqYXZhLnV0aWwuSGFzaHRhYmxlIGFjciA9IG5ldyBqYXZhLnV0aWwuSGFzaHRhYmxlKCk7DQogICAgICBhY3IucHV0KCJBQ1IiLCAiNSIpOw0KICAgICAgYWNyLnB1dCgiVmFsdWUiLCBBQ1I1KTsNCiAgICAgIGFjckxpc3QuYWRkKGFjcik7DQogICAgfQ0KICAgIGlmIChBQ1I2LmVxdWFscygiMiIpIHx8IEFDUjYuZXF1YWxzKCI0IikgfHwgQUNSNi5lcXVhbHMoIjYiKSkgew0KICAgICAgamF2YS51dGlsLkhhc2h0YWJsZSBhY3IgPSBuZXcgamF2YS51dGlsLkhhc2h0YWJsZSgpOw0KICAgICAgYWNyLnB1dCgiQUNSIiwgIjYiKTsNCiAgICAgIGFjci5wdXQoIlZhbHVlIiwgQUNSNik7DQogICAgICBhY3JMaXN0LmFkZChhY3IpOw0KICAgIH0NCiAgICBpZiAoQUNSNy5lcXVhbHMoIjIiKSB8fCBBQ1I3LmVxdWFscygiNCIpIHx8IEFDUjcuZXF1YWxzKCI2IikpIHsNCiAgICAgIGphdmEudXRpbC5IYXNodGFibGUgYWNyID0gbmV3IGphdmEudXRpbC5IYXNodGFibGUoKTsNCiAgICAgIGFjci5wdXQoIkFDUiIsICI3Iik7DQogICAgICBhY3IucHV0KCJWYWx1ZSIsIEFDUjcpOw0KICAgICAgYWNyTGlzdC5hZGQoYWNyKTsNCiAgICB9DQoNCiAgfQ0KDQogLyoqDQogICAqIFNlbmQgZGF0YSB0byBBUEkgb3V0cHV0IGZpZWxkcw0KICAgKiANCiAgICovDQoNCiAgcHVibGljIG1hcFZhbHVlc1RvSVNQKEhhc2h0YWJsZSBhY2NvdW50KSB7DQogICAgU3RyaW5nIERJVkkgPSBhY2NvdW50LmdldCgiRElWSSIpOw0KICAgIFN0cmluZyBBSVRQID0gYWNjb3VudC5nZXQoIkFJVFAiKTsNCiAgICBTdHJpbmcgQUlUTSA9IGFjY291bnQuZ2V0KCJBSVRNIik7DQogICAgU3RyaW5nIFRYNDAgPSBhY2NvdW50LmdldCgiVFg0MCIpOw0KICAgIFN0cmluZyBMQ0NEID0gYWNjb3VudC5nZXQoIkxDQ0QiKTsNCiAgICBTdHJpbmcgVkZEVCA9IGFjY291bnQuZ2V0KCJWRkRUIik7DQogICAgU3RyaW5nIFZURFQgPSBhY2NvdW50LmdldCgiVlREVCIpOw0KICAgIFN0cmluZyBBQ1IyID0gYWNjb3VudC5nZXQoIkFDUjIiKTsNCiAgICBTdHJpbmcgQUNSMyA9IGFjY291bnQuZ2V0KCJBQ1IzIik7DQogICAgU3RyaW5nIEFDUjQgPSBhY2NvdW50LmdldCgiQUNSNCIpOw0KICAgIFN0cmluZyBBQ1I1ID0gYWNjb3VudC5nZXQoIkFDUjUiKTsNCiAgICBTdHJpbmcgQUNSNiA9IGFjY291bnQuZ2V0KCJBQ1I2Iik7DQogICAgU3RyaW5nIEFDUjcgPSBhY2NvdW50LmdldCgiQUNSNyIpOw0KICAgIFN0cmluZyBBVDA0ID0gYWNjb3VudC5nZXQoIkFUMDQiKTsNCiAgICBTdHJpbmcgQUNSViA9IGFjY291bnQuZ2V0KCJBQ1JWIik7DQogICAgU3RyaW5nIE1RQ0QgPSBhY2NvdW50LmdldCgiTVFDRCIpOw0KICAgIFN0cmluZyBBVDEzID0gYWNjb3VudC5nZXQoIkFUMTMiKTsNCg0KICAgIEFDUjIgPSBkaW1lbnNpb25NYXAuZ2V0KEFDUjIpID09IG51bGwgPyAiIiA6IGRpbWVuc2lvbk1hcC5nZXQoQUNSMik7DQogICAgQUNSMyA9IGRpbWVuc2lvbk1hcC5nZXQoQUNSMykgPT0gbnVsbCA/ICIiIDogZGltZW5zaW9uTWFwLmdldChBQ1IzKTsNCiAgICBBQ1I0ID0gZGltZW5zaW9uTWFwLmdldChBQ1I0KSA9PSBudWxsID8gIiIgOiBkaW1lbnNpb25NYXAuZ2V0KEFDUjQpOw0KICAgIEFDUjUgPSBkaW1lbnNpb25NYXAuZ2V0KEFDUjUpID09IG51bGwgPyAiIiA6IGRpbWVuc2lvbk1hcC5nZXQoQUNSNSk7DQogICAgQUNSNiA9IGRpbWVuc2lvbk1hcC5nZXQoQUNSNikgPT0gbnVsbCA/ICIiIDogZGltZW5zaW9uTWFwLmdldChBQ1I2KTsNCiAgICBBQ1I3ID0gZGltZW5zaW9uTWFwLmdldChBQ1I3KSA9PSBudWxsID8gIiIgOiBkaW1lbnNpb25NYXAuZ2V0KEFDUjcpOw0KICAgIE1RQ0QgPSBxdWFudGl0eU1hcC5nZXQoTVFDRCkgPT0gbnVsbCA/ICIiIDogcXVhbnRpdHlNYXAuZ2V0KE1RQ0QpOw0KICAgIEFUMDQgPSB2YXRSYW5nZU1hcC5nZXQoQVQwNCkgPT0gbnVsbCA/ICIwIiA6IHZhdFJhbmdlTWFwLmdldChBVDA0KTsNCiAgICBpZiAoTENDRC5lcXVhbHMoJzAnKSAmJiBBVDEzLmVxdWFscygnMCcpKSB7DQogICAgICBtaS5vdXREYXRhLnB1dCgnUkNUUCcsICdIJyk7DQogICAgICBtaS5vdXREYXRhLnB1dCgnRElWSScsIERJVkkpOw0KICAgICAgbWkub3V0RGF0YS5wdXQoJ0FJVFAnLCBBSVRQKTsNCiAgICAgIG1pLm91dERhdGEucHV0KCdBSVRNJywgQUlUTSk7DQogICAgICBtaS5vdXREYXRhLnB1dCgnVFg0MCcsIFRYNDApOw0KICAgICAgbWkub3V0RGF0YS5wdXQoJ0xDQ0QnLCBMQ0NEKTsNCiAgICAgIG1pLm91dERhdGEucHV0KCdWRkRUJywgVkZEVCk7DQogICAgICBtaS5vdXREYXRhLnB1dCgnVlREVCcsIFZURFQpOw0KICAgICAgbWkub3V0RGF0YS5wdXQoJ0FDUjInLCBBQ1IyKTsNCiAgICAgIG1pLm91dERhdGEucHV0KCdBQ1IzJywgQUNSMyk7DQogICAgICBtaS5vdXREYXRhLnB1dCgnQUNSNCcsIEFDUjQpOw0KICAgICAgbWkub3V0RGF0YS5wdXQoJ0FDUjUnLCBBQ1I1KTsNCiAgICAgIG1pLm91dERhdGEucHV0KCdBQ1I2JywgQUNSNik7DQogICAgICBtaS5vdXREYXRhLnB1dCgnQUNSNycsIEFDUjcpOw0KICAgICAgbWkub3V0RGF0YS5wdXQoJ0FUMDQnLCBBVDA0KTsNCiAgICAgIG1pLm91dERhdGEucHV0KCdNUUNEJywgTVFDRCk7DQogICAgICBtaS53cml0ZSgpOw0KICAgIH0NCiAgfQ0KDQogLyoqDQogICAqIFJldHJpdmUgYWRkaXRpb25hbCBkZXRhaWxzIGZyb20gdGFibGUgRkNIQ0hLDQogICAqIA0KICAgKi8NCg0KICBwdWJsaWMgZmlsbEFDUlJhbmdlKEhhc2h0YWJsZSBhY2NvdW50KSB7DQogICAgU3RyaW5nIERJVkkgPSBhY2NvdW50LmdldCgnRElWSScpOw0KICAgIFN0cmluZyBBSVRQID0gYWNjb3VudC5nZXQoJ0FJVFAnKTsNCiAgICBTdHJpbmcgQUlUTSA9IGFjY291bnQuZ2V0KCdBSVRNJyk7DQogICAgU3RyaW5nIEtWMDYgPSAiIjsNCiAgICBTdHJpbmcgS1YwNyA9ICIiOw0KDQogICAgYWNyTGlzdC5lYWNoIHsNCiAgICAgIHZhbHVlIC0+DQogICAgICAgIEhhc2h0YWJsZSBhY3JSYW5nZVRhYmxlID0gdmFsdWU7DQogICAgICBLVjA2ID0gYWNyUmFuZ2VUYWJsZS5nZXQoJ0FDUicpOw0KICAgICAgS1YwNyA9IGFjclJhbmdlVGFibGUuZ2V0KCdWYWx1ZScpOw0KDQogICAgICBEQkFjdGlvbiBxdWVyeUZDSENISyA9IGRhdGFiYXNlLnRhYmxlKCJGQ0hDSEsiKQ0KICAgICAgICAuaW5kZXgoIjAwIikNCiAgICAgICAgLnNlbGVjdGlvbigiRUNDT05PIiwgIkVDRElWSSIsICJFQ0FJVFAiLCAiRUNBSVRNIiwgIkVDQ0hQVSIsICJFQ0FJVFYiLCAiRUNBQ1JDIiwgIkVDUkxJTiIsICJFQ0FJVEYiLCAiRUNBSVRUIiwgIkVDQUlUViIpLmJ1aWxkKCkNCiAgICAgIERCQ29udGFpbmVyIHJlY29yZEZDSENISyA9IHF1ZXJ5RkNIQ0hLLmdldENvbnRhaW5lcigpDQogICAgICByZWNvcmRGQ0hDSEsuc2V0KCJFQ0NPTk8iLCBDT05PLnRvSW50ZWdlcigpKTsNCiAgICAgIHJlY29yZEZDSENISy5zZXQoIkVDRElWSSIsIERJVkkpOw0KICAgICAgcmVjb3JkRkNIQ0hLLnNldCgiRUNBSVRQIiwgQUlUUC50b0ludGVnZXIoKSk7DQogICAgICByZWNvcmRGQ0hDSEsuc2V0KCJFQ0FJVE0iLCBBSVRNKTsNCiAgICAgIHJlY29yZEZDSENISy5zZXQoIkVDQ0hQVSIsIDEpOw0KICAgICAgcmVjb3JkRkNIQ0hLLnNldCgiRUNBSVRWIiwgS1YwNi50b0ludGVnZXIoKSk7DQogICAgICByZWNvcmRGQ0hDSEsuc2V0KCJFQ0FDUkMiLCBLVjA3LnRvSW50ZWdlcigpKTsNCg0KICAgICAgbWkub3V0RGF0YS5wdXQoJ0FJVE0nLCBhY2NvdW50LmdldCgnQUlUTScpLnRvU3RyaW5nKCkpOw0KDQogICAgICBpbnQgcmVhZHMgPSBxdWVyeUZDSENISy5yZWFkQWxsKHJlY29yZEZDSENISywgNywgZ2V0RkNIQ0hLUmVjb3Jkcyk7DQoNCiAgICB9DQogICAgYWNyTGlzdC5jbGVhcigpOw0KDQogIH0NCiAgQ2xvc3VyZSA8ID8gPiBnZXRGQ0hDSEtSZWNvcmRzID0gew0KICAgIERCQ29udGFpbmVyIHJlY29yZCAtPg0KICAgIFN0cmluZyBGVjAyID0gcmVjb3JkLmdldCgnRUNSTElOJyk7DQogICAgU3RyaW5nIEZWMDMgPSByZWNvcmQuZ2V0KCdFQ0FJVEYnKTsNCiAgICBTdHJpbmcgRlYwNCA9IHJlY29yZC5nZXQoJ0VDQUlUVCcpOw0KICAgIFN0cmluZyBLVjA2ID0gcmVjb3JkLmdldCgnRUNBSVRWJyk7DQogICAgU3RyaW5nIERJVkkgPSByZWNvcmQuZ2V0KCdFQ0RJVkknKTsNCiAgICBTdHJpbmcgQUlUUCA9IHJlY29yZC5nZXQoJ0VDQUlUUCcpOw0KDQogICAgbWkub3V0RGF0YS5wdXQoJ1JDVFAnLCAnUicpOw0KICAgIG1pLm91dERhdGEucHV0KCdESVZJJywgRElWSSk7DQogICAgbWkub3V0RGF0YS5wdXQoJ0FJVFAnLCBBSVRQKTsNCiAgICBtaS5vdXREYXRhLnB1dCgnS1YwNicsIEtWMDYpOw0KICAgIG1pLm91dERhdGEucHV0KCdGVjAyJywgRlYwMik7DQogICAgbWkub3V0RGF0YS5wdXQoJ0ZWMDMnLCBGVjAzKTsNCiAgICBtaS5vdXREYXRhLnB1dCgnRlYwNCcsIEZWMDQpOw0KICAgIG1pLndyaXRlKCk7DQogIH0NCg0KDQogLyoqDQogICAqIFJldHJpdmUgYWRkaXRpb25hbCBkZXRhaWxzIGZyb20gdGFibGUgRkNIQ0hLDQogICAqIA0KICAgKi8NCiAgIA0KICBwdWJsaWMgZmlsbFZBVFJhbmdlKEhhc2h0YWJsZSBhY2NvdW50KSB7DQogICAgdmF0UmFuZ2VMaXN0ID0gbmV3IEFycmF5TGlzdCA8IEhhc2h0YWJsZSA+ICgpOw0KICAgIFN0cmluZyBBQ1JWID0gYWNjb3VudC5nZXQoJ0FDUlYnKTsNCiAgICBTdHJpbmcgRElWSSA9IGFjY291bnQuZ2V0KCdESVZJJyk7DQogICAgU3RyaW5nIEFJVFAgPSBhY2NvdW50LmdldCgnQUlUUCcpOw0KICAgIFN0cmluZyBBSVRNID0gYWNjb3VudC5nZXQoJ0FJVE0nKTsNCg0KICAgIGlmIChBQ1JWLnRyaW0oKS5lcXVhbHMoIjQiKSkgew0KDQogICAgICBEQkFjdGlvbiBxdWVyeUZDSENISyA9IGRhdGFiYXNlLnRhYmxlKCJGQ0hDSEsiKQ0KICAgICAgICAuaW5kZXgoIjAwIikuc2VsZWN0aW9uKCJFQ0NPTk8iLCAiRUNESVZJIiwgIkVDQUlUUCIsICJFQ0FJVE0iLCAiRUNDSFBVIiwgIkVDQUlUViIsICJFQ0FDUkMiLCAiRUNBSVRWIiwgIkVDUkxJTiIsICJFQ1ZUQ0YiLCAiRUNWVENUIikuYnVpbGQoKQ0KICAgICAgREJDb250YWluZXIgcmVjb3JkRkNIQ0hLID0gcXVlcnlGQ0hDSEsuZ2V0Q29udGFpbmVyKCkNCiAgICAgIHJlY29yZEZDSENISy5zZXQoIkVDQ09OTyIsIENPTk8udG9JbnRlZ2VyKCkpOw0KICAgICAgcmVjb3JkRkNIQ0hLLnNldCgiRUNESVZJIiwgRElWSSk7DQogICAgICByZWNvcmRGQ0hDSEsuc2V0KCJFQ0FJVFAiLCBBSVRQLnRvSW50ZWdlcigpKTsNCiAgICAgIHJlY29yZEZDSENISy5zZXQoIkVDQUlUTSIsIEFJVE0pOw0KICAgICAgcmVjb3JkRkNIQ0hLLnNldCgiRUNDSFBVIiwgMSk7DQogICAgICByZWNvcmRGQ0hDSEsuc2V0KCJFQ0FJVFYiLCA4KTsNCiAgICAgIHJlY29yZEZDSENISy5zZXQoIkVDQUNSQyIsIEFDUlYudG9JbnRlZ2VyKCkpOw0KDQogICAgICBpbnQgcmVhZHMgPSBxdWVyeUZDSENISy5yZWFkQWxsKHJlY29yZEZDSENISywgNywgZ2V0RkNIQ0hLUmVjb3JkczIpOw0KDQogICAgfQ0KICB9DQoNCiAgQ2xvc3VyZSA8ID8gPiBnZXRGQ0hDSEtSZWNvcmRzMiA9IHsNCiAgICBEQkNvbnRhaW5lciByZWNvcmQgLT4NCiAgICBTdHJpbmcgRlYwMSA9IHJlY29yZC5nZXQoIkVDQUlUViIpID09IG51bGwgPyAiIiA6IHJlY29yZC5nZXQoIkVDQUlUViIpOw0KICAgIFN0cmluZyBGVjAyID0gcmVjb3JkLmdldCgiRUNSTElOIikgPT0gbnVsbCA/ICIiIDogcmVjb3JkLmdldCgiRUNSTElOIik7DQogICAgU3RyaW5nIEZWMDUgPSByZWNvcmQuZ2V0KCJFQ1ZUQ0YiKSA9PSBudWxsID8gIjAwIiA6IHJlY29yZC5nZXQoIkVDVlRDRiIpOw0KICAgIFN0cmluZyBGVjA2ID0gcmVjb3JkLmdldCgiRUNWVENUIikgPT0gbnVsbCA/ICIwMCIgOiByZWNvcmQuZ2V0KCJFQ1ZUQ1QiKTsNCiAgICBTdHJpbmcgQUlUTSA9IHJlY29yZC5nZXQoIkVDQUlUTSIpID09IG51bGwgPyAiIiA6IHJlY29yZC5nZXQoIkVDQUlUTSIpOw0KICAgIFN0cmluZyBESVZJID0gcmVjb3JkLmdldCgiRUNESVZJIikgPT0gbnVsbCA/ICIiIDogcmVjb3JkLmdldCgiRUNESVZJIik7DQogICAgU3RyaW5nIEFJVFAgPSByZWNvcmQuZ2V0KCJFQ0FJVFAiKSA9PSBudWxsID8gIiIgOiByZWNvcmQuZ2V0KCJFQ0FJVFAiKTsNCg0KICAgIG1pLm91dERhdGEucHV0KCdSQ1RQJywgJ1YnKTsNCiAgICBtaS5vdXREYXRhLnB1dCgnRElWSScsIERJVkkpOw0KICAgIG1pLm91dERhdGEucHV0KCdBSVRQJywgQUlUUCk7DQogICAgbWkub3V0RGF0YS5wdXQoJ0FJVE0nLCBBSVRNKTsNCiAgICBtaS5vdXREYXRhLnB1dCgnS1YwNicsICI4Iik7DQogICAgbWkub3V0RGF0YS5wdXQoJ0ZWMDInLCBGVjAyKTsNCiAgICBtaS5vdXREYXRhLnB1dCgnRlYwMycsIEZWMDUpOw0KICAgIG1pLm91dERhdGEucHV0KCdGVjA0JywgRlYwNik7DQogICAgbWkud3JpdGUoKTsNCg0KICB9DQp9"}}}