{"utilities":{},"programModules":{"EXT001MI":{"program":"EXT001MI","triggers":{},"transactions":{"ISPGetPrchseOrd":{"sourceUuid":"f65058ed-dac1-40d1-a9ed-feebcaf6a608","name":"ISPGetPrchseOrd","program":"EXT001MI","description":"ALL_MI_0001_GetPurchaseOrders","active":true,"multi":true,"modified":1678809631275,"modifiedBy":"APE_SMA","outputFields":[{"name":"RCTP","description":"Record Type (OH,OC,OL,LR,LC)","length":2,"mandatory":false,"type":"A"},{"name":"DIVI","description":"division","length":3,"mandatory":false,"type":"A"},{"name":"FACI","description":"facility","length":3,"mandatory":false,"type":"A"},{"name":"WHLO","description":"warehouse","length":3,"mandatory":false,"type":"A"},{"name":"PUNO","description":"purchase order number","length":10,"mandatory":false,"type":"A"},{"name":"SUNO","description":"supplier","length":10,"mandatory":false,"type":"A"},{"name":"SUNM","description":"supplier name","length":700,"mandatory":false,"type":"A"},{"name":"RENM","description":"name","length":36,"mandatory":false,"type":"A"},{"name":"BUYE","description":"buyer","length":10,"mandatory":false,"type":"A"},{"name":"CSCD","description":"country","length":3,"mandatory":false,"type":"A"},{"name":"CUCD","description":"currency","length":3,"mandatory":false,"type":"A"},{"name":"DATE","description":"entry date","length":8,"mandatory":false,"type":"N"},{"name":"PUDT","description":"order date","length":8,"mandatory":false,"type":"N"},{"name":"DWDT","description":"requested delivery date","length":8,"mandatory":false,"type":"N"},{"name":"YRE1","description":"your reference","length":36,"mandatory":false,"type":"A"},{"name":"PHNO","description":"telephone number 1","length":16,"mandatory":false,"type":"A"},{"name":"TFNO","description":"facsimile transmission number","length":16,"mandatory":false,"type":"A"},{"name":"REMK","description":"remark","length":30,"mandatory":false,"type":"A"},{"name":"ORTY","description":"order type","length":3,"mandatory":false,"type":"A"},{"name":"COAM","description":"total order cost","length":17,"mandatory":false,"type":"N"},{"name":"TOQT","description":"total quantity","length":15,"mandatory":false,"type":"N"},{"name":"TEPY","description":"payment terms","length":3,"mandatory":false,"type":"A"},{"name":"MODL","description":"delivery method","length":3,"mandatory":false,"type":"A"},{"name":"TEDL","description":"delivery terms","length":3,"mandatory":false,"type":"A"},{"name":"TEPA","description":"packaging terms","length":3,"mandatory":false,"type":"A"},{"name":"TEL1","description":"terms text","length":36,"mandatory":false,"type":"A"},{"name":"PUSL","description":"lowest status - purchase order","length":2,"mandatory":false,"type":"A"},{"name":"PUST","description":"highest status - purchase order","length":2,"mandatory":false,"type":"A"},{"name":"CDSE","description":"sequence number - costing element","length":4,"mandatory":false,"type":"N"},{"name":"REPN","description":"receiving number","length":10,"mandatory":false,"type":"N"},{"name":"EXTY","description":"charge type","length":1,"mandatory":false,"type":"N"},{"name":"TX30","description":"description","length":30,"mandatory":false,"type":"A"},{"name":"EXIC","description":"charge invoicing","length":1,"mandatory":false,"type":"N"},{"name":"WSOP","description":"costing operator","length":2,"mandatory":false,"type":"A"},{"name":"CCUC","description":"Charge Currency","length":3,"mandatory":false,"type":"A"},{"name":"CEVA","description":"costing element amount","length":15,"mandatory":false,"type":"N"},{"name":"CEVJ","description":"adjusted costing element amount","length":15,"mandatory":false,"type":"N"},{"name":"THPR","description":"3rd party charges","length":1,"mandatory":false,"type":"N"},{"name":"IVCQ","description":"invoice charge quantity","length":1,"mandatory":false,"type":"N"},{"name":"CEID","description":"costing element","length":6,"mandatory":false,"type":"A"},{"name":"PNLI","description":"purchase order line","length":3,"mandatory":false,"type":"N"},{"name":"PNLS","description":"purchase order line subnumber","length":3,"mandatory":false,"type":"N"},{"name":"ITNO","description":"item number","length":15,"mandatory":false,"type":"A"},{"name":"ADQA","description":"transport notified quantit alternate U/M","length":15,"mandatory":false,"type":"N"},{"name":"ORQT","description":"ordered quantity - basic U/M","length":15,"mandatory":false,"type":"N"},{"name":"TRDT","description":"transaction date","length":8,"mandatory":false,"type":"N"},{"name":"LWHL","description":"Line Warehouse","length":3,"mandatory":false,"type":"A"},{"name":"PITD","description":"purchase order item name","length":60,"mandatory":false,"type":"A"},{"name":"PITT","description":"purchase order item description","length":120,"mandatory":false,"type":"A"},{"name":"SITE","description":"supplier item number","length":30,"mandatory":false,"type":"A"},{"name":"CAQA","description":"approved quantity - alternate U/M","length":15,"mandatory":false,"type":"N"},{"name":"RJQA","description":"rejected quantity","length":15,"mandatory":false,"type":"N"},{"name":"SDQA","description":"stored quantity","length":15,"mandatory":false,"type":"N"},{"name":"ORQA","description":"ordered quantity - alternate U/M","length":15,"mandatory":false,"type":"N"},{"name":"IVQA","description":"invoiced quantity - alternate U/M","length":15,"mandatory":false,"type":"N"},{"name":"RVQA","description":"received quantity","length":15,"mandatory":false,"type":"N"},{"name":"CFQA","description":"confirmed quantity","length":15,"mandatory":false,"type":"N"},{"name":"OQPU","description":"Open Quantity Price UM","length":3,"mandatory":false,"type":"A"},{"name":"PURC","description":"requisition by","length":10,"mandatory":false,"type":"A"},{"name":"LBUY","description":"Line Buyer","length":10,"mandatory":false,"type":"A"},{"name":"STUM","description":"Standard UM","length":3,"mandatory":false,"type":"A"},{"name":"UNMS","description":"basic unit of measure","length":3,"mandatory":false,"type":"A"},{"name":"ALUM","description":"Alternative UM","length":3,"mandatory":false,"type":"A"},{"name":"LNAM","description":"line amount - order currency","length":15,"mandatory":false,"type":"N"},{"name":"PUPR","description":"purchase price","length":17,"mandatory":false,"type":"N"},{"name":"PUQT","description":"purchased quantity","length":15,"mandatory":false,"type":"N"},{"name":"ALPR","description":"Alternative Price","length":17,"mandatory":false,"type":"N"},{"name":"PTCD","description":"purchase price text","length":1,"mandatory":false,"type":"N"},{"name":"VTCD","description":"VAT code","length":2,"mandatory":false,"type":"N"},{"name":"GRMT","description":"goods receiving method","length":3,"mandatory":false,"type":"A"},{"name":"LMOD","description":"Line MODL","length":3,"mandatory":false,"type":"A"},{"name":"LTED","description":"Line TEDL","length":3,"mandatory":false,"type":"A"},{"name":"LTEL","description":"Line TEL1","length":36,"mandatory":false,"type":"A"},{"name":"LPSL","description":"Line PUSL","length":2,"mandatory":false,"type":"A"},{"name":"LPST","description":"Line PUST","length":2,"mandatory":false,"type":"A"},{"name":"POPN","description":"alias number","length":30,"mandatory":false,"type":"A"},{"name":"RORC","description":"reference order category","length":1,"mandatory":false,"type":"N"},{"name":"RORN","description":"reference order number","length":10,"mandatory":false,"type":"A"},{"name":"RORL","description":"reference order line","length":6,"mandatory":false,"type":"N"},{"name":"RORX","description":"line suffix","length":3,"mandatory":false,"type":"N"},{"name":"SUDO","description":"delivery note number","length":20,"mandatory":false,"type":"A"},{"name":"FRRC","description":"freight reference type","length":1,"mandatory":false,"type":"N"},{"name":"FRRE","description":"freight reference","length":12,"mandatory":false,"type":"N"},{"name":"AMOP","description":"Amount Open Std Unit Value","length":17,"mandatory":false,"type":"A"},{"name":"AMOR","description":"Amount Ordered Std Unit Value","length":17,"mandatory":false,"type":"A"},{"name":"PRCE","description":"Price Std Unit Value","length":17,"mandatory":false,"type":"N"},{"name":"UNIT","description":"Unit - Std Unit Value","length":3,"mandatory":false,"type":"A"},{"name":"OPQT","description":"Open Quantity Std Unit Value","length":17,"mandatory":false,"type":"A"},{"name":"QTIV","description":"Quantity Invoice Std Unit Value","length":17,"mandatory":false,"type":"A"},{"name":"QTOR","description":"Quantity Ordered Std Unit Value","length":17,"mandatory":false,"type":"A"},{"name":"QTRV","description":"Quantity Received - Std Unit Value","length":17,"mandatory":false,"type":"A"},{"name":"ALTU","description":"Alternative Unit - Unit Value","length":3,"mandatory":false,"type":"A"},{"name":"ALQO","description":"Alternative Quanity Open Unit Value","length":17,"mandatory":false,"type":"N"},{"name":"ALTP","description":"Alternative Price Unit Value","length":17,"mandatory":false,"type":"N"},{"name":"RPNM","description":"Receipt Number","length":15,"mandatory":false,"type":"A"},{"name":"RELP","description":"receipt type","length":1,"mandatory":false,"type":"N"},{"name":"RPDT","description":"Receipt Date","length":8,"mandatory":false,"type":"A"},{"name":"RPQT","description":"Receipt Quantity","length":17,"mandatory":false,"type":"N"},{"name":"RQAL","description":"Receipt Quantity Alternative UM","length":17,"mandatory":false,"type":"A"},{"name":"OAOU","description":"Open Amount Order UM","length":17,"mandatory":false,"type":"A"},{"name":"OALC","description":"Open Amount Local Currency","length":17,"mandatory":false,"type":"A"},{"name":"OPCW","description":"Open Catch Weight","length":17,"mandatory":false,"type":"N"},{"name":"OQOU","description":"Open Quantity Order UM","length":17,"mandatory":false,"type":"A"},{"name":"OQPM","description":"Open Quantity Purchase Order Price UM","length":17,"mandatory":false,"type":"A"},{"name":"CELD","description":"Costing element Description","length":20,"mandatory":false,"type":"A"},{"name":"IVCS","description":"Invoice Costs","length":20,"mandatory":false,"type":"A"},{"name":"CHFC","description":"Charge Factor","length":20,"mandatory":false,"type":"A"},{"name":"CWUN","description":"CATCH WEIGHT UM","length":3,"mandatory":false,"type":"A"}],"inputFields":[{"name":"SUNO","description":"supplier","length":10,"mandatory":false,"type":"A"},{"name":"PUNO","description":"Purchase Orders List (semi-colon separated)","length":500,"mandatory":false,"type":"A"},{"name":"PUSL","description":"lowest status - purchase order","length":2,"mandatory":false,"type":"A"},{"name":"PUST","description":"highest status - purchase order","length":2,"mandatory":false,"type":"A"}],"utilities":[]}},"batches":{}}},"sources":{"f65058ed-dac1-40d1-a9ed-feebcaf6a608":{"uuid":"f65058ed-dac1-40d1-a9ed-feebcaf6a608","updated":1678809569969,"updatedBy":"APE_SMA","created":1678293075530,"createdBy":"APE_SMA","apiVersion":"0.9","beVersion":"16.0.0.20230118181716.8","codeHash":"94D50C32991617203B7F347E1123A149EBDBC6B5DE0E37BE7E11A5FFEED710A8","code":"LyoqDQoqIFJFQURNRQ0KKiBUaGlzIGV4dGVuc2lvbiBzZW5kcyBNMyBQdXJjaGFzZSBvcmRlciBkZXRhaWxzIChQTyBMaW5lIGRldGFpbHMsUmVjZWlwdCBkZXRhaWxzLGNoYXJnZSBkZXRhaWxzLGl0ZW0gZGV0YWlscyxzdXBwbGllciBkZXRhaWxzKSB0byAzcmQgcGFydHkgYXBwbGljYXRpb24gSVNQLiANCiogDQoqDQoqIE5hbWU6IEVYVDAwMU1JLklTUEdldFByY2hzZU9yZA0KKiBEZXNjcmlwdGlvbjogDQoqIERhdGUgICAgICAgICAgQ2hhbmdlZCBieSAgICAgICAgICAgICAgRGVzY3JpcHRpb24NCiogMjAyMS0wNS0xOSAgICBIaXRlc2ggQ2hvdHJhbmkgICAgICAgICBJbml0aWFsIHZlcnNpb24NCiogMjAyMy0wMy0xMCAgICBTaGFzaGFuayBNYWxhbGkgICAgICAgICBSZW1vdmUgdW51c2VkIGNvZGUsIHVzYWdlIGxvd2VyQ2FtZWxDYXNlDQoqICANCiovDQoNCg0KaW1wb3J0IGdyb292eS5qc29uLio7DQppbXBvcnQgamF2YS50aW1lLkxvY2FsRGF0ZTsNCmltcG9ydCBqYXZhLnRpbWUuZm9ybWF0LkRhdGVUaW1lRm9ybWF0dGVyOw0KaW1wb3J0IGphdmEudGV4dC5EZWNpbWFsRm9ybWF0Ow0KaW1wb3J0IGphdmEubGFuZy5Eb3VibGU7DQppbXBvcnQgamF2YS5sYW5nLkludGVnZXI7DQppbXBvcnQgamF2YS5tYXRoLio7DQoNCnB1YmxpYyBjbGFzcyBJU1BHZXRQcmNoc2VPcmQgZXh0ZW5kcyBFeHRlbmRNM1RyYW5zYWN0aW9uIHsNCiAgcHJpdmF0ZSBmaW5hbCBNSUFQSSBtaTsNCiAgcHJpdmF0ZSBmaW5hbCBNSUNhbGxlckFQSSBtaUNhbGxlcjsNCiAgcHJpdmF0ZSBmaW5hbCBMb2dnZXJBUEkgbG9nZ2VyOw0KICBwcml2YXRlIGZpbmFsIFByb2dyYW1BUEkgcHJvZ3JhbTsNCiAgcHJpdmF0ZSBmaW5hbCBEYXRhYmFzZUFQSSBkYXRhYmFzZTsNCiAgcHJpdmF0ZSBmaW5hbCBJb25BUEkgaW9uOw0KICBwcml2YXRlIFN0cmluZyBDT05PID0gIiI7DQogIHByaXZhdGUgU3RyaW5nIFNVTk8gPSAiIjsNCiAgcHJpdmF0ZSBTdHJpbmcgUFVOTyA9ICIiOw0KICBwcml2YXRlIFN0cmluZyBpbnB1dFB1c2wgPSAiIjsNCiAgcHJpdmF0ZSBTdHJpbmcgaW5wdXRQdXN0ID0gIiI7DQogIHByaXZhdGUgU3RyaW5nIGNoZWNrUHVzbCA9ICIiOw0KICBwcml2YXRlIFN0cmluZyBjaGVja1B1c3QgPSAiIjsNCiAgcHJpdmF0ZSBTdHJpbmcgY2hlY2tDb2FtID0gIiI7DQogIHByaXZhdGUgU3RyaW5nIGNoZWNrUG90YyA9ICIiOw0KICBwcml2YXRlIFN0cmluZyBjaGVja1RvcXQgPSAiIjsNCiAgcHJpdmF0ZSBTdHJpbmcgbnVtYmVyT2ZEZWNpbWFscyA9ICIiOw0KICBwcml2YXRlIFN0cmluZyBwcmljZVVuaXRTdGFuZGFyZCA9ICIiOw0KICBwcml2YXRlIFN0cmluZyBleHBvcnRFbXB0eSA9ICIiOw0KICBwcml2YXRlIFN0cmluZyB2YWxpZENoYXJnZVR5cGVzID0gIiI7DQogIHByaXZhdGUgU3RyaW5nIHJlY2VpcHRRdWFudGl0eSA9ICIiOw0KICBwcml2YXRlIFN0cmluZyBvcGVuQW1vdW50TG9jYWxDdXJyZW5jeSA9ICIiOw0KICBwcml2YXRlIFN0cmluZyBmaXhlZENoYXJnZVR5cGVzID0gIiI7DQogIHByaXZhdGUgQXJyYXlMaXN0IDwgU3RyaW5nID4gdmFsaWRQdXJjaGFzZU9yZGVyTGlzdCA9IG51bGw7DQogIHByaXZhdGUgQXJyYXlMaXN0IDwgU3RyaW5nID4gdGVtcFB1bm8gPSBudWxsOw0KICBwcml2YXRlIEFycmF5TGlzdCA8IEhhc2h0YWJsZSA+IGNoYXJnZUxpc3QgPSBudWxsOw0KICBwcml2YXRlIEFycmF5TGlzdCA8IEhhc2h0YWJsZSA+IGxpbmVMaXN0ID0gbnVsbDsNCiAgcHJpdmF0ZSBBcnJheUxpc3QgPCBIYXNodGFibGUgPiBsaW5lUmVjZWlwdExpc3QgPSBudWxsOw0KICBwcml2YXRlIEFycmF5TGlzdCA8IEhhc2h0YWJsZSA+IG9wZW5MaW5lUmVjZWlwdExpc3QgPSBudWxsOw0KICBwcml2YXRlIEFycmF5TGlzdCA8IEhhc2h0YWJsZSA+IGxpbmVDaGFyZ2VSZWNlaXB0TGlzdCA9IG51bGw7DQogIHByaXZhdGUgQXJyYXlMaXN0IDwgSGFzaHRhYmxlID4gbGluZU9wZW5DaGFyZ2VSZWNlaXB0TGlzdCA9IG51bGw7DQogIHByaXZhdGUgQXJyYXlMaXN0IDwgSGFzaHRhYmxlID4gdGVtcExpbmVDaGFyZ2VMaXN0ID0gbnVsbDsNCiAgcHJpdmF0ZSBBcnJheUxpc3QgPCBIYXNodGFibGUgPiBsaW5lQ2hhcmdlTGlzdCA9IG51bGw7DQogIHByaXZhdGUgU3RyaW5nIG9EaXZpID0gIiIsIG9GYWNpID0gIiIsIG9XaGxvID0gIiIsIG9QdW5vID0gIiIsIG9TdW5vID0gIiIsIG9TdW5tID0gIiIsIG9SZW5tID0gIiIsIG9CdXllID0gIiIsIG9PcnR5ID0gIiI7DQogIHByaXZhdGUgU3RyaW5nIG9Dc2NkID0gIiIsIG9DdWNkID0gIiIsIG9EYXRlID0gIiIsIG9QdWR0ID0gIiIsIG9Ed2R0ID0gIiIsIG9ZcmUxID0gIiIsIG9QaG5vID0gIiIsIG9UZm5vID0gIiI7DQogIHByaXZhdGUgU3RyaW5nIG9JYXBjID0gIiI7DQogIHByaXZhdGUgU3RyaW5nIG9SZW1rID0gIiIsIG9PcnRrID0gIiIsIG9Db2FtID0gIiIsIG9Ub3F0ID0gIiIsIG9Nb2RsID0gIiIsIG9UZXB5ID0gIiIsIG9UZXBhID0gIiIsIG9UZWwxID0gIiIsIG9QdXNsID0gIiIsIG9QdXN0ID0gIiI7DQogIHByaXZhdGUgU3RyaW5nIG9EbWN1ID0gIiIsIG9UZWRsID0gIiI7DQogIHByaXZhdGUgU3RyaW5nIHN0YW5kYXJkVW5pdE1lYXN1cmUgPSAiIjsNCiAgcHJpdmF0ZSBTdHJpbmcgdW5pdE1lYXN1cmUgPSAiIiwgaW52UXR5LCByZXBRdHk7DQogIHByaXZhdGUgU3RyaW5nIGFsdGVybmF0ZVVuaXRNZWFzdXJlID0gIiIsIG9wZW5RdWFudGl0eU9yZGVyVW1hID0gIiI7DQogIHByaXZhdGUgU3RyaW5nIHByaWNlVW1EY2NkID0gIiIsIHByaWNlVW1EbWNmID0gIiIsIHByaWNlVW1Db2ZhID0gIiIsIG9yZGVyVW1EY2NkID0gIiIsIG9yZGVyVW1EbWNmID0gIiIsIG9yZGVyVW1Db2ZhID0gIiIsIGJhc2ljVW1EY2NkID0gIiIsIHBvcG5FYTEzID0gIiIsIElWUVQgPSAiIiwgZWFjaExpbmVQdXVuID0gIiIsIGVhY2hMaW5lUHB1biA9ICIiOw0KICBwcml2YXRlIFN0cmluZyBvcmRlcmRRdWFudGl0eVByaWNlVW0sIHJlY2VpdmVkUXVhbnRpdHlQcmljZVVtLCBpbnZvaWNlZFF1YW50aXR5UHJpY2VVbSwgb3BlblF1YW50aXR5UHJpY2VVbSwgb3BlUXVhbnRpdHlPcmRlclVtLCBhbW91bnRPcGVuLCBwcmljUGVyUGllY2VQcmljZVVtLCBwcmljUGVyUGllY2VPcmRlclVtOw0KICBwcml2YXRlIFN0cmluZyBwcmljZVBlclBpZWNlU3RhbmRhcmRVbSwgcHJpY2VwZXJQaWVjZU91bSwgb3BlblF1YW50aXR5U3RhbmRhcmRVbSwgaW52b2ljZWRRdWFudGl0eVN0YW5kYXJkVW0sIG9yZGVyZWRRdWFudGl0eVN0YW5kYXJkVW0sIHJlY2VpdmVkUXVhbnRpdHlTdGFuZGFyZFVtLCBhbHRlcm5hdGl2ZVF1YW50aXR5T3BlbiwgYWx0ZXJuYXRpdmVQcmljZTsNCiAgcHJpdmF0ZSBTdHJpbmcgQVVUUEEgPSAiIiwgcmVjZWl2ZWRRdWFudGl0eU9yZGVyVW0gPSAiIiwgcmVjZXZkQ29zdEFtb3VudE9yZGVyVW1PcmRlckN1cnJlbmN5ID0gIiIsIGFtb3VudFJlY2VpdmVkUHJpY2VVbSA9ICIiLCBhbW91bnRPcGVuUHJpY2VVbSA9ICIiLCBhbW91bnRPcGVuT3JkZXJVbSA9ICIiOw0KICBwcml2YXRlIGJvb2xlYW4gaXNFbmRPZkZpbGUgPSBmYWxzZTsNCiAgcHJpdmF0ZSBEb3VibGUgZENwcHIgPSAwLjBkOw0KICBwcml2YXRlIEhhc2h0YWJsZSB0ZW1wVGFibGVDaGFyZ2VzID0gbnVsbDsNCiAgcHJpdmF0ZSBIYXNodGFibGUgdGVtcFRhYmxlQ2hhcmdlczEgPSBudWxsOw0KDQogIHB1YmxpYyBJU1BHZXRQcmNoc2VPcmQoTUlBUEkgbWksIE1JQ2FsbGVyQVBJIG1pQ2FsbGVyLCBQcm9ncmFtQVBJIHByb2dyYW0sIERhdGFiYXNlQVBJIGRhdGFiYXNlLCBJb25BUEkgaW9uLCBMb2dnZXJBUEkgbG9nZ2VyKSB7DQogICAgdGhpcy5taSA9IG1pOw0KICAgIHRoaXMucHJvZ3JhbSA9IHByb2dyYW07DQogICAgdGhpcy5taUNhbGxlciA9IG1pQ2FsbGVyOw0KICAgIHRoaXMubG9nZ2VyID0gbG9nZ2VyOw0KICAgIHRoaXMuZGF0YWJhc2UgPSBkYXRhYmFzZTsNCiAgICB0aGlzLmlvbiA9IGlvbjsNCiAgfQ0KDQogIHB1YmxpYyB2b2lkIG1haW4oKSB7DQogICAgZ2V0Q29udHJvbFByb3BlcnRpZXMoKTsNCiAgICB2YWxpZFB1cmNoYXNlT3JkZXJMaXN0ID0gbmV3IEFycmF5TGlzdCA8IFN0cmluZyA+ICgpOw0KICAgIHRlbXBUYWJsZUNoYXJnZXMgPSBuZXcgSGFzaHRhYmxlIDwgU3RyaW5nLCBTdHJpbmcgPiAoKTsNCiAgICB0ZW1wVGFibGVDaGFyZ2VzMSA9IG5ldyBIYXNodGFibGUgPCBTdHJpbmcsIFN0cmluZyA+ICgpOw0KICAgIENPTk8gPSBwcm9ncmFtLkxEQVpELmdldCgnQ09OTycpOw0KICAgIFNVTk8gPSBtaS5pbkRhdGEuZ2V0KCdTVU5PJyk7DQogICAgUFVOTyA9IG1pLmluRGF0YS5nZXQoJ1BVTk8nKTsNCiAgICBpbnB1dFB1c2wgPSBtaS5pbkRhdGEuZ2V0KCdQVVNMJyk7DQogICAgaW5wdXRQdXN0ID0gbWkuaW5EYXRhLmdldCgnUFVTVCcpOw0KICAgIGlmIChpbnB1dFB1c2wgPT0gbnVsbCB8fCBpbnB1dFB1c2wudHJpbSgpLmlzRW1wdHkoKSkgew0KICAgICAgaW5wdXRQdXNsID0gIjAiOw0KICAgIH0NCiAgICBpZiAoaW5wdXRQdXN0ID09IG51bGwgfHwgaW5wdXRQdXN0LnRyaW0oKS5pc0VtcHR5KCkpIHsNCiAgICAgIGlucHV0UHVzdCA9ICIxMDAiOw0KICAgIH0NCiAgICBpbnQgb3JkZXJBcnJheUxlbmd0aCA9IDA7DQogICAgaWYgKCFQVU5PLnRyaW0oKS5pc0VtcHR5KCkgJiYgU1VOTy50cmltKCkuaXNFbXB0eSgpKSB7DQogICAgICBTdHJpbmdbXSBvcmRlckFycmF5ID0gUFVOTy5zcGxpdCgnOycpOw0KICAgICAgb3JkZXJBcnJheUxlbmd0aCA9IG9yZGVyQXJyYXkubGVuZ3RoOw0KICAgICAgb3JkZXJBcnJheS5lYWNoIHsNCiAgICAgICAgdmFsdWUgLT4NCiAgICAgICAgICBTdHJpbmcgZWFjaFB1bm8gPSB2YWx1ZTsNCg0KICAgICAgICBnZXRIZWFkQmFzaWMoZWFjaFB1bm8pOw0KICAgICAgICBnZXRIZWFkKGVhY2hQdW5vKTsNCiAgICAgICAgdmFsaWRQdXJjaGFzZU9yZGVyTGlzdC5hZGQoZWFjaFB1bm8udHJpbSgpKTsNCg0KICAgICAgfQ0KDQogICAgfSBlbHNlIGlmICghU1VOTy50cmltKCkuaXNFbXB0eSgpKSB7DQogICAgICBnZXRQdXJjaGFzZU9yZGVyRm9yU3VwcGxpZXIoKTsNCiAgICB9DQoNCiAgICBpbnQgcHVyY2hhc2VPcmRlckNhcCA9IDA7DQogICAgaWYgKG9yZGVyQXJyYXlMZW5ndGggPT0gMCkgew0KICAgICAgb3JkZXJBcnJheUxlbmd0aCA9IDUwOw0KICAgIH0NCiAgICBpZiAodmFsaWRQdXJjaGFzZU9yZGVyTGlzdC5zaXplID4gMTAwKSB7DQogICAgICB2YWxpZFB1cmNoYXNlT3JkZXJMaXN0LnNpemUgPSAxMDA7DQogICAgfQ0KICAgIGlmICh2YWxpZFB1cmNoYXNlT3JkZXJMaXN0LnNpemUgPCA1MCkgew0KICAgICAgaXNFbmRPZkZpbGUgPSB0cnVlOw0KICAgIH0NCiAgICB2YWxpZFB1cmNoYXNlT3JkZXJMaXN0LmVhY2ggew0KICAgICAgdmFsdWUgLT4NCiAgICAgICAgU3RyaW5nIGVhY2hQdW5vID0gdmFsdWU7DQogICAgICBjbGVhclBvSGVhZGVyRmllbGRzKCk7DQogICAgICBib29sZWFuIHJlY29yZEZvdW5kID0gZ2V0T3JkZXJEZXRhaWxzKGVhY2hQdW5vLnRyaW0oKSk7DQogICAgICBnZXRQb1N0YXR1cyhlYWNoUHVuby50cmltKCkpOw0KICAgICAgZ2V0Q3VycmVuY3lDb252ZXJzaW9uKG9EaXZpLnRyaW0oKSk7DQogICAgICBnZXRTdXBwbGllck5hbWUob1N1bm8udHJpbSgpKTsNCiAgICAgIGlmIChyZWNvcmRGb3VuZCAmJiBwdXJjaGFzZU9yZGVyQ2FwIDwgb3JkZXJBcnJheUxlbmd0aCkgew0KICAgICAgICBwdXJjaGFzZU9yZGVyQ2FwKys7DQogICAgICAgIHdyaXRlUHVyY2hhc2VPcmRlcigpOw0KICAgICAgICBnZXRDaGFyZ2VzKGVhY2hQdW5vLnRyaW0oKSk7DQogICAgICAgIGNoYXJnZUxpc3QuZWFjaCB7DQogICAgICAgICAgdmFsdWUxIC0+DQogICAgICAgICAgICBIYXNodGFibGUgZWFjaENoYXJnZSA9IHZhbHVlMTsNCiAgICAgICAgICB3cml0ZUNoYXJnZXMoZWFjaFB1bm8sIGVhY2hDaGFyZ2UpOw0KICAgICAgICB9DQoNCiAgICAgICAgZ2V0TGluZURldGFpbHMoZWFjaFB1bm8pOw0KICAgICAgICBsaW5lTGlzdC5lYWNoIHsNCiAgICAgICAgICB2YWx1ZTIgLT4NCiAgICAgICAgICAgIEhhc2h0YWJsZSBlYWNoTGluZSA9IHZhbHVlMjsNCiAgICAgICAgICBnZXRVbml0T2ZNZWFzdXJlbWVudENvbnZlcnNpb24oZWFjaExpbmUpOw0KICAgICAgICAgIGdldEJhc2ljRGVjaW1hbENvZGUoZWFjaExpbmUpOw0KICAgICAgICAgIGdldEl0ZW1BbGlhcyhlYWNoTGluZSk7DQogICAgICAgICAgZ2V0TXBsaW5lRGV0YWlscyhlYWNoUHVubywgZWFjaExpbmUpOw0KICAgICAgICAgIHVzZUNwcHJJZkF2YWlsYWJsZShlYWNoTGluZSk7DQogICAgICAgICAgY2hlY2tPcmRlclByaWNlQW5kQmFzZVVuaXRzKGVhY2hMaW5lKQ0KICAgICAgICAgIHdyaXRlUHVyY2hhc2VMaW5lKGVhY2hQdW5vLCBlYWNoTGluZSk7DQogICAgICAgICAgZ2V0TGluZVJlY2VpcHRzKGVhY2hQdW5vLCBlYWNoTGluZSk7DQogICAgICAgICAgb3BlbkxpbmVSZWNlaXB0TGlzdCA9IG5ldyBBcnJheUxpc3QgPCBIYXNodGFibGUgPiAoKTsNCiAgICAgICAgICBsaW5lUmVjZWlwdExpc3QuZWFjaCB7DQogICAgICAgICAgICBsaW5lUmVjZWlwdCAtPg0KICAgICAgICAgICAgICBIYXNodGFibGUgZWFjaExpbmVSZWNlaXB0ID0gbGluZVJlY2VpcHQ7DQoNCiAgICAgICAgICAgIGNhbGN1bGF0ZVJlY2VpcHRRdWFudGl0aWVzKGVhY2hMaW5lUmVjZWlwdCwgZWFjaExpbmUpOw0KICAgICAgICAgICAgb3BlbkxpbmVSZWNlaXB0TGlzdC5hZGQoZWFjaExpbmVSZWNlaXB0KTsNCg0KICAgICAgICAgICAgZ2F0aGVyUmVjZWlwdENoYXJnZXMoZWFjaFB1bm8sIGVhY2hMaW5lUmVjZWlwdCwgZWFjaExpbmUpOw0KDQogICAgICAgICAgICBsaW5lT3BlbkNoYXJnZVJlY2VpcHRMaXN0ID0gbmV3IEFycmF5TGlzdCA8IEhhc2h0YWJsZSA+ICgpOw0KICAgICAgICAgICAgbGluZUNoYXJnZVJlY2VpcHRMaXN0LmVhY2ggew0KICAgICAgICAgICAgICBsaW5lQ2hhcmdlUmVjZWlwdCAtPg0KICAgICAgICAgICAgICAgIEhhc2h0YWJsZSBlYWNoTGluZUNoYXJnZVJlY2VpcHQgPSBsaW5lQ2hhcmdlUmVjZWlwdDsNCiAgICAgICAgICAgICAgZ2V0Q2hhcmdlVGV4dChlYWNoTGluZUNoYXJnZVJlY2VpcHQpOw0KICAgICAgICAgICAgICBjYWxjdWxhdGVSZWNlaXB0Q2hhcmdlUXVhbnRpdGllcyhlYWNoTGluZSwgZWFjaExpbmVSZWNlaXB0LCBlYWNoTGluZUNoYXJnZVJlY2VpcHQpOw0KDQogICAgICAgICAgICAgIGNoZWNrQ2hhcmdlT3JkZXJQcmljZUFuZEJhc2VVbml0KGVhY2hMaW5lLCBlYWNoTGluZVJlY2VpcHQsIGVhY2hMaW5lQ2hhcmdlUmVjZWlwdCk7DQogICAgICAgICAgICAgIGFkZFRvTGluZU9wZW5DaGFyZ2VSZWNlaXB0TGlzdChlYWNoUHVubywgZWFjaExpbmUsIGVhY2hMaW5lUmVjZWlwdCwgZWFjaExpbmVDaGFyZ2VSZWNlaXB0KTsNCiAgICAgICAgICAgICAgZ2V0TGluZUNoYXJnZXMoZWFjaFB1bm8sIGVhY2hMaW5lKTsNCiAgICAgICAgICAgICAgdGVtcExpbmVDaGFyZ2VMaXN0LmVhY2ggew0KDQogICAgICAgICAgICAgICAgdGVtcExpbmVDaGFyZ2UgLT4NCiAgICAgICAgICAgICAgICAgIEhhc2h0YWJsZSBlYWNoVGVtcExpbmVDaGFyZ2UgPSB0ZW1wTGluZUNoYXJnZTsNCg0KICAgICAgICAgICAgICAgIGdldExpbmVDaGFyZ2VUZXh0KGVhY2hQdW5vLCB0ZW1wTGluZUNoYXJnZSwgZWFjaExpbmUpOw0KICAgICAgICAgICAgICB9DQoNCiAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgbGluZUNoYXJnZUxpc3QuZWFjaCB7DQogICAgICAgICAgICAgIGxpbmVDaGFyZ2UgLT4NCiAgICAgICAgICAgICAgICBIYXNodGFibGUgZWFjaExpbmVDaGFyZ2UgPSBsaW5lQ2hhcmdlOw0KICAgICAgICAgICAgICB3cml0ZUxpbmVDaGFyZ2VzKGVhY2hQdW5vLCBlYWNoTGluZUNoYXJnZSwgZWFjaExpbmUpOw0KICAgICAgICAgICAgfQ0KDQogICAgICAgICAgfQ0KDQogICAgICAgICAgb3BlbkxpbmVSZWNlaXB0TGlzdC5lYWNoIHsNCiAgICAgICAgICAgIG9wZW5MaW5lUmVjZWlwdCAtPg0KICAgICAgICAgICAgICBIYXNodGFibGUgZWFjaE9wZW5MaW5lUmVjZWlwdCA9IG9wZW5MaW5lUmVjZWlwdDsNCiAgICAgICAgICAgIHdyaXRlUmVjZWlwdHMoZWFjaFB1bm8sIGVhY2hPcGVuTGluZVJlY2VpcHQsIGVhY2hMaW5lKTsNCiAgICAgICAgICB9DQoNCiAgICAgICAgfQ0KDQogICAgICB9DQoNCiAgICB9DQogICAgaWYgKGlzRW5kT2ZGaWxlKSB7DQogICAgICBtaS5vdXREYXRhLnB1dCgnUkNUUCcsICdMJyk7DQogICAgICBtaS5vdXREYXRhLnB1dCgnUFVOTycsICclJUVPRiUlJyk7DQogICAgICBtaS53cml0ZSgpOw0KICAgIH0NCiAgfQ0KDQoNCiAvKioNCiAgKiBSZXRyaXZlIHRoZSBjb250cm9sIHByb3BlcnRpZXMgZnJvbSBDVUdFWDEgDQogICogDQogICovDQoNCiAgcHVibGljIGdldENvbnRyb2xQcm9wZXJ0aWVzKCkgew0KICAgIGJvb2xlYW4gcmVjb3JkRXhpc3RzID0gdHJ1ZTsNCiAgICBkZWYgY2FsbGJhY2sgPSB7DQogICAgICBNYXAgPCBTdHJpbmcsDQogICAgICBTdHJpbmcgPiByZXN1bHRzIC0+DQogICAgICByZWNvcmRFeGlzdHMgPSAhcmVzdWx0cy5nZXQoJ2Vycm9yJyk7DQogICAgICBpZiAocmVjb3JkRXhpc3RzKSB7DQogICAgICAgIG51bWJlck9mRGVjaW1hbHMgPSByZXN1bHRzLmdldCgnQTEyMScpOw0KDQogICAgICB9IGVsc2Ugew0KICAgICAgICBtaS5lcnJvcigiUGxlYXNlIG1haW50YWluIHJlY29yZCBpbiBDVUdFWDEgZm9yIE5PT0ZERUNJTUFMUyIpOw0KICAgICAgICByZXR1cm47DQogICAgICB9DQogICAgfQ0KICAgIGRlZiBwYXJhbXMgPSBbIkZJTEUiOiAiSVNQRklMRSIsICJQSzAxIjogIkdFVFBVUkNIQVNFT1JERVIiLCAiUEswMiI6ICJOT09GREVDSU1BTFMiXTsNCiAgICBtaUNhbGxlci5jYWxsKCJDVVNFWFRNSSIsICJHZXRGaWVsZFZhbHVlIiwgcGFyYW1zLCBjYWxsYmFjayk7DQoNCiAgICBkZWYgY2FsbGJhY2syID0gew0KICAgICAgTWFwIDwgU3RyaW5nLA0KICAgICAgU3RyaW5nID4gcmVzdWx0cyAtPg0KICAgICAgcmVjb3JkRXhpc3RzID0gIXJlc3VsdHMuZ2V0KCdlcnJvcicpOw0KICAgICAgaWYgKHJlY29yZEV4aXN0cykgew0KICAgICAgICBwcmljZVVuaXRTdGFuZGFyZCA9IHJlc3VsdHMuZ2V0KCdBMTIxJyk7DQoNCiAgICAgIH0gZWxzZSB7DQogICAgICAgIG1pLmVycm9yKCJQbGVhc2UgbWFpbnRhaW4gcmVjb3JkIGluIENVR0VYMSBmb3IgUFJJQ0VVTklUU1RBTkRBUkQiKTsNCiAgICAgICAgcmV0dXJuOw0KICAgICAgfQ0KICAgIH0NCiAgICBkZWYgcGFyYW1zMiA9IFsiRklMRSI6ICJJU1BGSUxFIiwgIlBLMDEiOiAiR0VUUFVSQ0hBU0VPUkRFUiIsICJQSzAyIjogIlBSSUNFVU5JVFNUQU5EQVJEIl07DQogICAgbWlDYWxsZXIuY2FsbCgiQ1VTRVhUTUkiLCAiR2V0RmllbGRWYWx1ZSIsIHBhcmFtczIsIGNhbGxiYWNrMik7DQoNCiAgICBkZWYgY2FsbGJhY2szID0gew0KICAgICAgTWFwIDwgU3RyaW5nLA0KICAgICAgU3RyaW5nID4gcmVzdWx0cyAtPg0KICAgICAgcmVjb3JkRXhpc3RzID0gIXJlc3VsdHMuZ2V0KCdlcnJvcicpOw0KICAgICAgaWYgKHJlY29yZEV4aXN0cykgew0KICAgICAgICBleHBvcnRFbXB0eSA9IHJlc3VsdHMuZ2V0KCdBMTIxJyk7DQoNCiAgICAgIH0gZWxzZSB7DQogICAgICAgIG1pLmVycm9yKCJQbGVhc2UgbWFpbnRhaW4gcmVjb3JkIGluIENVR0VYMSBmb3IgRVhQT1JURU1QVFkiKTsNCiAgICAgICAgcmV0dXJuOw0KICAgICAgfQ0KICAgIH0NCiAgICBkZWYgcGFyYW1zMyA9IFsiRklMRSI6ICJJU1BGSUxFIiwgIlBLMDEiOiAiR0VUUFVSQ0hBU0VPUkRFUiIsICJQSzAyIjogIkVYUE9SVEVNUFRZIl07DQogICAgbWlDYWxsZXIuY2FsbCgiQ1VTRVhUTUkiLCAiR2V0RmllbGRWYWx1ZSIsIHBhcmFtczMsIGNhbGxiYWNrMyk7DQoNCiAgICBkZWYgY2FsbGJhY2s0ID0gew0KICAgICAgTWFwIDwgU3RyaW5nLA0KICAgICAgU3RyaW5nID4gcmVzdWx0cyAtPg0KICAgICAgcmVjb3JkRXhpc3RzID0gIXJlc3VsdHMuZ2V0KCdlcnJvcicpOw0KICAgICAgaWYgKHJlY29yZEV4aXN0cykgew0KICAgICAgICB2YWxpZENoYXJnZVR5cGVzID0gcmVzdWx0cy5nZXQoJ0ExMjEnKTsNCg0KICAgICAgfSBlbHNlIHsNCiAgICAgICAgbWkuZXJyb3IoIlBsZWFzZSBtYWludGFpbiByZWNvcmQgaW4gQ1VHRVgxIGZvciBDSEFSR0VUWVBFIik7DQogICAgICAgIHJldHVybjsNCiAgICAgIH0NCiAgICB9DQogICAgZGVmIHBhcmFtczQgPSBbIkZJTEUiOiAiSVNQRklMRSIsICJQSzAxIjogIkdFVFBVUkNIQVNFT1JERVIiLCAiUEswMiI6ICJDSEFSR0VUWVBFIl07DQogICAgbWlDYWxsZXIuY2FsbCgiQ1VTRVhUTUkiLCAiR2V0RmllbGRWYWx1ZSIsIHBhcmFtczQsIGNhbGxiYWNrNCk7DQoNCiAgICBkZWYgY2FsbGJhY2s1ID0gew0KICAgICAgTWFwIDwgU3RyaW5nLA0KICAgICAgU3RyaW5nID4gcmVzdWx0cyAtPg0KICAgICAgcmVjb3JkRXhpc3RzID0gIXJlc3VsdHMuZ2V0KCdlcnJvcicpOw0KICAgICAgaWYgKHJlY29yZEV4aXN0cykgew0KICAgICAgICBmaXhlZENoYXJnZVR5cGVzID0gcmVzdWx0cy5nZXQoJ0ExMjEnKTsNCg0KICAgICAgfSBlbHNlIHsNCiAgICAgICAgbWkuZXJyb3IoIlBsZWFzZSBtYWludGFpbiByZWNvcmQgaW4gQ1VHRVgxIGZvciBDSEFSR0VUWVBFIik7DQogICAgICAgIHJldHVybjsNCiAgICAgIH0NCiAgICB9DQogICAgZGVmIHBhcmFtczUgPSBbIkZJTEUiOiAiSVNQRklMRSIsICJQSzAxIjogIkdFVFBVUkNIQVNFT1JERVIiLCAiUEswMiI6ICJGSVhFRENIQVJHRVRZUEUiXTsNCiAgICBtaUNhbGxlci5jYWxsKCJDVVNFWFRNSSIsICJHZXRGaWVsZFZhbHVlIiwgcGFyYW1zNSwgY2FsbGJhY2s1KTsNCg0KICB9DQoNCg0KIC8qKg0KICAqIGNsZWFyIGxvY2FsIHZlcmlhYmxlcyBvZiBQTyBoZWFkZXINCiAgKiANCiAgKi8NCiAgIA0KICBwdWJsaWMgY2xlYXJQb0hlYWRlckZpZWxkcygpIHsNCiAgICBvUHVubyA9ICIiOw0KICAgIG9EYXRlID0gIiI7DQogICAgb1B1ZHQgPSAiIjsNCiAgICBvRHdkdCA9ICIiOw0KICAgIG9SZW5tID0gIiI7DQogICAgb1N1bm8gPSAiIjsNCiAgICBvQ3NjZCA9ICIiOw0KICAgIG9CdXllID0gIiI7DQogICAgb0N1Y2QgPSAiIjsNCiAgICBvWXJlMSA9ICIiOw0KICAgIG9QaG5vID0gIiI7DQogICAgb1Rmbm8gPSAiIjsNCiAgICBvUmVtayA9ICIiOw0KICAgIG9Db2FtID0gIiI7DQogICAgb0RpdmkgPSAiIjsNCiAgICBvRmFjaSA9ICIiOw0KICAgIG9XaGxvID0gIiI7DQogICAgb09ydHkgPSAiIjsNCiAgICBvVGVweSA9ICIiOw0KICAgIG9Nb2RsID0gIiI7DQogICAgb1RlcGEgPSAiIjsNCiAgICBvVGVkbCA9ICIiOw0KICAgIG9UZWwxID0gIiI7DQogICAgb1RvcXQgPSAiIjsNCiAgICBvRG1jdSA9ICIiOw0KICAgIG9TdW5tID0gIiI7DQogICAgb0lhcGMgPSAiIjsNCiAgfQ0KDQoNCiAvKioNCiAgKiBHZXQgUHVyY2hhc2Ugb3JkZXIgYmFzaWMgZGV0YWlscyB1c2luZyBQUFMwMDFNSS5HZXRIZWFkQmFzaWMNCiAgKiANCiAgKi8NCiAgIA0KICBwdWJsaWMgZ2V0SGVhZEJhc2ljKFN0cmluZyBQVU5PKSB7DQogICAgYm9vbGVhbiByZWNvcmRFeGlzdHMgPSB0cnVlOw0KICAgIGRlZiBjYWxsYmFjayA9IHsNCiAgICAgIE1hcCA8IFN0cmluZywNCiAgICAgIFN0cmluZyA+IHJlc3VsdHMgLT4NCiAgICAgIHJlY29yZEV4aXN0cyA9ICFyZXN1bHRzLmdldCgnZXJyb3InKTsNCiAgICAgIGlmIChyZWNvcmRFeGlzdHMpIHsNCiAgICAgICAgY2hlY2tQdXNsID0gcmVzdWx0cy5nZXQoJ1BVU0wnKTsNCiAgICAgICAgY2hlY2tQdXN0ID0gcmVzdWx0cy5nZXQoJ1BVU1QnKTsNCiAgICAgIH0NCiAgICB9DQogICAgZGVmIHBhcmFtcyA9IFsiQ09OTyI6IENPTk8sICJQVU5PIjogUFVOT107DQogICAgbWlDYWxsZXIuY2FsbCgiUFBTMDAxTUkiLCAiR2V0SGVhZEJhc2ljIiwgcGFyYW1zLCBjYWxsYmFjayk7DQogIH0NCg0KDQogLyoqDQogICogR2V0IFB1cmNoYXNlIG9yZGVyIHN0YXR1cyB1c2luZyBQUFMwMDFNSS5HZXRIZWFkQmFzaWMNCiAgKiANCiAgKi8NCiAgIA0KICBwdWJsaWMgZ2V0UG9TdGF0dXMoU3RyaW5nIFBVTk8pIHsNCiAgICBib29sZWFuIHJlY29yZEV4aXN0cyA9IHRydWU7DQogICAgZGVmIGNhbGxiYWNrID0gew0KICAgICAgTWFwIDwgU3RyaW5nLA0KICAgICAgU3RyaW5nID4gcmVzdWx0cyAtPg0KICAgICAgcmVjb3JkRXhpc3RzID0gIXJlc3VsdHMuZ2V0KCdlcnJvcicpOw0KICAgICAgaWYgKHJlY29yZEV4aXN0cykgew0KDQogICAgICAgIG9QdXNsID0gcmVzdWx0cy5nZXQoJ1BVU0wnKTsNCiAgICAgICAgb1B1c3QgPSByZXN1bHRzLmdldCgnUFVTVCcpOw0KDQogICAgICB9DQogICAgfQ0KICAgIGRlZiBwYXJhbXMgPSBbIkNPTk8iOiBDT05PLCAiUFVOTyI6IFBVTk9dOw0KICAgIG1pQ2FsbGVyLmNhbGwoIlBQUzAwMU1JIiwgIkdldEhlYWRCYXNpYyIsIHBhcmFtcywgY2FsbGJhY2spOw0KICB9DQoNCg0KIC8qKg0KICAqIEdldCBwdXJjaGFzZSBvcmRlciBhZGRpdGlvbmFsIGRldGFpbHMgZnJvbSB0YWJsZSBNUEhFQUQNCiAgKiANCiAgKi8NCg0KICBwdWJsaWMgZ2V0SGVhZChTdHJpbmcgZWFjaFB1bm8pIHsNCg0KICAgIGludCBjdXJyZW50Q29tcGFueSA9IChJbnRlZ2VyKSBwcm9ncmFtLmdldExEQVpEKCkuQ09OTzsNCiAgICBEQkFjdGlvbiBxdWVyeSA9IGRhdGFiYXNlLnRhYmxlKCJNUEhFQUQiKS5pbmRleCgiMDAiKS5zZWxlY3Rpb24oIklBQ09OTyIsICJJQVBVTk8iLCAiSUFDT0FNIiwgIklBUE9UQyIsICJJQVRPUVQiKS5idWlsZCgpOw0KICAgIERCQ29udGFpbmVyIGNvbnRhaW5lciA9IHF1ZXJ5LmdldENvbnRhaW5lcigpOw0KICAgIGNvbnRhaW5lci5zZXQoIklBQ09OTyIsIGN1cnJlbnRDb21wYW55KTsNCiAgICBjb250YWluZXIuc2V0KCJJQVBVTk8iLCBlYWNoUHVubyk7DQoNCiAgICBpZiAocXVlcnkucmVhZChjb250YWluZXIpKSB7DQogICAgICBjaGVja0NvYW0gPSBjb250YWluZXIuZ2V0KCJJQUNPQU0iKTsNCiAgICAgIGNoZWNrUG90YyA9IGNvbnRhaW5lci5nZXQoIklBUE9UQyIpOw0KICAgICAgY2hlY2tUb3F0ID0gY29udGFpbmVyLmdldCgiSUFUT1FUIik7DQogICAgfQ0KICB9DQoNCiAvKioNCiAgKiBWYWxpZGF0ZSBwdXJjaGFzZSBvcmRlciBudW1iZXINCiAgKiANCiAgKi8NCiAgIA0KICBwdWJsaWMgYm9vbGVhbiB2YWxpZGF0ZVB1bm8oKSB7DQogICAgY2hlY2tDb2FtID0gY2hlY2tDb2FtLmVxdWFscygiIikgPyAiMCIgOiBjaGVja0NvYW07DQogICAgY2hlY2tUb3F0ID0gY2hlY2tUb3F0LmVxdWFscygiIikgPyAiMCIgOiBjaGVja1RvcXQ7DQoNCiAgICBCaWdEZWNpbWFsIHRvdGFsQW1vdW50ID0gbmV3IEJpZ0RlY2ltYWwoY2hlY2tDb2FtKTsNCiAgICBCaWdEZWNpbWFsIHRvdGFsUXVhbnRpdHkgPSBuZXcgQmlnRGVjaW1hbChjaGVja1RvcXQpOw0KDQogICAgYm9vbGVhbiBoYXNBbW91bnQgPSB0b3RhbEFtb3VudC5jb21wYXJlVG8oQmlnRGVjaW1hbC5aRVJPKSAhPSAwOw0KICAgIGJvb2xlYW4gaGFzUXVhbnRpdHkgPSB0b3RhbFF1YW50aXR5LmNvbXBhcmVUbyhCaWdEZWNpbWFsLlpFUk8pICE9IDA7DQoNCiAgICBib29sZWFuIGhhc0Ftb3VudE9yUXVhbnRpdHkgPSBoYXNBbW91bnQgfHwgaGFzUXVhbnRpdHk7DQoNCiAgICBpZiAoY2hlY2tQb3RjLmVxdWFscygiMzAiKSB8fCBjaGVja1BvdGMuZXF1YWxzKCI0MCIpKSB7DQogICAgICByZXR1cm4gY2hlY2tQdXNsLnRvSW50ZWdlcigpIDw9IDMwICYmIGNoZWNrUHVzdC50b0ludGVnZXIoKSA+PSAxNTsNCiAgICB9IGVsc2Ugew0KICAgICAgcmV0dXJuIChjaGVja1B1c2wudG9JbnRlZ2VyKCkgPD0gaW5wdXRQdXN0LnRvSW50ZWdlcigpICYmIGNoZWNrUHVzdC50b0ludGVnZXIoKSA+PSBpbnB1dFB1c2wudG9JbnRlZ2VyKCkpICYmIChjaGVja1B1c2wudG9JbnRlZ2VyKCkgPCA4NSkgJiYgaGFzQW1vdW50T3JRdWFudGl0eTsNCiAgICB9DQogIH0NCg0KIC8qKg0KICAqIHJldHJpdmUgUHVyY2hhc2Ugb3JkZXIgc3VwcGxpZXIgbnVtYmVyIGZyb20gTVBIRUFEDQogICogDQogICovDQogICANCiAgcHVibGljIGdldFB1cmNoYXNlT3JkZXJGb3JTdXBwbGllcigpIHsNCiAgICBEQkFjdGlvbiBxdWVyeU1waGVhZCA9IGRhdGFiYXNlLnRhYmxlKCJNUEhFQUQiKS5pbmRleCgiNDAiKS5zZWxlY3Rpb24oIklBUFVOTyIsICJJQUNPTk8iLCAiSUFTVU5PIiwgIklBUFVTTCIsICJJQVBVU1QiLCAiSUFQT1RDIiwgIklBVE9RVCIsICJJQUNPQU0iKS5idWlsZCgpOw0KICAgIGlmICghUFVOTy50cmltKCkuaXNFbXB0eSgpICYmICFTVU5PLnRyaW0oKS5pc0VtcHR5KCkpIHsNCiAgICAgIEV4cHJlc3Npb25GYWN0b3J5IGV4cHJlc3Npb24gPSBkYXRhYmFzZS5nZXRFeHByZXNzaW9uRmFjdG9yeSgiTVBIRUFEIik7DQogICAgICBpZiAoIVBVTk8uY29udGFpbnMoJzsnKSkgew0KICAgICAgICBleHByZXNzaW9uID0gZXhwcmVzc2lvbi5ndCgiSUFQVU5PIiwgUFVOTy50cmltKCkpOw0KICAgICAgICBxdWVyeU1waGVhZCA9IGRhdGFiYXNlLnRhYmxlKCJNUEhFQUQiKS5pbmRleCgiNDAiKS5tYXRjaGluZyhleHByZXNzaW9uKS5zZWxlY3Rpb24oIklBUFVOTyIsICJJQUNPTk8iLCAiSUFTVU5PIiwgIklBUFVTTCIsICJJQVBVU1QiLCAiSUFQT1RDIiwgIklBVE9RVCIsICJJQUNPQU0iKS5idWlsZCgpOw0KICAgICAgfQ0KDQogICAgfQ0KDQogICAgREJDb250YWluZXIgcmVjb3JkTXBoZWFkID0gcXVlcnlNcGhlYWQuZ2V0Q29udGFpbmVyKCk7DQogICAgcmVjb3JkTXBoZWFkLnNldCgiSUFDT05PIiwgSW50ZWdlci5wYXJzZUludChDT05PLnRyaW0oKSkpOw0KICAgIHJlY29yZE1waGVhZC5zZXQoIklBU1VOTyIsIFNVTk8udHJpbSgpKTsNCiAgICANCiAgICBpbnQgcmVhZHMgPSBxdWVyeU1waGVhZC5yZWFkQWxsKHJlY29yZE1waGVhZCwgMiwgZ2V0TXBoZWFkUmVjb3Jkcyk7DQoNCiAgfQ0KDQogIENsb3N1cmUgPCA/ID4gZ2V0TXBoZWFkUmVjb3JkcyA9IHsNCiAgICBEQkNvbnRhaW5lciByZWNvcmQgLT4NCiAgICBTdHJpbmcgUFVOTyA9IHJlY29yZC5nZXQoIklBUFVOTyIpID09IG51bGwgPyAiIiA6IHJlY29yZC5nZXQoIklBUFVOTyIpOw0KICAgIGNoZWNrUHVzbCA9IHJlY29yZC5nZXQoJ0lBUFVTTCcpID09IG51bGwgPyAiMDAiIDogcmVjb3JkLmdldCgnSUFQVVNMJyk7DQogICAgY2hlY2tQdXN0ID0gcmVjb3JkLmdldCgnSUFQVVNUJykgPT0gbnVsbCA/ICIwMCIgOiByZWNvcmQuZ2V0KCdJQVBVU1QnKTsNCiAgICBjaGVja1BvdGMgPSByZWNvcmQuZ2V0KCJJQVBPVEMiKSA9PSBudWxsID8gIiIgOiByZWNvcmQuZ2V0KCdJQVBPVEMnKTsNCiAgICBjaGVja1RvcXQgPSByZWNvcmQuZ2V0KCJJQVRPUVQiKSA9PSBudWxsID8gIiIgOiByZWNvcmQuZ2V0KCdJQVRPUVQnKTsNCiAgICBjaGVja0NvYW0gPSByZWNvcmQuZ2V0KCdJQUNPQU0nKSA9PSBudWxsID8gIjAiIDogcmVjb3JkLmdldCgnSUFDT0FNJyk7DQogICAgYm9vbGVhbiBpc1ZhbGlkUHVubyA9IHZhbGlkYXRlUHVubygpOw0KICAgIGlmIChpc1ZhbGlkUHVubykgew0KICAgICAgdmFsaWRQdXJjaGFzZU9yZGVyTGlzdC5hZGQoUFVOTy50cmltKCkpOw0KICAgIH0gZWxzZSB7DQogICAgICB2YWxpZFB1cmNoYXNlT3JkZXJMaXN0LmFkZChQVU5PLnRyaW0oKSk7DQogICAgfQ0KDQogIH0NCg0KDQogLyoqDQogICogUmV0cml2ZSBwdXJjaGFzZSBvcmRlciBkZXRhaWxzIGZyb20gTVBIRUFEDQogICogDQogICovDQogICANCiAgcHVibGljIGJvb2xlYW4gZ2V0T3JkZXJEZXRhaWxzKFN0cmluZyBlYWNoUHVubykgew0KDQogICAgYm9vbGVhbiByZWNvcmRGb3VuZCA9IGZhbHNlOw0KICAgIGludCBjdXJyZW50Q29tcGFueSA9IChJbnRlZ2VyKSBwcm9ncmFtLmdldExEQVpEKCkuQ09OTzsNCiAgICBEQkFjdGlvbiBxdWVyeSA9IGRhdGFiYXNlLnRhYmxlKCJNUEhFQUQiKS5pbmRleCgiMDAiKS5zZWxlY3Rpb24oIklBQ09OTyIsICJJQVBVTk8iLCAiSUFQVURUIiwgIklBRFdEVCIsICJJQVNVTk8iLCAiSUFCVVlFIiwgIklBQ1VDRCIsICJJQVlSRTEiLCAiSUFURk5PIiwgIklBQ09BTSIsICJJQURJVkkiLCAiSUFGQUNJIiwgIklBV0hMTyIsICJJQU9SVFkiLCAiSUFURVBZIiwgIklBTU9ETCIsICJJQVRFUEEiLCAiSUFURURMIiwgIklBVEVMMSIsICJJQVRPUVQiKS5idWlsZCgpOw0KICAgIERCQ29udGFpbmVyIGNvbnRhaW5lciA9IHF1ZXJ5LmdldENvbnRhaW5lcigpOw0KICAgIGNvbnRhaW5lci5zZXQoIklBQ09OTyIsIGN1cnJlbnRDb21wYW55KTsNCiAgICBjb250YWluZXIuc2V0KCJJQVBVTk8iLCBlYWNoUHVubyk7DQoNCiAgICBpZiAocXVlcnkucmVhZChjb250YWluZXIpKSB7DQogICAgICByZWNvcmRGb3VuZCA9IHRydWU7DQogICAgICBvUHVubyA9IGNvbnRhaW5lci5nZXQoJ0lBUFVOTycpOw0KICAgICAgb1B1ZHQgPSBjb250YWluZXIuZ2V0KCdJQVBVRFQnKTsNCiAgICAgIG9Ed2R0ID0gY29udGFpbmVyLmdldCgnSUFEV0RUJyk7DQogICAgICBvU3VubyA9IGNvbnRhaW5lci5nZXQoJ0lBU1VOTycpOw0KICAgICAgb0J1eWUgPSBjb250YWluZXIuZ2V0KCdJQUJVWUUnKTsNCiAgICAgIG9DdWNkID0gY29udGFpbmVyLmdldCgnSUFDVUNEJyk7DQogICAgICBvWXJlMSA9IGNvbnRhaW5lci5nZXQoJ0lBWVJFMScpOw0KICAgICAgb1Rmbm8gPSBjb250YWluZXIuZ2V0KCdJQVRGTk8nKTsNCiAgICAgIG9Db2FtID0gY29udGFpbmVyLmdldCgnSUFDT0FNJyk7DQogICAgICBvRGl2aSA9IGNvbnRhaW5lci5nZXQoJ0lBRElWSScpOw0KICAgICAgb0ZhY2kgPSBjb250YWluZXIuZ2V0KCdJQUZBQ0knKTsNCiAgICAgIG9XaGxvID0gY29udGFpbmVyLmdldCgnSUFXSExPJyk7DQogICAgICBvT3J0eSA9IGNvbnRhaW5lci5nZXQoJ0lBT1JUWScpOw0KICAgICAgb1RlcHkgPSBjb250YWluZXIuZ2V0KCdJQVRFUFknKTsNCiAgICAgIG9Nb2RsID0gY29udGFpbmVyLmdldCgnSUFNT0RMJyk7DQogICAgICBvVGVwYSA9IGNvbnRhaW5lci5nZXQoJ0lBVEVQQScpOw0KICAgICAgb1RlZGwgPSBjb250YWluZXIuZ2V0KCdJQVRFREwnKTsNCiAgICAgIG9UZWwxID0gY29udGFpbmVyLmdldCgnSUFURUwxJyk7DQogICAgICBvVG9xdCA9IGNvbnRhaW5lci5nZXQoJ0lBVE9RVCcpOw0KDQogICAgICANCiAgICAgIG9EYXRlID0gTG9jYWxEYXRlLm5vdygpLmZvcm1hdChEYXRlVGltZUZvcm1hdHRlci5vZlBhdHRlcm4oInl5eXlNTWRkIikpOw0KDQogICAgICANCiAgICAgIERCQWN0aW9uIHF1ZXJ5Q3N5dXNyID0gZGF0YWJhc2UudGFibGUoIkNTWVVTUiIpLmluZGV4KCIwMCIpLnNlbGVjdGlvbigiQ1JDT05PIiwgIkNSRElWSSIsICJDUlJFU1AiLCAiQ1JSRU5NIikuYnVpbGQoKTsNCiAgICAgIERCQ29udGFpbmVyIGNvbnRhaW5lckNzeXVzciA9IHF1ZXJ5Q3N5dXNyLmdldENvbnRhaW5lcigpOw0KICAgICAgY29udGFpbmVyQ3N5dXNyLnNldCgiQ1JDT05PIiwgY3VycmVudENvbXBhbnkpOw0KICAgICAgY29udGFpbmVyQ3N5dXNyLnNldCgiQ1JESVZJIiwgb0RpdmkpOw0KICAgICAgY29udGFpbmVyQ3N5dXNyLnNldCgiQ1JSRVNQIiwgb0J1eWUpOw0KDQogICAgICBpZiAocXVlcnlDc3l1c3IucmVhZChjb250YWluZXJDc3l1c3IpKSB7DQogICAgICAgIG9SZW5tID0gY29udGFpbmVyQ3N5dXNyLmdldCgiQ1JSRU5NIik7DQogICAgICB9DQoNCiAgICAgIA0KICAgICAgREJBY3Rpb24gcXVlcnlDaWRtYXMgPSBkYXRhYmFzZS50YWJsZSgiQ0lETUFTIikuaW5kZXgoIjAwIikuc2VsZWN0aW9uKCJJRENPTk8iLCAiSURTVU5PIiwgIklEQ1NDRCIsICJJRFBITk8iKS5idWlsZCgpOw0KICAgICAgREJDb250YWluZXIgY29udGFpbmVyQ2lkbWFzID0gcXVlcnlDaWRtYXMuZ2V0Q29udGFpbmVyKCk7DQogICAgICBjb250YWluZXJDaWRtYXMuc2V0KCJJRENPTk8iLCBjdXJyZW50Q29tcGFueSk7DQogICAgICBjb250YWluZXJDaWRtYXMuc2V0KCJJRFNVTk8iLCBvU3Vubyk7DQoNCiAgICAgIGlmIChxdWVyeUNpZG1hcy5yZWFkKGNvbnRhaW5lckNpZG1hcykpIHsNCiAgICAgICAgb0NzY2QgPSBjb250YWluZXJDaWRtYXMuZ2V0KCJJRENTQ0QiKTsNCiAgICAgICAgb1Bobm8gPSBjb250YWluZXJDaWRtYXMuZ2V0KCJJRFBITk8iKTsNCiAgICAgIH0NCg0KICAgICAgIA0KICAgICAgREJBY3Rpb24gcXVlcnlDaWR2ZW4gPSBkYXRhYmFzZS50YWJsZSgiQ0lEVkVOIikuaW5kZXgoIjAwIikuc2VsZWN0aW9uKCJJSUNPTk8iLCAiSUlTVU5PIiwgIklJSUFQQyIpLmJ1aWxkKCk7DQogICAgICBEQkNvbnRhaW5lciBjb250YWluZXJDaWR2ZW4gPSBxdWVyeUNpZHZlbi5nZXRDb250YWluZXIoKTsNCiAgICAgIGNvbnRhaW5lckNpZHZlbi5zZXQoIklJQ09OTyIsIGN1cnJlbnRDb21wYW55KTsNCiAgICAgIGNvbnRhaW5lckNpZHZlbi5zZXQoIklJU1VOTyIsIG9TdW5vKTsNCg0KICAgICAgaWYgKHF1ZXJ5Q2lkdmVuLnJlYWQoY29udGFpbmVyQ2lkdmVuKSkgew0KICAgICAgICBvSWFwYyA9IGNvbnRhaW5lckNpZHZlbi5nZXQoIklJSUFQQyIpOw0KICAgICAgfSANCg0KICAgICAgDQogICAgICBEQkFjdGlvbiBxdWVyeU1wb3JkdCA9IGRhdGFiYXNlLnRhYmxlKCJNUE9SRFQiKS5pbmRleCgiMDAiKS5zZWxlY3Rpb24oIk9UQ09OTyIsICJPVE9SVFkiLCAiT1RQMjUwIiwgIk9UUE9UQyIpLmJ1aWxkKCk7DQogICAgICBEQkNvbnRhaW5lciBjb250YWluZXJNcG9yZHQgPSBxdWVyeU1wb3JkdC5nZXRDb250YWluZXIoKTsNCiAgICAgIGNvbnRhaW5lck1wb3JkdC5zZXQoIk9UQ09OTyIsIGN1cnJlbnRDb21wYW55KTsNCiAgICAgIGNvbnRhaW5lck1wb3JkdC5zZXQoIk9UT1JUWSIsIG9PcnR5KTsNCg0KICAgICAgU3RyaW5nIHRQMjUwID0gIiI7DQogICAgICBTdHJpbmcgdFBvdGMgPSAiIjsNCiAgICAgIFN0cmluZyB0QWdudCA9IGNvbnRhaW5lci5nZXQoIklBQUdOVCIpOw0KDQogICAgICBpZiAocXVlcnlNcG9yZHQucmVhZChjb250YWluZXJNcG9yZHQpKSB7DQogICAgICAgIHRQMjUwID0gY29udGFpbmVyTXBvcmR0LmdldCgiT1RQMjUwIik7DQogICAgICAgIHRQb3RjID0gY29udGFpbmVyTXBvcmR0LmdldCgiT1RQT1RDIik7DQogICAgICB9DQoNCiAgICAgIA0KICAgICAgU3RyaW5nIHRTdW5vID0gY29udGFpbmVyLmdldCgiSUFTVU5PIik7DQogICAgICBTdHJpbmcgdFJmdHkgPSAiIjsNCiAgICAgIFN0cmluZyB0UmZpZCA9IGNvbnRhaW5lci5nZXQoIklBUkZJRCIpOw0KDQogICAgICBpZiAodFAyNTAuZXF1YWxzKCIxIikgJiYgIXRBZ250LmVxdWFscygiIikpIHsNCiAgICAgICAgdFN1bm8gPSAiIiArIHRBZ250Ow0KICAgICAgfQ0KDQogICAgICBpZiAodFBvdGMuZXF1YWxzKCI2MCIpIHx8IHRQb3RjLmVxdWFscygiNjUiKSB8fCB0UG90Yy5lcXVhbHMoIjcwIikpIHsNCiAgICAgICAgdFJmdHkgPSAiMTUiOw0KICAgICAgfSBlbHNlIHsNCiAgICAgICAgaWYgKHRQb3RjLmVxdWFscygiODAiKSB8fCB0UG90Yy5lcXVhbHMoIjg1IikpIHsNCiAgICAgICAgICB0UmZ0eSA9ICIzNSI7DQogICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgdFJmdHkgPSAiMTAiOw0KICAgICAgICB9DQogICAgICB9DQoNCiAgICAgIERCQWN0aW9uIHF1ZXJ5Q2lkcmVmID0gZGF0YWJhc2UudGFibGUoIkNJRFJFRiIpLmluZGV4KCIwMCIpLnNlbGVjdGlvbigiSVJDT05PIiwgIklSU1VOTyIsICJJUlJGVFkiLCAiSVJSRklEIiwgIklSUEhOTyIpLmJ1aWxkKCk7DQogICAgICBEQkNvbnRhaW5lciBjb250YWluZXJDaWRyZWYgPSBxdWVyeUNpZHJlZi5nZXRDb250YWluZXIoKTsNCiAgICAgIGNvbnRhaW5lckNpZHJlZi5zZXQoIklSQ09OTyIsIGN1cnJlbnRDb21wYW55KTsNCiAgICAgIGNvbnRhaW5lckNpZHJlZi5zZXQoIklSU1VOTyIsIHRTdW5vKTsNCiAgICAgIGNvbnRhaW5lckNpZHJlZi5zZXQoIklSUkZUWSIsIHRSZnR5KTsNCiAgICAgIGNvbnRhaW5lckNpZHJlZi5zZXQoIklSUkZJRCIsIHRSZmlkKTsNCg0KICAgICAgaWYgKHF1ZXJ5Q2lkcmVmLnJlYWQoY29udGFpbmVyQ2lkcmVmKSkgew0KICAgICAgICBvUGhubyA9IGNvbnRhaW5lckNpZHJlZi5nZXQoIklSUEhOTyIpOw0KICAgICAgfQ0KDQogICAgICANCiAgICAgIERCQWN0aW9uIHF1ZXJ5Q3JldnRiID0gZGF0YWJhc2UudGFibGUoIkNSRVZUQiIpLmluZGV4KCIwMCIpLnNlbGVjdGlvbigiUlRDT05PIiwgIlJUUkVWVCIsICJSVFJJRE4iLCAiUlRSRU1LIikuYnVpbGQoKTsNCiAgICAgIERCQ29udGFpbmVyIGNvbnRhaW5lckNyZXZ0YiA9IHF1ZXJ5Q3JldnRiLmdldENvbnRhaW5lcigpOw0KICAgICAgY29udGFpbmVyQ3JldnRiLnNldCgiUlRDT05PIiwgY3VycmVudENvbXBhbnkpOw0KICAgICAgY29udGFpbmVyQ3JldnRiLnNldCgiUlRSRVZUIiwgMSk7DQogICAgICBjb250YWluZXJDcmV2dGIuc2V0KCJSVFJJRE4iLCBlYWNoUHVubyk7DQogICAgICBxdWVyeUNyZXZ0Yi5yZWFkQWxsKGNvbnRhaW5lckNyZXZ0YiwgMywgY2xvc3VyZUNyZXZ0Yik7DQoNCiAgICB9DQoNCiAgICByZXR1cm4gcmVjb3JkRm91bmQ7DQogIH0NCg0KICBDbG9zdXJlIDwgPyA+IGNsb3N1cmVDcmV2dGIgPSB7DQogICAgREJDb250YWluZXIgY29udGFpbmVyUmVjb3JkIC0+DQogICAgb1JlbWsgPSBjb250YWluZXJSZWNvcmQuZ2V0KCJSVFJFTUsiKTsNCiAgfQ0KDQogDQogLyoqDQogICogcmV0cml2ZSBjdXJyZW5jeSBzZXR0aW5nIGZvciBhIGRpdmlzaW9uDQogICogDQogICovDQogICANCiAgcHVibGljIGdldEN1cnJlbmN5Q29udmVyc2lvbihTdHJpbmcgb0RpdmkpIHsNCiAgICBib29sZWFuIHJlY29yZEV4aXN0cyA9IHRydWU7DQogICAgZGVmIGNhbGxiYWNrID0gew0KICAgICAgTWFwIDwgU3RyaW5nLA0KICAgICAgU3RyaW5nID4gcmVzdWx0cyAtPg0KICAgICAgcmVjb3JkRXhpc3RzID0gIXJlc3VsdHMuZ2V0KCdlcnJvcicpOw0KICAgICAgaWYgKHJlY29yZEV4aXN0cykgew0KICAgICAgICBvRG1jdSA9IHJlc3VsdHMuZ2V0KCdETUNVJyk7DQoNCiAgICAgIH0NCiAgICB9DQogICAgZGVmIHBhcmFtcyA9IFsiQ09OTyI6IENPTk8sICJESVZJIjogb0RpdmldOw0KICAgIG1pQ2FsbGVyLmNhbGwoIk1OUzEwME1JIiwgIkdldEJhc2ljRGF0YSIsIHBhcmFtcywgY2FsbGJhY2spOw0KICB9DQoNCiAgLyoqIHJldHJpdmUgc3VwcGxpZXIgZGV0YWlscyB1c2luZyBDUlM2MjBNSS5HZXRCYXNpY0RhdGENCiAgICovDQogICANCiAgcHVibGljIGdldFN1cHBsaWVyTmFtZShTdHJpbmcgb1N1bm8pIHsNCiAgICBib29sZWFuIHJlY29yZEV4aXN0cyA9IHRydWU7DQogICAgZGVmIGNhbGxiYWNrID0gew0KICAgICAgTWFwIDwgU3RyaW5nLA0KICAgICAgU3RyaW5nID4gcmVzdWx0cyAtPg0KICAgICAgcmVjb3JkRXhpc3RzID0gIXJlc3VsdHMuZ2V0KCdlcnJvcicpOw0KICAgICAgaWYgKHJlY29yZEV4aXN0cykgew0KICAgICAgICBvU3VubSA9IHJlc3VsdHMuZ2V0KCdTVU5NJyk7DQoNCiAgICAgIH0NCiAgICB9DQogICAgZGVmIHBhcmFtcyA9IFsiQ09OTyI6IENPTk8sICJTVU5PIjogb1N1bm9dOw0KICAgIG1pQ2FsbGVyLmNhbGwoIkNSUzYyME1JIiwgIkdldEJhc2ljRGF0YSIsIHBhcmFtcywgY2FsbGJhY2spOw0KICB9DQoNCg0KIC8qKg0KICAqIFNlbmQgcHVyY2hhc2Ugb3JkZXIgZGF0YSB0byBvdXRwdXQgQVBJIGZpZWxkcw0KICAqIA0KICAqLw0KICAgDQogIHB1YmxpYyB3cml0ZVB1cmNoYXNlT3JkZXIoKSB7DQoNCiAgICBpZiAob1B1c2wgPCAnODUnKSB7IA0KICAgICAgbWkub3V0RGF0YS5wdXQoJ1JDVFAnLCAnT0gnKTsNCiAgICAgIG1pLm91dERhdGEucHV0KCdQVU5PJywgb1B1bm8pOw0KICAgICAgbWkub3V0RGF0YS5wdXQoJ0RBVEUnLCBvRGF0ZSk7DQogICAgICBtaS5vdXREYXRhLnB1dCgnUFVEVCcsIG9QdWR0KTsNCiAgICAgIG1pLm91dERhdGEucHV0KCdEV0RUJywgb0R3ZHQpOw0KICAgICAgbWkub3V0RGF0YS5wdXQoJ1JFTk0nLCBvUmVubSk7DQogICAgICBtaS5vdXREYXRhLnB1dCgnU1VOTycsIG9TdW5vKTsNCiAgICAgIG1pLm91dERhdGEucHV0KCdDU0NEJywgb0NzY2QpOw0KICAgICAgbWkub3V0RGF0YS5wdXQoJ0JVWUUnLCBvQnV5ZSk7DQogICAgICBtaS5vdXREYXRhLnB1dCgnQ1VDRCcsIG9DdWNkKTsNCiAgICAgIG1pLm91dERhdGEucHV0KCdZUkUxJywgb1lyZTEpOw0KICAgICAgbWkub3V0RGF0YS5wdXQoJ1BITk8nLCBvUGhubyk7DQogICAgICBtaS5vdXREYXRhLnB1dCgnVEZOTycsIG9UZm5vKTsNCiAgICAgIG1pLm91dERhdGEucHV0KCdSRU1LJywgb1JlbWspOw0KICAgICAgbWkub3V0RGF0YS5wdXQoJ0NPQU0nLCBvQ29hbSk7DQogICAgICBtaS5vdXREYXRhLnB1dCgnRElWSScsIG9EaXZpKTsNCiAgICAgIG1pLm91dERhdGEucHV0KCdGQUNJJywgb0ZhY2kpOw0KICAgICAgbWkub3V0RGF0YS5wdXQoJ1dITE8nLCBvV2hsbyk7DQogICAgICBtaS5vdXREYXRhLnB1dCgnT1JUWScsIG9PcnR5KTsNCiAgICAgIG1pLm91dERhdGEucHV0KCdURVBZJywgb1RlcHkpOw0KICAgICAgbWkub3V0RGF0YS5wdXQoJ01PREwnLCBvTW9kbCk7DQogICAgICBtaS5vdXREYXRhLnB1dCgnVEVQQScsIG9UZXBhKTsNCiAgICAgIG1pLm91dERhdGEucHV0KCdURURMJywgb1RlZGwpOw0KICAgICAgbWkub3V0RGF0YS5wdXQoJ1RFTDEnLCBvVGVsMSk7DQogICAgICBtaS5vdXREYXRhLnB1dCgnVE9RVCcsIG9Ub3F0KTsNCiAgICAgIG1pLm91dERhdGEucHV0KCdTVU5NJywgb1N1bm0pOw0KICAgICAgbWkub3V0RGF0YS5wdXQoJ1BVU0wnLCBvUHVzbCk7DQogICAgICBtaS5vdXREYXRhLnB1dCgnUFVTVCcsIG9QdXN0KTsNCiAgICAgIG1pLndyaXRlKCk7DQogICAgfQ0KICB9DQoNCg0KIC8qKg0KICAqIEdldCBjaGFyZ2VzIGZvciBlYWNoIHB1cmNoYXNlIG9yZGVyIGZyb20gdGFibGUgTVBPRVhQDQogICogDQogICovDQogICANCiAgIA0KICBwcml2YXRlIGdldENoYXJnZXMoU3RyaW5nIGVhY2hQdW5vKSB7DQogICAgY2hhcmdlTGlzdCA9IG5ldyBBcnJheUxpc3QgPCBIYXNodGFibGUgPiAoKTsNCiAgICBEQkFjdGlvbiBxdWVyeU1wb2V4cCA9IGRhdGFiYXNlLnRhYmxlKCJNUE9FWFAiKS5pbmRleCgiMDAiKS5zZWxlY3Rpb24oIklWQ09OTyIsICJJVlBVTk8iLCAiSVZQTkxJIiwgIklWUE5MUyIsICJJVkNEU0UiLCAiSVZSRVBOIiwgIklWRVhUWSIsICJJVkNFSUQiLCAiSVZFWElDIiwgIklWV1NPUCIsICJJVkNVQ0QiLCAiSVZDRVZBIiwgIklWQ0VWSiIsICJJVlRIUFIiLCAiSVZJVkNRIiwgIklWQUNJTiIpLmJ1aWxkKCk7DQogICAgREJDb250YWluZXIgcmVjb3JkTXBvZXhwID0gcXVlcnlNcG9leHAuZ2V0Q29udGFpbmVyKCk7DQogICAgcmVjb3JkTXBvZXhwLnNldCgiSVZDT05PIiwgSW50ZWdlci5wYXJzZUludChDT05PLnRyaW0oKSkpOw0KICAgIHJlY29yZE1wb2V4cC5zZXQoIklWUFVOTyIsIGVhY2hQdW5vLnRyaW0oKSk7DQogICAgcmVjb3JkTXBvZXhwLnNldCgiSVZQTkxJIiwgMCk7DQogICAgcmVjb3JkTXBvZXhwLnNldCgiSVZQTkxTIiwgMCk7DQogICAgDQogICAgaW50IHJlYWRzID0gcXVlcnlNcG9leHAucmVhZEFsbChyZWNvcmRNcG9leHAsIDQsIGdldE1wb2V4cFJlY29yZHMpOw0KDQogIH0NCg0KICBDbG9zdXJlIDwgPyA+IGdldE1wb2V4cFJlY29yZHMgPSB7DQogICAgREJDb250YWluZXIgcmVjb3JkIC0+DQogICAgU3RyaW5nIFBOTEkgPSByZWNvcmQuZ2V0KCdJVlBOTEknKTsNCiAgICBTdHJpbmcgUE5MUyA9IHJlY29yZC5nZXQoJ0lWUE5MUycpOw0KICAgIFN0cmluZyBDRFNFID0gcmVjb3JkLmdldCgnSVZDRFNFJyk7DQogICAgU3RyaW5nIFJFUE4gPSByZWNvcmQuZ2V0KCdJVlJFUE4nKTsNCiAgICBTdHJpbmcgRVhUWSA9IHJlY29yZC5nZXQoJ0lWRVhUWScpOw0KICAgIFN0cmluZyBDRUlEID0gcmVjb3JkLmdldCgnSVZDRUlEJyk7DQogICAgU3RyaW5nIEVYSUMgPSByZWNvcmQuZ2V0KCdJVkVYSUMnKTsNCiAgICBTdHJpbmcgV1NPUCA9IHJlY29yZC5nZXQoJ0lWV1NPUCcpOw0KICAgIFN0cmluZyBDVUNEID0gcmVjb3JkLmdldCgnSVZDVUNEJyk7DQogICAgU3RyaW5nIENFVkEgPSByZWNvcmQuZ2V0KCdJVkNFVkEnKTsNCiAgICBTdHJpbmcgQ0VWSiA9IHJlY29yZC5nZXQoJ0lWQ0VWSicpOw0KICAgIFN0cmluZyBUSFBSID0gcmVjb3JkLmdldCgnSVZUSFBSJyk7DQogICAgU3RyaW5nIElWQ1EgPSByZWNvcmQuZ2V0KCdJVklWQ1EnKTsNCiAgICANCiAgICBTdHJpbmcgQUNJTiA9IHJlY29yZC5nZXQoJ0lWQUNJTicpOw0KICAgIEhhc2h0YWJsZSB0ZW1wVGFibGUgPSBuZXcgSGFzaHRhYmxlIDwgU3RyaW5nLA0KICAgIFN0cmluZyA+ICgpOw0KICAgIHRlbXBUYWJsZS5wdXQoJ1BOTEknLCBQTkxJKTsNCiAgICB0ZW1wVGFibGUucHV0KCdQTkxTJywgUE5MUyk7DQogICAgdGVtcFRhYmxlLnB1dCgnQ0RTRScsIENEU0UpOw0KICAgIHRlbXBUYWJsZS5wdXQoJ1JFUE4nLCBSRVBOKTsNCiAgICB0ZW1wVGFibGUucHV0KCdFWFRZJywgRVhUWSk7DQogICAgdGVtcFRhYmxlLnB1dCgnQ0VJRCcsIENFSUQpOw0KICAgIHRlbXBUYWJsZS5wdXQoJ0VYSUMnLCBFWElDKTsNCiAgICB0ZW1wVGFibGUucHV0KCdXU09QJywgV1NPUCk7DQogICAgdGVtcFRhYmxlLnB1dCgnQ1VDRCcsIENVQ0QpOw0KICAgIHRlbXBUYWJsZS5wdXQoJ0NFVkEnLCBDRVZBKTsNCiAgICB0ZW1wVGFibGUucHV0KCdDRVZKJywgQ0VWSik7DQogICAgdGVtcFRhYmxlLnB1dCgnVEhQUicsIFRIUFIpOw0KICAgIHRlbXBUYWJsZS5wdXQoJ0lWQ1EnLCBJVkNRKTsNCiAgICB0ZW1wVGFibGUucHV0KCdBQ0lOJywgQUNJTik7DQogICAgY2hhcmdlTGlzdC5hZGQodGVtcFRhYmxlKTsNCg0KICB9DQoNCiAvKioNCiAgKiBzZW5kIGNoYXJnZSBkZXRhaWxzIHRvIG91dHB1dCBhcGkgZmllbGRzDQogICogDQogICovDQogICANCiAgcHVibGljIHdyaXRlQ2hhcmdlcyhTdHJpbmcgZWFjaFB1bm8sIEhhc2h0YWJsZSBlYWNoQ2hhcmdlKSB7DQogICAgU3RyaW5nIENFSUQgPSBlYWNoQ2hhcmdlLmdldCgnQ0VJRCcpOw0KICAgIFN0cmluZyBUWDMwID0gIiI7DQogICAgYm9vbGVhbiByZWNvcmRFeGlzdHMgPSB0cnVlOw0KICAgIGRlZiBjYWxsYmFjayA9IHsNCiAgICAgIE1hcCA8IFN0cmluZywNCiAgICAgIFN0cmluZyA+IHJlc3VsdHMgLT4NCiAgICAgIHJlY29yZEV4aXN0cyA9ICFyZXN1bHRzLmdldCgnZXJyb3InKTsNCiAgICAgIGlmIChyZWNvcmRFeGlzdHMpIHsNCiAgICAgICAgVFgzMCA9IHJlc3VsdHMuZ2V0KCdUWDMwJyk7DQoNCiAgICAgIH0NCiAgICAgIFN0cmluZyBQTkxJID0gZWFjaENoYXJnZS5nZXQoJ1BOTEknKTsNCiAgICAgIFN0cmluZyBQTkxTID0gZWFjaENoYXJnZS5nZXQoJ1BOTFMnKTsNCiAgICAgIFN0cmluZyBDRFNFID0gZWFjaENoYXJnZS5nZXQoJ0NEU0UnKTsNCiAgICAgIFN0cmluZyBSRVBOID0gZWFjaENoYXJnZS5nZXQoJ1JFUE4nKTsNCiAgICAgIFN0cmluZyBFWFRZID0gZWFjaENoYXJnZS5nZXQoJ0VYVFknKTsNCiAgICAgIFN0cmluZyBFWElDID0gZWFjaENoYXJnZS5nZXQoJ0VYSUMnKTsNCiAgICAgIFN0cmluZyBXU09QID0gZWFjaENoYXJnZS5nZXQoJ1dTT1AnKTsNCiAgICAgIFN0cmluZyBDVUNEID0gZWFjaENoYXJnZS5nZXQoJ0NVQ0QnKTsNCiAgICAgIFN0cmluZyBDRVZBID0gZWFjaENoYXJnZS5nZXQoJ0NFVkEnKTsNCiAgICAgIFN0cmluZyBDRVZKID0gZWFjaENoYXJnZS5nZXQoJ0NFVkonKTsNCiAgICAgIFN0cmluZyBUSFBSID0gZWFjaENoYXJnZS5nZXQoJ1RIUFInKTsNCiAgICAgIFN0cmluZyBJVkNRID0gZWFjaENoYXJnZS5nZXQoJ0lWQ1EnKTsNCiAgICAgIFN0cmluZyBBQ0lOID0gZWFjaENoYXJnZS5nZXQoJ0FDSU4nKTsNCg0KICAgICAgbWkub3V0RGF0YS5wdXQoJ1JDVFAnLCAnT0MnKTsNCiAgICAgIG1pLm91dERhdGEucHV0KCdQVU5PJywgZWFjaFB1bm8pOw0KICAgICAgbWkub3V0RGF0YS5wdXQoJ0NEU0UnLCBDRFNFKTsNCiAgICAgIG1pLm91dERhdGEucHV0KCdSRVBOJywgUkVQTik7DQogICAgICBtaS5vdXREYXRhLnB1dCgnRVhUWScsIEVYVFkpOw0KICAgICAgbWkub3V0RGF0YS5wdXQoJ0VYSUMnLCBFWElDKTsNCiAgICAgIG1pLm91dERhdGEucHV0KCdXU09QJywgV1NPUCk7DQogICAgICBtaS5vdXREYXRhLnB1dCgnQ0NVQycsIENVQ0QpOw0KICAgICAgbWkub3V0RGF0YS5wdXQoJ0NFVkEnLCBDRVZBKTsNCiAgICAgIG1pLm91dERhdGEucHV0KCdDRVZKJywgQ0VWSik7DQogICAgICBtaS5vdXREYXRhLnB1dCgnVEhQUicsIFRIUFIpOw0KICAgICAgbWkub3V0RGF0YS5wdXQoJ0lWQ1EnLCBJVkNRKTsNCiAgICAgIG1pLm91dERhdGEucHV0KCdUWDMwJywgVFgzMCk7DQogICAgICBtaS5vdXREYXRhLnB1dCgnQ0VJRCcsIENFSUQpOw0KICAgICAgbWkud3JpdGUoKTsNCiAgICB9DQogICAgZGVmIHBhcmFtcyA9IFsiQ0VJRCI6IENFSUQudHJpbSgpXTsNCiAgICBtaUNhbGxlci5jYWxsKCJQUFMyODBNSSIsICJHZXRFbGVtZW50IiwgcGFyYW1zLCBjYWxsYmFjayk7DQoNCiAgfQ0KDQoNCiAvKioNCiAgKiBSZXRyaXZlIHB1cmNoYXNlIG9yZGVyIGxpbmUgZGV0YWlscyBmcm9tIE1QTElORQ0KICAqIA0KICAqLw0KDQogIHB1YmxpYyBnZXRMaW5lRGV0YWlscyhTdHJpbmcgZWFjaFB1bm8pIHsNCg0KICAgIGxpbmVMaXN0ID0gbmV3IEFycmF5TGlzdCA8IEhhc2h0YWJsZSA+ICgpOw0KICAgIGludCBjdXJyZW50Q29tcGFueSA9IChJbnRlZ2VyKSBwcm9ncmFtLmdldExEQVpEKCkuQ09OTzsNCg0KICAgIERCQWN0aW9uIHF1ZXJ5TXBsaW5lID0gZGF0YWJhc2UudGFibGUoIk1QTElORSIpLmluZGV4KCIwMCIpLnNlbGVjdGlvbigiSUJDT05PIiwgIklCUFVOTyIsICJJQlBOTEkiLCAiSUJQTkxTIiwgIklCSVROTyIsICJJQlNJVEUiLCAiSUJDRlFBIiwgIklCUFVVTiIsICJJQldITE8iLCAiSUJQVVNUIiwgIklCUFVTTCIsICJJQlNVTk8iLCAiSUJQSVREIiwgIklCUElUVCIsICJJQlBVUFIiLCAiSUJDUFBSIiwgIklCQ0ZEMSIsICJJQkNGRDIiLCAiSUJDRkQzIiwgIklCUFBVTiIsICJJQlBVQ0QiLCAiSUJMTkFNIiwgIklCUFRDRCIsICJJQlZUQ0QiLCAiSUJPUlFBIiwgIklCQURRQSIsICJJQlJWUUEiLCAiSUJDQVFBIiwgIklCUkpRQSIsICJJQlNEUUEiLCAiSUJJVlFBIiwgIklCUFVSQyIsICJJQkJVWUUiLCAiSUJHUk1UIiwgIklCUk9SQyIsICJJQlJPUk4iLCAiSUJST1JMIiwgIklCUk9SWCIsICJJQk1PREwiLCAiSUJURURMIiwgIklCVEVMMSIpLmJ1aWxkKCk7DQogICAgREJDb250YWluZXIgY29udGFpbmVyTXBsaW5lID0gcXVlcnlNcGxpbmUuZ2V0Q29udGFpbmVyKCk7DQogICAgY29udGFpbmVyTXBsaW5lLnNldCgiSUJDT05PIiwgY3VycmVudENvbXBhbnkpOw0KICAgIGNvbnRhaW5lck1wbGluZS5zZXQoIklCUFVOTyIsIGVhY2hQdW5vKTsNCg0KICAgIHF1ZXJ5TXBsaW5lLnJlYWRBbGwoY29udGFpbmVyTXBsaW5lLCAyLCBjbG9zdXJlTXBsaW5lKTsNCg0KICB9DQoNCiAgQ2xvc3VyZSA8ID8gPiBjbG9zdXJlTXBsaW5lID0gew0KICAgIERCQ29udGFpbmVyIGNvbnRhaW5lck1wbGluZSAtPg0KDQogICAgSGFzaHRhYmxlIHRlbXBUYWJsZSA9IG5ldyBIYXNodGFibGUgPCBTdHJpbmcsDQogICAgU3RyaW5nID4gKCk7DQogICAgdGVtcFRhYmxlLnB1dCgnUE5MSScsIGNvbnRhaW5lck1wbGluZS5nZXQoJ0lCUE5MSScpLnRvU3RyaW5nKCkpOw0KICAgIHRlbXBUYWJsZS5wdXQoJ1BOTFMnLCBjb250YWluZXJNcGxpbmUuZ2V0KCdJQlBOTFMnKS50b1N0cmluZygpKTsNCiAgICB0ZW1wVGFibGUucHV0KCdJVE5PJywgY29udGFpbmVyTXBsaW5lLmdldCgnSUJJVE5PJykudG9TdHJpbmcoKSk7DQogICAgdGVtcFRhYmxlLnB1dCgnU0lURScsIGNvbnRhaW5lck1wbGluZS5nZXQoJ0lCU0lURScpLnRvU3RyaW5nKCkpOw0KICAgIHRlbXBUYWJsZS5wdXQoJ0NGUUEnLCBjb250YWluZXJNcGxpbmUuZ2V0KCdJQkNGUUEnKS50b1N0cmluZygpKTsNCiAgICB0ZW1wVGFibGUucHV0KCdQVVVOJywgY29udGFpbmVyTXBsaW5lLmdldCgnSUJQVVVOJykudG9TdHJpbmcoKSk7DQogICAgdGVtcFRhYmxlLnB1dCgnV0hMTycsIGNvbnRhaW5lck1wbGluZS5nZXQoJ0lCV0hMTycpLnRvU3RyaW5nKCkpOw0KICAgIHRlbXBUYWJsZS5wdXQoJ1BVU1QnLCBjb250YWluZXJNcGxpbmUuZ2V0KCdJQlBVU1QnKS50b1N0cmluZygpKTsNCiAgICB0ZW1wVGFibGUucHV0KCdQVVNMJywgY29udGFpbmVyTXBsaW5lLmdldCgnSUJQVVNMJykudG9TdHJpbmcoKSk7DQogICAgdGVtcFRhYmxlLnB1dCgnU1VOTycsIGNvbnRhaW5lck1wbGluZS5nZXQoJ0lCU1VOTycpLnRvU3RyaW5nKCkpOw0KICAgIHRlbXBUYWJsZS5wdXQoJ1BJVEQnLCBjb250YWluZXJNcGxpbmUuZ2V0KCdJQlBJVEQnKS50b1N0cmluZygpKTsNCiAgICB0ZW1wVGFibGUucHV0KCdQSVRUJywgY29udGFpbmVyTXBsaW5lLmdldCgnSUJQSVRUJykudG9TdHJpbmcoKSk7DQogICAgdGVtcFRhYmxlLnB1dCgnUFVQUicsIGNvbnRhaW5lck1wbGluZS5nZXQoJ0lCUFVQUicpLnRvU3RyaW5nKCkpOw0KICAgIHRlbXBUYWJsZS5wdXQoJ0NQUFInLCBjb250YWluZXJNcGxpbmUuZ2V0KCdJQkNQUFInKS50b1N0cmluZygpKTsNCiAgICB0ZW1wVGFibGUucHV0KCdDRkQxJywgY29udGFpbmVyTXBsaW5lLmdldCgnSUJDRkQxJykudG9TdHJpbmcoKSk7DQogICAgdGVtcFRhYmxlLnB1dCgnQ0ZEMicsIGNvbnRhaW5lck1wbGluZS5nZXQoJ0lCQ0ZEMicpLnRvU3RyaW5nKCkpOw0KICAgIHRlbXBUYWJsZS5wdXQoJ0NGRDMnLCBjb250YWluZXJNcGxpbmUuZ2V0KCdJQkNGRDMnKS50b1N0cmluZygpKTsNCiAgICB0ZW1wVGFibGUucHV0KCdQUFVOJywgY29udGFpbmVyTXBsaW5lLmdldCgnSUJQUFVOJykudG9TdHJpbmcoKSk7DQogICAgdGVtcFRhYmxlLnB1dCgnUFVDRCcsIGNvbnRhaW5lck1wbGluZS5nZXQoJ0lCUFVDRCcpLnRvU3RyaW5nKCkpOw0KICAgIHRlbXBUYWJsZS5wdXQoJ0xOQU0nLCBjb250YWluZXJNcGxpbmUuZ2V0KCdJQkxOQU0nKS50b1N0cmluZygpKTsNCiAgICB0ZW1wVGFibGUucHV0KCdQVENEJywgY29udGFpbmVyTXBsaW5lLmdldCgnSUJQVENEJykudG9TdHJpbmcoKSk7DQogICAgdGVtcFRhYmxlLnB1dCgnVlRDRCcsIGNvbnRhaW5lck1wbGluZS5nZXQoJ0lCVlRDRCcpLnRvU3RyaW5nKCkpOw0KICAgIHRlbXBUYWJsZS5wdXQoJ09SUUEnLCBjb250YWluZXJNcGxpbmUuZ2V0KCdJQk9SUUEnKS50b1N0cmluZygpKTsNCiAgICB0ZW1wVGFibGUucHV0KCdBRFFBJywgY29udGFpbmVyTXBsaW5lLmdldCgnSUJBRFFBJykudG9TdHJpbmcoKSk7DQogICAgdGVtcFRhYmxlLnB1dCgnUlZRQScsIGNvbnRhaW5lck1wbGluZS5nZXQoJ0lCUlZRQScpLnRvU3RyaW5nKCkpOw0KICAgIHRlbXBUYWJsZS5wdXQoJ0NBUUEnLCBjb250YWluZXJNcGxpbmUuZ2V0KCdJQkNBUUEnKS50b1N0cmluZygpKTsNCiAgICB0ZW1wVGFibGUucHV0KCdSSlFBJywgY29udGFpbmVyTXBsaW5lLmdldCgnSUJSSlFBJykudG9TdHJpbmcoKSk7DQogICAgdGVtcFRhYmxlLnB1dCgnU0RRQScsIGNvbnRhaW5lck1wbGluZS5nZXQoJ0lCU0RRQScpLnRvU3RyaW5nKCkpOw0KICAgIHRlbXBUYWJsZS5wdXQoJ0lWUUEnLCBjb250YWluZXJNcGxpbmUuZ2V0KCdJQklWUUEnKS50b1N0cmluZygpKTsNCiAgICB0ZW1wVGFibGUucHV0KCdQVVJDJywgY29udGFpbmVyTXBsaW5lLmdldCgnSUJQVVJDJykudG9TdHJpbmcoKSk7DQogICAgdGVtcFRhYmxlLnB1dCgnQlVZRScsIGNvbnRhaW5lck1wbGluZS5nZXQoJ0lCQlVZRScpLnRvU3RyaW5nKCkpOw0KICAgIHRlbXBUYWJsZS5wdXQoJ0dSTVQnLCBjb250YWluZXJNcGxpbmUuZ2V0KCdJQkdSTVQnKS50b1N0cmluZygpKTsNCiAgICB0ZW1wVGFibGUucHV0KCdWVENEJywgY29udGFpbmVyTXBsaW5lLmdldCgnSUJWVENEJykudG9TdHJpbmcoKSk7DQogICAgdGVtcFRhYmxlLnB1dCgnUk9SQycsIGNvbnRhaW5lck1wbGluZS5nZXQoJ0lCUk9SQycpLnRvU3RyaW5nKCkpOw0KICAgIHRlbXBUYWJsZS5wdXQoJ1JPUk4nLCBjb250YWluZXJNcGxpbmUuZ2V0KCdJQlJPUk4nKS50b1N0cmluZygpKTsNCiAgICB0ZW1wVGFibGUucHV0KCdST1JMJywgY29udGFpbmVyTXBsaW5lLmdldCgnSUJST1JMJykudG9TdHJpbmcoKSk7DQogICAgdGVtcFRhYmxlLnB1dCgnUk9SWCcsIGNvbnRhaW5lck1wbGluZS5nZXQoJ0lCUk9SWCcpLnRvU3RyaW5nKCkpOw0KICAgIHRlbXBUYWJsZS5wdXQoJ01PREwnLCBjb250YWluZXJNcGxpbmUuZ2V0KCdJQk1PREwnKS50b1N0cmluZygpKTsNCiAgICB0ZW1wVGFibGUucHV0KCdURURMJywgY29udGFpbmVyTXBsaW5lLmdldCgnSUJURURMJykudG9TdHJpbmcoKSk7DQogICAgdGVtcFRhYmxlLnB1dCgnVEVMMScsIGNvbnRhaW5lck1wbGluZS5nZXQoJ0lCVEVMMScpLnRvU3RyaW5nKCkpOw0KDQogICAgaW50IGN1cnJlbnRDb21wYW55ID0gKEludGVnZXIpIHByb2dyYW0uZ2V0TERBWkQoKS5DT05POw0KDQogICAgDQogICAgU3RyaW5nIHRJdG5vID0gY29udGFpbmVyTXBsaW5lLmdldCgnSUJJVE5PJykudG9TdHJpbmcoKTsNCiAgICBTdHJpbmcgdFVubXMgPSAiIjsNCiAgICBTdHJpbmcgdEN3dW4gPSAiIjsNCiAgICBTdHJpbmcgdERjY2QgPSAiMCI7DQogICAgU3RyaW5nIHRQZGNjID0gIjAiOw0KICAgIFN0cmluZyBkZWNpbWFsWmVyb2VzID0gIiI7DQoNCiAgICBEQkFjdGlvbiBxdWVyeU1pdG1hcyA9IGRhdGFiYXNlLnRhYmxlKCJNSVRNQVMiKS5pbmRleCgiMDAiKS5zZWxlY3Rpb24oIk1NQ09OTyIsICJNTUlUTk8iLCAiTU1VTk1TIiwgIk1NRENDRCIsICJNTVBEQ0MiLCAiTU1DV1VOIikuYnVpbGQoKTsNCiAgICBEQkNvbnRhaW5lciBjb250YWluZXJNaXRtYXMgPSBxdWVyeU1pdG1hcy5nZXRDb250YWluZXIoKTsNCiAgICBjb250YWluZXJNaXRtYXMuc2V0KCJNTUNPTk8iLCBjdXJyZW50Q29tcGFueSk7DQogICAgY29udGFpbmVyTWl0bWFzLnNldCgiTU1JVE5PIiwgdEl0bm8pOw0KDQogICAgaWYgKHF1ZXJ5TWl0bWFzLnJlYWQoY29udGFpbmVyTWl0bWFzKSkgew0KDQogICAgICB0VW5tcyA9IGNvbnRhaW5lck1pdG1hcy5nZXQoIk1NVU5NUyIpOw0KICAgICAgdEN3dW4gPSBjb250YWluZXJNaXRtYXMuZ2V0KCJNTUNXVU4iKTsNCiAgICAgIHREY2NkID0gY29udGFpbmVyTWl0bWFzLmdldCgiTU1EQ0NEIik7DQogICAgICB0UGRjYyA9IGNvbnRhaW5lck1pdG1hcy5nZXQoIk1NUERDQyIpOw0KDQogICAgICANCiAgICAgIGludCBkY2NkID0gSW50ZWdlci5wYXJzZUludCh0RGNjZCk7DQogICAgICBpZiAoZGNjZCA+IDApIHsNCiAgICAgICAgZGVjaW1hbFplcm9lcyA9ICIuIjsNCg0KICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IGRjY2Q7IGkrKykgew0KICAgICAgICAgIGRlY2ltYWxaZXJvZXMgPSBkZWNpbWFsWmVyb2VzICsgIjAiOw0KICAgICAgICB9DQogICAgICB9DQogICAgfQ0KDQogICAgdGVtcFRhYmxlLnB1dCgnVU5NUycsIHRVbm1zKTsNCiAgICB0ZW1wVGFibGUucHV0KCdDV1VOJywgdEN3dW4pOw0KDQogICAgDQogICAgU3RyaW5nIHREbWNmID0gIjEiOw0KICAgIFN0cmluZyB0Q29mYSA9ICIxIjsNCiAgICBTdHJpbmcgdFB1dW4gPSBjb250YWluZXJNcGxpbmUuZ2V0KCdJQlBVVU4nKS50b1N0cmluZygpOw0KICAgIGJvb2xlYW4gZXhpc3RNaXRhdW4gPSBmYWxzZTsNCg0KICAgIERCQWN0aW9uIHF1ZXJ5TWl0YXVuID0gZGF0YWJhc2UudGFibGUoIk1JVEFVTiIpLmluZGV4KCIwMCIpLnNlbGVjdGlvbigiTVVDT05PIiwgIk1VSVROTyIsICJNVUFVVFAiLCAiTVVBTFVOIiwgIk1VRE1DRiIsICJNVUNPRkEiKS5idWlsZCgpOw0KICAgIERCQ29udGFpbmVyIGNvbnRhaW5lck1pdGF1biA9IHF1ZXJ5TWl0YXVuLmdldENvbnRhaW5lcigpOw0KICAgIGNvbnRhaW5lck1pdGF1bi5zZXQoIk1VQ09OTyIsIGN1cnJlbnRDb21wYW55KTsNCiAgICBjb250YWluZXJNaXRhdW4uc2V0KCJNVUlUTk8iLCB0SXRubyk7DQogICAgY29udGFpbmVyTWl0YXVuLnNldCgiTVVBVVRQIiwgMSk7DQogICAgY29udGFpbmVyTWl0YXVuLnNldCgiTVVBTFVOIiwgdFB1dW4pOw0KDQogICAgaWYgKHF1ZXJ5TWl0YXVuLnJlYWQoY29udGFpbmVyTWl0YXVuKSkgew0KICAgICAgZXhpc3RNaXRhdW4gPSB0cnVlOw0KICAgICAgdERtY2YgPSBjb250YWluZXJNaXRhdW4uZ2V0KCJNVURNQ0YiKTsNCiAgICAgIHRDb2ZhID0gY29udGFpbmVyTWl0YXVuLmdldCgiTVVDT0ZBIik7DQogICAgfQ0KDQogICAgDQogICAgU3RyaW5nIHRPcnF0ID0gY29udGFpbmVyTXBsaW5lLmdldCgnSUJPUlFBJykudG9TdHJpbmcoKTsNCg0KICAgIGRvdWJsZSB0UHhudW0gPSBEb3VibGUucGFyc2VEb3VibGUodE9ycXQpOw0KDQogICAgRGVjaW1hbEZvcm1hdCBkZiA9IG5ldyBEZWNpbWFsRm9ybWF0KCIjIyMjIyMjIyMjIzAiICsgZGVjaW1hbFplcm9lcyk7DQogICAgdE9ycXQgPSAiIiArIGRmLmZvcm1hdCh0UHhudW0pOw0KDQogICAgdGVtcFRhYmxlLnB1dCgnT1JRVCcsIHRPcnF0KTsNCg0KICAgIA0KICAgIHRlbXBUYWJsZS5wdXQoJ0xPQ0QnLCBwcm9ncmFtLmdldExEQVpEKCkuTE9DRC50b1N0cmluZygpKTsNCg0KICAgIA0KICAgIFN0cmluZyB0UHVxdCA9IGNvbnRhaW5lck1wbGluZS5nZXQoJ0lCUFVDRCcpLnRvU3RyaW5nKCk7DQoNCiAgICB0UHhudW0gPSBEb3VibGUucGFyc2VEb3VibGUodFB1cXQpOw0KDQogICAgaWYgKCF0UHV1bi5lcXVhbHModFVubXMpKSB7DQoNCiAgICAgIGlmIChleGlzdE1pdGF1bikgew0KDQogICAgICAgIGlmICh0RG1jZi5lcXVhbHMoIjIiKSkgew0KICAgICAgICAgIHRQeG51bSA9IHRQeG51bSAqIERvdWJsZS5wYXJzZURvdWJsZSh0Q29mYSk7DQogICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgdFB4bnVtID0gdFB4bnVtIC8gRG91YmxlLnBhcnNlRG91YmxlKHRDb2ZhKTsNCiAgICAgICAgfQ0KDQogICAgICB9DQoNCiAgICB9DQoNCiAgICBkZiA9IG5ldyBEZWNpbWFsRm9ybWF0KCIjIyMjIyMjIyMjIzAiICsgZGVjaW1hbFplcm9lcyk7DQogICAgdFB1cXQgPSAiIiArIGRmLmZvcm1hdCh0UHhudW0pOw0KICAgIHRlbXBUYWJsZS5wdXQoJ1BVUVQnLCB0UHVxdCk7DQoNCiAgICANCiAgICBTdHJpbmcgdFJ2cXQgPSBjb250YWluZXJNcGxpbmUuZ2V0KCdJQlJWUUEnKS50b1N0cmluZygpOw0KDQogICAgdFB4bnVtID0gRG91YmxlLnBhcnNlRG91YmxlKHRSdnF0KTsNCg0KICAgIGRmID0gbmV3IERlY2ltYWxGb3JtYXQoIiMjIyMjIyMjIyMjMCIgKyBkZWNpbWFsWmVyb2VzKTsNCiAgICB0UnZxdCA9ICIiICsgZGYuZm9ybWF0KHRQeG51bSk7DQogICAgdGVtcFRhYmxlLnB1dCgnUlZRVCcsIHRSdnF0KTsNCg0KICAgIGxpbmVMaXN0LmFkZCh0ZW1wVGFibGUpOw0KDQogIH0NCg0KDQogLyoqDQogICogUmV0cml2ZSBVbml0IG9mIE1lYXN1cmVtZW50IGZyb20gdGFibGUgTUlUQVVODQogICogDQogICovDQogICANCiAgcHVibGljIGdldFVuaXRPZk1lYXN1cmVtZW50Q29udmVyc2lvbihIYXNodGFibGUgZWFjaExpbmUpIHsNCiAgICBTdHJpbmcgSVROTyA9IGVhY2hMaW5lLmdldCgnSVROTycpOw0KICAgIGVhY2hMaW5lUHV1biA9IGVhY2hMaW5lLmdldCgnUFVVTicpOw0KICAgIGVhY2hMaW5lUHB1biA9IGVhY2hMaW5lLmdldCgnUFBVTicpOw0KICAgIGludCBjdXJyZW50Q29tcGFueSA9IHByb2dyYW0uZ2V0TERBWkQoKS5DT05POw0KDQogICAgREJBY3Rpb24gcXVlcnlNaXRhdW4gPSBkYXRhYmFzZS50YWJsZSgiTUlUQVVOIikuaW5kZXgoIjAwIikuc2VsZWN0aW9uKCJNVUNPTk8iLCAiTVVJVE5PIiwgIk1VQVVUUCIsICJNVUFMVU4iLCAiTVVETUNGIiwgIk1VQ09GQSIsICJNVURDQ0QiKS5idWlsZCgpOw0KICAgIERCQ29udGFpbmVyIGNvbnRhaW5lck1pdGF1biA9IHF1ZXJ5TWl0YXVuLmdldENvbnRhaW5lcigpOw0KICAgIGNvbnRhaW5lck1pdGF1bi5zZXQoIk1VQ09OTyIsIGN1cnJlbnRDb21wYW55KTsNCiAgICBjb250YWluZXJNaXRhdW4uc2V0KCJNVUlUTk8iLCBJVE5PKTsNCiAgICBxdWVyeU1pdGF1bi5yZWFkQWxsKGNvbnRhaW5lck1pdGF1biwgMiwgY2xvc3VyZU1pdGF1bik7DQoNCiAgfQ0KDQogIENsb3N1cmUgPCA/ID4gY2xvc3VyZU1pdGF1biA9IHsNCiAgICBEQkNvbnRhaW5lciBjb250YWluZXJNaXRhdW4gLT4NCg0KICAgIFN0cmluZyBBVVRQID0gY29udGFpbmVyTWl0YXVuLmdldCgnTVVBVVRQJyk7DQogICAgQVVUUEEgPSBBVVRQOw0KICAgIFN0cmluZyBBTFVOID0gY29udGFpbmVyTWl0YXVuLmdldCgnTVVBTFVOJyk7DQogICAgU3RyaW5nIERDQ0QgPSBjb250YWluZXJNaXRhdW4uZ2V0KCdNVURDQ0QnKTsNCiAgICBTdHJpbmcgQ09GQSA9IGNvbnRhaW5lck1pdGF1bi5nZXQoJ01VQ09GQScpOw0KICAgIFN0cmluZyBETUNGID0gY29udGFpbmVyTWl0YXVuLmdldCgnTVVETUNGJyk7DQogICAgaWYgKEFMVU4udHJpbSgpLmVxdWFscyhlYWNoTGluZVB1dW4udHJpbSgpKSAmJiBBVVRQLnRyaW0oKS5lcXVhbHMoIjEiKSkgew0KICAgICAgb3JkZXJVbURjY2QgPSBEQ0NEOw0KICAgICAgb3JkZXJVbUNvZmEgPSBDT0ZBOw0KICAgICAgb3JkZXJVbURtY2YgPSBETUNGOw0KICAgIH0NCiAgICBpZiAoQUxVTi50cmltKCkuZXF1YWxzKGVhY2hMaW5lUHB1bi50cmltKCkpKSB7DQogICAgICBpZiAoQVVUUC50cmltKCkuZXF1YWxzKCIxIikpIHsNCiAgICAgICAgcHJpY2VVbURjY2QgPSBEQ0NEOw0KICAgICAgfQ0KICAgICAgaWYgKEFVVFAudHJpbSgpLmVxdWFscygiMiIpKSB7DQogICAgICAgIHByaWNlVW1Db2ZhID0gQ09GQTsNCiAgICAgICAgcHJpY2VVbURtY2YgPSBETUNGOw0KICAgICAgfQ0KICAgIH0NCiAgfQ0KICANCiAvKioNCiAgKiBnZXQgYmFzaWMgZGVjaW1hbCBjb2RlIGZvciBJdGVtIGFuZCBvcmRlciBxdWFudGl0eUludm9pY2VkDQogICogDQogICovDQogICANCiAgcHVibGljIGdldEJhc2ljRGVjaW1hbENvZGUoSGFzaHRhYmxlIGVhY2hMaW5lKSB7DQogICAgU3RyaW5nIElUTk8gPSBlYWNoTGluZS5nZXQoJ0lUTk8nKTsNCiAgICBTdHJpbmcgT1JRQSA9IGVhY2hMaW5lLmdldCgnT1JRQScpOw0KICAgIFN0cmluZyBBRFFBID0gZWFjaExpbmUuZ2V0KCdBRFFBJyk7DQogICAgU3RyaW5nIE9SUVQgPSBlYWNoTGluZS5nZXQoJ09SUVQnKTsNCiAgICBib29sZWFuIHJlY29yZEV4aXN0cyA9IHRydWU7DQogICAgZGVmIGNhbGxiYWNrID0gew0KICAgICAgTWFwIDwgU3RyaW5nLA0KICAgICAgU3RyaW5nID4gcmVzdWx0cyAtPg0KICAgICAgcmVjb3JkRXhpc3RzID0gIXJlc3VsdHMuZ2V0KCdlcnJvcicpOw0KICAgICAgaWYgKHJlY29yZEV4aXN0cykgew0KICAgICAgICBiYXNpY1VtRGNjZCA9IHJlc3VsdHMuZ2V0KCdEQ0NEJyk7DQogICAgICB9DQogICAgICBpZiAoQURRQSAhPSBudWxsICYmIEFEUUEudHJpbSgpLmlzRW1wdHkoKSkgew0KICAgICAgICBCaWdEZWNpbWFsIGFkdmlzZWRRdWFudGl0eSA9IG5ldyBCaWdEZWNpbWFsKEFEUUEpOw0KICAgICAgICBpZiAoYWR2aXNlZFF1YW50aXR5LmNvbXBhcmVUbyhCaWdEZWNpbWFsLlpFUk8pICE9IDApIHsNCiAgICAgICAgICBiYXNpY1VtRGNjZCA9IGJhc2ljVW1EY2NkLmVxdWFscygiIikgPyAiMiIgOiBiYXNpY1VtRGNjZDsNCiAgICAgICAgICBvcmRlclVtQ29mYSA9IG9yZGVyVW1Db2ZhLmVxdWFscygiIikgPyAiMSIgOiBvcmRlclVtQ29mYS50cmltKCk7DQogICAgICAgICAgb3JkZXJVbURtY2YgPSBvcmRlclVtRG1jZi5lcXVhbHMoIiIpID8gIjEiIDogb3JkZXJVbURtY2YudHJpbSgpOw0KDQogICAgICAgICAgQmlnRGVjaW1hbCBvcmRlcmVkUXVhbnRpdHkgPSBuZXcgQmlnRGVjaW1hbChPUlFBKTsNCiAgICAgICAgICBCaWdEZWNpbWFsIGNvbnZlcnNpb25GYWN0b3IgPSBuZXcgQmlnRGVjaW1hbChvcmRlclVtQ29mYSk7DQogICAgICAgICAgQmlnSW50ZWdlciBkZWNpbWFsUGxhY2VzID0gbmV3IEJpZ0ludGVnZXIoYmFzaWNVbURjY2QpOw0KDQogICAgICAgICAgQmlnRGVjaW1hbCBiYXNlUXVhbnRpdHkgPSBudWxsOw0KDQogICAgICAgICAgaWYgKG9yZGVyVW1EbWNmLmVxdWFscygiMSIpKSB7DQogICAgICAgICAgICBiYXNlUXVhbnRpdHkgPSBvcmRlcmVkUXVhbnRpdHkuc2V0U2NhbGUoOCwgUm91bmRpbmdNb2RlLkhBTEZfVVApLm11bHRpcGx5KGNvbnZlcnNpb25GYWN0b3IpOw0KICAgICAgICAgICAgT1JRVCA9IGJhc2VRdWFudGl0eS5zZXRTY2FsZShkZWNpbWFsUGxhY2VzLmludFZhbHVlKCksIFJvdW5kaW5nTW9kZS5IQUxGX1VQKS50b1BsYWluU3RyaW5nKCk7DQogICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgIGJhc2VRdWFudGl0eSA9IG9yZGVyZWRRdWFudGl0eS5zZXRTY2FsZSg4LCBSb3VuZGluZ01vZGUuSEFMRl9VUCkuZGl2aWRlKGNvbnZlcnNpb25GYWN0b3IsIFJvdW5kaW5nTW9kZS5IQUxGX1VQKTsNCiAgICAgICAgICAgIE9SUVQgPSBiYXNlUXVhbnRpdHkuc2V0U2NhbGUoZGVjaW1hbFBsYWNlcy5pbnRWYWx1ZSgpLCBSb3VuZGluZ01vZGUuSEFMRl9VUCkudG9QbGFpblN0cmluZygpOw0KICAgICAgICAgIH0NCiAgICAgICAgICBlYWNoTGluZS5yZXBsYWNlKCdPUlFUJywgT1JRVCk7DQogICAgICAgIH0NCiAgICAgIH0NCiAgICB9DQogICAgZGVmIHBhcmFtcyA9IFsiQ09OTyI6IENPTk8sICJJVE5PIjogSVROT107DQogICAgbWlDYWxsZXIuY2FsbCgiTU1TMjAwTUkiLCAiR2V0SXRtQmFzaWMiLCBwYXJhbXMsIGNhbGxiYWNrKTsNCiAgfQ0KDQoNCiAvKioNCiAgKiBTZW5kIHB1cmNoYXNlIG9yZGVyIGxpbmUgZGV0YWlscyB0byBvdXRwdXQgYXBpIGZpZWxkcw0KICAqIA0KICAqLw0KICAgDQogIHB1YmxpYyB3cml0ZVB1cmNoYXNlTGluZShTdHJpbmcgZWFjaFB1bm8sIEhhc2h0YWJsZSBlYWNoTGluZSkgew0KICAgIA0KICAgIGlmIChlYWNoTGluZS5nZXQoJ1BVU0wnKS50b1N0cmluZygpIDwgJzg1JyAmJiBvSWFwYy5lcXVhbHMoIjEiKSkgew0KICAgICAgbWkub3V0RGF0YS5wdXQoJ1JDVFAnLCAnT0wnKTsNCiAgICAgIG1pLm91dERhdGEucHV0KCdQVU5PJywgZWFjaFB1bm8pOw0KICAgICAgbWkub3V0RGF0YS5wdXQoJ1BOTEknLCBlYWNoTGluZS5nZXQoJ1BOTEknKS50b1N0cmluZygpKTsNCiAgICAgIG1pLm91dERhdGEucHV0KCdQTkxTJywgZWFjaExpbmUuZ2V0KCdQTkxTJykudG9TdHJpbmcoKSk7DQogICAgICBtaS5vdXREYXRhLnB1dCgnVFJEVCcsIGVhY2hMaW5lLmdldCgnVFJEVCcpLnRvU3RyaW5nKCkpOw0KICAgICAgbWkub3V0RGF0YS5wdXQoJ0xXSEwnLCBlYWNoTGluZS5nZXQoJ1dITE8nKS50b1N0cmluZygpKTsNCiAgICAgIG1pLm91dERhdGEucHV0KCdJVE5PJywgZWFjaExpbmUuZ2V0KCdJVE5PJykudG9TdHJpbmcoKSk7DQogICAgICBtaS5vdXREYXRhLnB1dCgnUElURCcsIGVhY2hMaW5lLmdldCgnUElURCcpLnRvU3RyaW5nKCkpOw0KICAgICAgbWkub3V0RGF0YS5wdXQoJ1BJVFQnLCBlYWNoTGluZS5nZXQoJ1BJVFQnKS50b1N0cmluZygpKTsNCiAgICAgIG1pLm91dERhdGEucHV0KCdTSVRFJywgZWFjaExpbmUuZ2V0KCdTSVRFJykudG9TdHJpbmcoKSk7DQogICAgICBtaS5vdXREYXRhLnB1dCgnQ0FRQScsIGVhY2hMaW5lLmdldCgnQ0FRQScpLnRvU3RyaW5nKCkpOw0KICAgICAgbWkub3V0RGF0YS5wdXQoJ1JKUUEnLCBlYWNoTGluZS5nZXQoJ1JKUUEnKS50b1N0cmluZygpKTsNCiAgICAgIG1pLm91dERhdGEucHV0KCdTRFFBJywgZWFjaExpbmUuZ2V0KCdTRFFBJykudG9TdHJpbmcoKSk7DQogICAgICBtaS5vdXREYXRhLnB1dCgnT1JRQScsIGVhY2hMaW5lLmdldCgnT1JRQScpLnRvU3RyaW5nKCkpOw0KICAgICAgbWkub3V0RGF0YS5wdXQoJ0lWUUEnLCBlYWNoTGluZS5nZXQoJ0lWUUEnKS50b1N0cmluZygpKTsNCiAgICAgIG1pLm91dERhdGEucHV0KCdSVlFBJywgZWFjaExpbmUuZ2V0KCdSVlFBJykudG9TdHJpbmcoKSk7DQogICAgICBtaS5vdXREYXRhLnB1dCgnQ0ZRQScsIGVhY2hMaW5lLmdldCgnQ0ZRQScpLnRvU3RyaW5nKCkpOw0KICAgICAgbWkub3V0RGF0YS5wdXQoJ09RUFUnLCBlYWNoTGluZS5nZXQoJ29wZW5RdWFudGl0eVByaWNlVW0nKS50b1N0cmluZygpKTsNCiAgICAgIG1pLm91dERhdGEucHV0KCdQVVJDJywgZWFjaExpbmUuZ2V0KCdQVVJDJykudG9TdHJpbmcoKSk7DQogICAgICBtaS5vdXREYXRhLnB1dCgnTEJVWScsIGVhY2hMaW5lLmdldCgnQlVZRScpLnRvU3RyaW5nKCkpOw0KICAgICAgbWkub3V0RGF0YS5wdXQoJ1NUVU0nLCBlYWNoTGluZS5nZXQoJ3N0YW5kYXJkVW0nKS50b1N0cmluZygpKTsNCiAgICAgIG1pLm91dERhdGEucHV0KCdVTk1TJywgZWFjaExpbmUuZ2V0KCdVTk1TJykudG9TdHJpbmcoKSk7DQogICAgICBtaS5vdXREYXRhLnB1dCgnQUxVTScsIGVhY2hMaW5lLmdldCgnYWx0ZXJuYXRlVW0nKS50b1N0cmluZygpKTsNCiAgICAgIG1pLm91dERhdGEucHV0KCdDV1VOJywgZWFjaExpbmUuZ2V0KCdDV1VOJykudG9TdHJpbmcoKSk7DQogICAgICBtaS5vdXREYXRhLnB1dCgnTE5BTScsIGVhY2hMaW5lLmdldCgnTE5BTScpLnRvU3RyaW5nKCkpOw0KICAgICAgbWkub3V0RGF0YS5wdXQoJ1BVUFInLCBlYWNoTGluZS5nZXQoJ3ByaWNlUGVyUGllY2VTdGFuZGFyZFVtJykudG9TdHJpbmcoKSk7DQogICAgICBtaS5vdXREYXRhLnB1dCgnUFVRVCcsIGVhY2hMaW5lLmdldCgnUFVRVCcpLnRvU3RyaW5nKCkpOw0KICAgICAgbWkub3V0RGF0YS5wdXQoJ0FMUFInLCBlYWNoTGluZS5nZXQoJ2FsdGVybmF0aXZlUHJpY2UnKS50b1N0cmluZygpKTsNCiAgICAgIG1pLm91dERhdGEucHV0KCdQVENEJywgZWFjaExpbmUuZ2V0KCdWVENEJykudG9TdHJpbmcoKSk7DQogICAgICBtaS5vdXREYXRhLnB1dCgnVlRDRCcsIGVhY2hMaW5lLmdldCgnVlRDRCcpLnRvU3RyaW5nKCkpOw0KICAgICAgbWkub3V0RGF0YS5wdXQoJ0dSTVQnLCBlYWNoTGluZS5nZXQoJ0dSTVQnKS50b1N0cmluZygpKTsNCiAgICAgIG1pLm91dERhdGEucHV0KCdMTU9EJywgZWFjaExpbmUuZ2V0KCdNT0RMJykudG9TdHJpbmcoKSk7DQogICAgICBtaS5vdXREYXRhLnB1dCgnTFRFRCcsIGVhY2hMaW5lLmdldCgnVEVETCcpLnRvU3RyaW5nKCkpOw0KICAgICAgbWkub3V0RGF0YS5wdXQoJ0xURUwnLCBlYWNoTGluZS5nZXQoJ1RFTDEnKS50b1N0cmluZygpKTsNCiAgICAgIG1pLm91dERhdGEucHV0KCdMUFNMJywgZWFjaExpbmUuZ2V0KCdQVVNMJykudG9TdHJpbmcoKSk7DQogICAgICBtaS5vdXREYXRhLnB1dCgnTFBTVCcsIGVhY2hMaW5lLmdldCgnUFVTVCcpLnRvU3RyaW5nKCkpOw0KICAgICAgbWkub3V0RGF0YS5wdXQoJ1BPUE4nLCBlYWNoTGluZS5nZXQoJ3BvcG5FYTEzJykudG9TdHJpbmcoKSk7DQogICAgICBtaS5vdXREYXRhLnB1dCgnUk9SQycsIGVhY2hMaW5lLmdldCgnUk9SQycpLnRvU3RyaW5nKCkpOw0KICAgICAgbWkub3V0RGF0YS5wdXQoJ1JPUk4nLCBlYWNoTGluZS5nZXQoJ1JPUk4nKS50b1N0cmluZygpKTsNCiAgICAgIG1pLm91dERhdGEucHV0KCdST1JMJywgZWFjaExpbmUuZ2V0KCdST1JMJykudG9TdHJpbmcoKSk7DQogICAgICBtaS5vdXREYXRhLnB1dCgnUk9SWCcsIGVhY2hMaW5lLmdldCgnUk9SWCcpLnRvU3RyaW5nKCkpOw0KICAgICAgbWkub3V0RGF0YS5wdXQoJ1NVRE8nLCBlYWNoTGluZS5nZXQoJ1NVRE8nKS50b1N0cmluZygpKTsNCiAgICAgIG1pLm91dERhdGEucHV0KCdGUlJDJywgZWFjaExpbmUuZ2V0KCdGUlJDJykudG9TdHJpbmcoKSk7DQogICAgICBtaS5vdXREYXRhLnB1dCgnRlJSRScsIGVhY2hMaW5lLmdldCgnRlJSRScpLnRvU3RyaW5nKCkpOw0KICAgICAgbWkub3V0RGF0YS5wdXQoJ0FEUUEnLCBlYWNoTGluZS5nZXQoJ0FEUUEnKS50b1N0cmluZygpKTsNCiAgICAgIG1pLm91dERhdGEucHV0KCdPUlFUJywgZWFjaExpbmUuZ2V0KCdPUlFUJykudG9TdHJpbmcoKSk7DQogICAgICBtaS5vdXREYXRhLnB1dCgnQU1PUCcsIGVhY2hMaW5lLmdldCgnYW1vdW50T3BlbicpLnRvU3RyaW5nKCkpOw0KICAgICAgbWkub3V0RGF0YS5wdXQoJ0FNT1InLCBlYWNoTGluZS5nZXQoJ0xOQU0nKS50b1N0cmluZygpKTsNCg0KICAgICAgaWYgKERvdWJsZS5wYXJzZURvdWJsZShlYWNoTGluZS5nZXQoJ0NQUFInKS50b1N0cmluZygpKSA9PSAwKSB7DQogICAgICAgIG1pLm91dERhdGEucHV0KCdQUkNFJywgZWFjaExpbmUuZ2V0KCdwcmljZVBlclBpZWNlU3RhbmRhcmRVbScpLnRvU3RyaW5nKCkpOw0KICAgICAgfQ0KDQogICAgICBpZiAoRG91YmxlLnBhcnNlRG91YmxlKGVhY2hMaW5lLmdldCgnQ1BQUicpLnRvU3RyaW5nKCkpICE9IDAgJiYgRG91YmxlLnBhcnNlRG91YmxlKGVhY2hMaW5lLmdldCgnQ0ZEMScpLnRvU3RyaW5nKCkpICE9IDApIHsNCiAgICAgICAgbWkub3V0RGF0YS5wdXQoJ1BSQ0UnLCAoRG91YmxlLnBhcnNlRG91YmxlKGVhY2hMaW5lLmdldCgnQ1BQUicpLnRvU3RyaW5nKCkpIC0gKCgoRG91YmxlLnBhcnNlRG91YmxlKGVhY2hMaW5lLmdldCgnQ0ZEMScpLnRvU3RyaW5nKCkpKSAvIDEwMCkgKiAoRG91YmxlLnBhcnNlRG91YmxlKGVhY2hMaW5lLmdldCgnQ1BQUicpLnRvU3RyaW5nKCkpKSkpLnRvU3RyaW5nKCkpOw0KDQogICAgICB9DQoNCiAgICAgIGlmIChEb3VibGUucGFyc2VEb3VibGUoZWFjaExpbmUuZ2V0KCdDUFBSJykudG9TdHJpbmcoKSkgIT0gMCAmJiBEb3VibGUucGFyc2VEb3VibGUoZWFjaExpbmUuZ2V0KCdDRkQyJykudG9TdHJpbmcoKSkgIT0gMCkgew0KICAgICAgICBtaS5vdXREYXRhLnB1dCgnUFJDRScsIChEb3VibGUucGFyc2VEb3VibGUoZWFjaExpbmUuZ2V0KCdDUFBSJykudG9TdHJpbmcoKSkgLSAoKChEb3VibGUucGFyc2VEb3VibGUoZWFjaExpbmUuZ2V0KCdDRkQyJykudG9TdHJpbmcoKSkpIC8gMTAwKSAqIChEb3VibGUucGFyc2VEb3VibGUoZWFjaExpbmUuZ2V0KCdDUFBSJykudG9TdHJpbmcoKSkpKSkudG9TdHJpbmcoKSk7DQoNCiAgICAgIH0NCg0KICAgICAgaWYgKERvdWJsZS5wYXJzZURvdWJsZShlYWNoTGluZS5nZXQoJ0NQUFInKS50b1N0cmluZygpKSAhPSAwICYmIERvdWJsZS5wYXJzZURvdWJsZShlYWNoTGluZS5nZXQoJ0NGRDMnKS50b1N0cmluZygpKSAhPSAwKSB7DQogICAgICAgIG1pLm91dERhdGEucHV0KCdQUkNFJywgKERvdWJsZS5wYXJzZURvdWJsZShlYWNoTGluZS5nZXQoJ0NQUFInKS50b1N0cmluZygpKSAtICgoKERvdWJsZS5wYXJzZURvdWJsZShlYWNoTGluZS5nZXQoJ0NGRDMnKS50b1N0cmluZygpKSkgLyAxMDApICogKERvdWJsZS5wYXJzZURvdWJsZShlYWNoTGluZS5nZXQoJ0NQUFInKS50b1N0cmluZygpKSkpKS50b1N0cmluZygpKTsNCiAgICAgIH0NCg0KICAgICAgaWYgKERvdWJsZS5wYXJzZURvdWJsZShlYWNoTGluZS5nZXQoJ0NQUFInKS50b1N0cmluZygpKSAhPSAwICYmIChEb3VibGUucGFyc2VEb3VibGUoZWFjaExpbmUuZ2V0KCdDRkQxJykudG9TdHJpbmcoKSkgPT0gMCAmJiBEb3VibGUucGFyc2VEb3VibGUoZWFjaExpbmUuZ2V0KCdDRkQyJykudG9TdHJpbmcoKSkgPT0gMCAmJiBEb3VibGUucGFyc2VEb3VibGUoZWFjaExpbmUuZ2V0KCdDRkQzJykudG9TdHJpbmcoKSkgPT0gMCkpIHsNCg0KICAgICAgICBtaS5vdXREYXRhLnB1dCgnUFJDRScsIGVhY2hMaW5lLmdldCgnQ1BQUicpLnRvU3RyaW5nKCkpOw0KICAgICAgfQ0KDQogICAgICBtaS5vdXREYXRhLnB1dCgnVU5JVCcsIGVhY2hMaW5lLmdldCgnYWx0ZXJuYXRlVW0nKS50b1N0cmluZygpKTsNCiAgICAgIG1pLm91dERhdGEucHV0KCdPUFFUJywgZWFjaExpbmUuZ2V0KCdvcGVuUXVhbnRpdHlTdGFuZGFyZFVtJykudG9TdHJpbmcoKSk7DQogICAgICBtaS5vdXREYXRhLnB1dCgnUVRJVicsIGVhY2hMaW5lLmdldCgnaW52b2ljZWRRdWFudGl0eVN0YW5kYXJkVW0nKS50b1N0cmluZygpKTsNCiAgICAgIG1pLm91dERhdGEucHV0KCdRVE9SJywgZWFjaExpbmUuZ2V0KCdvcmRlcmVkUXVhbnRpdHlTdGFuZGFyZFVtJykudG9TdHJpbmcoKSkNCiAgICAgIG1pLm91dERhdGEucHV0KCdRVFJWJywgZWFjaExpbmUuZ2V0KCdyZWNlaXZlZFF1YW50aXR5U3RhbmRhcmRVbScpLnRvU3RyaW5nKCkpOw0KDQogICAgICBtaS5vdXREYXRhLnB1dCgnQUxUVScsIGVhY2hMaW5lLmdldCgnYWx0ZXJuYXRlVW0nKS50b1N0cmluZygpKTsNCiAgICAgIG1pLm91dERhdGEucHV0KCdBTFFPJywgZWFjaExpbmUuZ2V0KCdhbHRlcm5hdGl2ZVF1YW50aXR5T3BlbicpLnRvU3RyaW5nKCkpOw0KICAgICAgbWkub3V0RGF0YS5wdXQoJ0FMVFAnLCBlYWNoTGluZS5nZXQoJ2FsdGVybmF0aXZlUHJpY2UnKS50b1N0cmluZygpKTsNCiAgICAgIG1pLndyaXRlKCk7DQogICAgfQ0KICB9DQoNCiAvKioNCiAgKiBSZXRyaXZlIGl0ZW0gYWxpYXMgdXNpbmcgTU1TMDI1TUkuR2V0QWxpYXMNCiAgKiANCiAgKi8NCiAgIA0KICBwdWJsaWMgZ2V0SXRlbUFsaWFzKEhhc2h0YWJsZSBlYWNoTGluZSkgew0KICAgIFN0cmluZyBJVE5PID0gZWFjaExpbmUuZ2V0KCdJVE5PJyk7DQoNCiAgICBib29sZWFuIHJlY29yZEV4aXN0cyA9IHRydWU7DQogICAgZGVmIGNhbGxiYWNrID0gew0KICAgICAgTWFwIDwgU3RyaW5nLA0KICAgICAgU3RyaW5nID4gcmVzdWx0cyAtPg0KICAgICAgcmVjb3JkRXhpc3RzID0gIXJlc3VsdHMuZ2V0KCdlcnJvcicpOw0KICAgICAgaWYgKHJlY29yZEV4aXN0cykgew0KICAgICAgICBwb3BuRWExMyA9IHJlc3VsdHMuZ2V0KCdQT1BOJyk7DQogICAgICB9DQoNCiAgICB9DQogICAgZGVmIHBhcmFtcyA9IFsiQ09OTyI6IENPTk8sICJBTFdUIjogIjAyIiwgIklUTk8iOiBJVE5PLCAiQUxXUSI6ICJFQTEzIl07DQogICAgbWlDYWxsZXIuY2FsbCgiTU1TMDI1TUkiLCAiR2V0QWxpYXMiLCBwYXJhbXMsIGNhbGxiYWNrKTsNCg0KICB9DQoNCiAgLyoqDQogICogZ2V0IHB1cmNoYXNlIG9yZGVyIGxpbmUgZGV0YWlscyBmcm9tIE1QTElORQ0KICAqIA0KICAqLw0KICANCiAgcHVibGljIGdldE1wbGluZURldGFpbHMoU3RyaW5nIGVhY2hQdW5vLCBIYXNodGFibGUgZWFjaExpbmUpIHsNCiAgICBTdHJpbmcgUE5MSSA9IGVhY2hMaW5lLmdldCgnUE5MSScpOw0KICAgIFN0cmluZyBQTkxTID0gZWFjaExpbmUuZ2V0KCdQTkxTJyk7DQogICAgaWYgKFBOTEkgIT0gbnVsbCAmJiAhUE5MSS50cmltKCkuZXF1YWxzKCIiKSkgUE5MSSA9IFN0cmluZy5mb3JtYXQoIiUwM2QiLCBJbnRlZ2VyLnBhcnNlSW50KFBOTEkudHJpbSgpKSk7DQogICAgaWYgKFBOTFMgIT0gbnVsbCAmJiAhUE5MUy50cmltKCkuZXF1YWxzKCIiKSkgUE5MUyA9IFN0cmluZy5mb3JtYXQoIiUwM2QiLCBJbnRlZ2VyLnBhcnNlSW50KFBOTFMudHJpbSgpKSk7DQogICAgREJBY3Rpb24gcXVlcnlNcGxpbmUgPSBkYXRhYmFzZS50YWJsZSgiTVBMSU5FIikuaW5kZXgoIjAwIikuc2VsZWN0aW9uKCJJQkNPTk8iLCAiSUJQVU5PIiwgIklCUE5MSSIsICJJQlBOTFMiLCAiSUJTVURPIiwgIklCRlJSQyIsICJJQkZSUkUiKS5idWlsZCgpOw0KICAgIERCQ29udGFpbmVyIHJlY29yZE1wbGluZSA9IHF1ZXJ5TXBsaW5lLmdldENvbnRhaW5lcigpOw0KICAgIHJlY29yZE1wbGluZS5zZXQoIklCQ09OTyIsIEludGVnZXIucGFyc2VJbnQoQ09OTy50cmltKCkpKTsNCiAgICByZWNvcmRNcGxpbmUuc2V0KCJJQlBVTk8iLCBlYWNoUHVuby50cmltKCkpOw0KICAgIHJlY29yZE1wbGluZS5zZXQoIklCUE5MSSIsIFBOTEkudHJpbSgpLnRvSW50ZWdlcigpKTsNCiAgICByZWNvcmRNcGxpbmUuc2V0KCJJQlBOTFMiLCBQTkxTLnRyaW0oKS50b0ludGVnZXIoKSk7DQogICAgcXVlcnlNcGxpbmUucmVhZChyZWNvcmRNcGxpbmUpOw0KDQogICAgZWFjaExpbmUucHV0KCdTVURPJywgcmVjb3JkTXBsaW5lLmdldCgnSUJTVURPJykudG9TdHJpbmcoKSk7DQogICAgZWFjaExpbmUucHV0KCdGUlJDJywgcmVjb3JkTXBsaW5lLmdldCgnSUJGUlJDJykudG9TdHJpbmcoKSk7DQogICAgZWFjaExpbmUucHV0KCdGUlJFJywgcmVjb3JkTXBsaW5lLmdldCgnSUJGUlJFJykudG9TdHJpbmcoKSk7DQoNCiAgfQ0KICANCiAgLyoqDQogICogY2hlY2sgQ29uZmlybSBwdXJjaGFzZSBwcmljZQ0KICAqIA0KICAqLw0KDQogIHB1YmxpYyB1c2VDcHBySWZBdmFpbGFibGUoSGFzaHRhYmxlIGVhY2hMaW5lKSB7DQogICAgU3RyaW5nIFBVUFIgPSBlYWNoTGluZS5nZXQoJ1BVUFInKTsNCiAgICBTdHJpbmcgQ1BQUiA9IGVhY2hMaW5lLmdldCgnQ1BQUicpOw0KDQogICAgRG91YmxlIGRQdXByID0gMC4wZDsNCg0KICAgIGlmIChQVVBSICE9IG51bGwgJiYgIVBVUFIudHJpbSgpLmVxdWFscygiIikpDQogICAgICBkUHVwciA9IERvdWJsZS5wYXJzZURvdWJsZShQVVBSLnRyaW0oKSk7DQogICAgaWYgKENQUFIgIT0gbnVsbCAmJiAhQ1BQUi50cmltKCkuZXF1YWxzKCIiKSkNCiAgICAgIGRDcHByID0gRG91YmxlLnBhcnNlRG91YmxlKENQUFIudHJpbSgpKTsNCg0KICAgIGlmIChkQ3BwciA+PSAwLjAwMDAwMCkNCiAgICAgIGVhY2hMaW5lLnJlcGxhY2UoJ1BVUFInLCAnQ1BQUicpOw0KICB9DQoNCg0KIC8qKg0KICAqIGNoZWNrIFBPIG9yZGVyIHByaWNlIGFuZCBCYXNpYyB1bml0IG9mIG1lYXN1cmVtZW50DQogICogDQogICovDQogICANCiAgcHVibGljIGNoZWNrT3JkZXJQcmljZUFuZEJhc2VVbml0cyhIYXNodGFibGUgZWFjaExpbmUpIHsNCiAgICBTdHJpbmcgVU5NUyA9IGVhY2hMaW5lLmdldCgnVU5NUycpOw0KICAgIFN0cmluZyBDV1VOID0gZWFjaExpbmUuZ2V0KCdDV1VOJyk7DQogICAgU3RyaW5nIFBVVU4gPSBlYWNoTGluZS5nZXQoJ1BVVU4nKTsNCiAgICBTdHJpbmcgSVZRQSA9IGVhY2hMaW5lLmdldCgnSVZRQScpOw0KICAgIFN0cmluZyBQUFVOID0gZWFjaExpbmUuZ2V0KCdQUFVOJyk7DQogICAgU3RyaW5nIE9SUUEgPSBlYWNoTGluZS5nZXQoJ09SUUEnKTsNCiAgICBTdHJpbmcgUlZRQSA9IGVhY2hMaW5lLmdldCgnUlZRQScpOw0KICAgIFN0cmluZyBSVlFUID0gZWFjaExpbmUuZ2V0KCdSVlFUJyk7DQoNCiAgICBTdHJpbmcgT1JRVCA9IGVhY2hMaW5lLmdldCgnT1JRVCcpOw0KICAgIFN0cmluZyBMTkFNID0gZWFjaExpbmUuZ2V0KCdMTkFNJyk7DQogICAgU3RyaW5nIEFVVFAgPSBlYWNoTGluZS5nZXQoJ0FVVFAnKTsNCiAgICBTdHJpbmcgc3RhbmRhcmRVbSA9ICIiOw0KICAgIFN0cmluZyBhbHRlcm5hdGVVbSA9ICIiOw0KDQogICAgSVZRVCA9IElWUUE7DQoNCiAgICBvcmRlclVtRGNjZCA9IGJhc2ljVW1EY2NkID09IG51bGwgPyAiMCIgOiBiYXNpY1VtRGNjZC50cmltKCk7DQogICAgb3JkZXJVbURtY2YgPSAiMSI7DQogICAgb3JkZXJVbUNvZmEgPSAiMSI7DQogICAgZG91YmxlIGRibE9ycWEgPSBEb3VibGUucGFyc2VEb3VibGUoT1JRQSk7DQogICAgZG91YmxlIGRibEl2cWEgPSBEb3VibGUucGFyc2VEb3VibGUoSVZRQSk7DQogICAgZG91YmxlIHZhbHVlID0gZGJsT3JxYSAtIGRibEl2cWE7DQogICAgb3BlblF1YW50aXR5UHJpY2VVbSA9IG5ldyBCaWdEZWNpbWFsKFN0cmluZy52YWx1ZU9mKHZhbHVlKSkuc2V0U2NhbGUoNCwgQmlnRGVjaW1hbC5ST1VORF9GTE9PUikudG9QbGFpblN0cmluZygpOw0KDQogICAgQmlnRGVjaW1hbCBpbnZvaWNlZFF1YW50aXR5ID0gbmV3IEJpZ0RlY2ltYWwoSVZRQSk7DQogICAgQmlnRGVjaW1hbCBjb252ZXJzaW9uRmFjdG9yID0gbmV3IEJpZ0RlY2ltYWwob3JkZXJVbUNvZmEpOw0KDQogICAgSVZRVCA9IGludm9pY2VkUXVhbnRpdHk7DQoNCiAgICBvcmRlcmRRdWFudGl0eVByaWNlVW0gPSBPUlFUOw0KICAgIHJlY2VpdmVkUXVhbnRpdHlQcmljZVVtID0gUlZRVDsNCiAgICBpbnZvaWNlZFF1YW50aXR5UHJpY2VVbSA9IElWUVQ7DQoNCiAgICBkb3VibGUgZGJsT3JxdCA9IERvdWJsZS5wYXJzZURvdWJsZShPUlFUKTsNCiAgICBkb3VibGUgZGJsSXZxdCA9IERvdWJsZS5wYXJzZURvdWJsZShJVlFUKTsNCiAgICBkb3VibGUgdmFsdWUyID0gZGJsT3JxdCAtIGRibEl2cXQ7DQogICAgb3BlblF1YW50aXR5UHJpY2VVbSA9IG5ldyBCaWdEZWNpbWFsKFN0cmluZy52YWx1ZU9mKHZhbHVlMikpLnNldFNjYWxlKDQsIEJpZ0RlY2ltYWwuUk9VTkRfRkxPT1IpLnRvUGxhaW5TdHJpbmcoKTsNCg0KICAgIHByaWNlVW1EY2NkID0gYmFzaWNVbURjY2QgPT0gbnVsbCA/ICIwIiA6IGJhc2ljVW1EY2NkLnRyaW0oKTsNCiAgICBwcmljZVVtRG1jZiA9ICIxIjsNCiAgICBwcmljZVVtQ29mYSA9ICIxIjsNCg0KICAgIA0KICAgIGRvdWJsZSBkYmxPcnFhMSA9IERvdWJsZS5wYXJzZURvdWJsZShPUlFBKTsNCiAgICBkb3VibGUgZGJsUnZxYSA9IERvdWJsZS5wYXJzZURvdWJsZShSVlFBKTsNCiAgICBkb3VibGUgZGJsSXZxYTEgPSBEb3VibGUucGFyc2VEb3VibGUoSVZRQSk7DQogICAgaW50IGludERjY2QgPSBJbnRlZ2VyLnZhbHVlT2Yob3JkZXJVbURjY2QpOw0KICAgIGRvdWJsZSB2YWx1ZTEgPSBkYmxSdnFhIC0gZGJsSXZxYTE7DQogICAgb3BlUXVhbnRpdHlPcmRlclVtID0gbmV3IEJpZ0RlY2ltYWwoU3RyaW5nLnZhbHVlT2YodmFsdWUxKSkuc2V0U2NhbGUoaW50RGNjZCwgQmlnRGVjaW1hbC5ST1VORF9GTE9PUikudG9QbGFpblN0cmluZygpOw0KDQogICAgDQogICAgb3BlUXVhbnRpdHlPcmRlclVtID0gb3BlUXVhbnRpdHlPcmRlclVtID09IG51bGwgPyAiIiA6IG9wZVF1YW50aXR5T3JkZXJVbS50cmltKCk7DQogICAgTE5BTSA9IExOQU0gPT0gbnVsbCA/ICIiIDogTE5BTS50cmltKCk7DQogICAgb3JkZXJkUXVhbnRpdHlQcmljZVVtID0gb3JkZXJkUXVhbnRpdHlQcmljZVVtID09IG51bGwgPyAiIiA6IG9yZGVyZFF1YW50aXR5UHJpY2VVbS50cmltKCk7DQogICAgT1JRQSA9IE9SUUEgPT0gbnVsbCA/ICIiIDogT1JRQS50cmltKCk7DQoNCiAgICBCaWdEZWNpbWFsIG9wZW5RdWFudGl0eU9yZGVyVW07DQoNCiAgICBpZiAob3BlUXVhbnRpdHlPcmRlclVtLmVxdWFscygiIikpIHsNCiAgICAgIG9wZW5RdWFudGl0eU9yZGVyVW0gPSBuZXcgQmlnRGVjaW1hbCgiMCIpOw0KICAgIH0gZWxzZSB7DQogICAgICBvcGVuUXVhbnRpdHlPcmRlclVtID0gbmV3IEJpZ0RlY2ltYWwob3BlUXVhbnRpdHlPcmRlclVtKTsNCiAgICB9DQoNCiAgICBCaWdEZWNpbWFsIG5ldHRMaW5lQW1vdW50Ow0KDQogICAgaWYgKExOQU0uZXF1YWxzKCIiKSkgew0KICAgICAgbmV0dExpbmVBbW91bnQgPSBuZXcgQmlnRGVjaW1hbCgiMC4wIik7DQogICAgfSBlbHNlIHsNCiAgICAgIG5ldHRMaW5lQW1vdW50ID0gbmV3IEJpZ0RlY2ltYWwoTE5BTSk7DQogICAgfQ0KDQogICAgQmlnRGVjaW1hbCBvcmRlcmVkUXVhbnRpdHlQcmljZVVtOw0KDQogICAgaWYgKG9yZGVyZFF1YW50aXR5UHJpY2VVbS5lcXVhbHMoIiIpKSB7DQogICAgICBvcmRlcmVkUXVhbnRpdHlQcmljZVVtID0gbmV3IEJpZ0RlY2ltYWwoIjAiKTsNCiAgICB9IGVsc2Ugew0KICAgICAgb3JkZXJlZFF1YW50aXR5UHJpY2VVbSA9IG5ldyBCaWdEZWNpbWFsKG9yZGVyZFF1YW50aXR5UHJpY2VVbSk7DQogICAgfQ0KDQogICAgQmlnRGVjaW1hbCBvcmRlcmVkUXVhbnRpdHk7DQoNCiAgICBpZiAoT1JRQS5lcXVhbHMoIiIpKSB7DQogICAgICBvcmRlcmVkUXVhbnRpdHkgPSBuZXcgQmlnRGVjaW1hbCgiMCIpOw0KICAgIH0gZWxzZSB7DQogICAgICBvcmRlcmVkUXVhbnRpdHkgPSBuZXcgQmlnRGVjaW1hbChPUlFBKTsNCiAgICB9DQoNCiAgICBCaWdEZWNpbWFsIHByaWNlUGVyUGllY2VPcmRlclVtOw0KICAgIGlmIChuZXR0TGluZUFtb3VudC5jb21wYXJlVG8oQmlnRGVjaW1hbC5aRVJPKSA9PSAwIHx8IG9yZGVyZWRRdWFudGl0eS5jb21wYXJlVG8oQmlnRGVjaW1hbC5aRVJPKSA9PSAwKSB7DQogICAgICBwcmljZVBlclBpZWNlT3JkZXJVbSA9IG5ldyBCaWdEZWNpbWFsKCIwLjAiKTsNCiAgICAgIHByaWNlcGVyUGllY2VPdW0gPSBwcmljZVBlclBpZWNlT3JkZXJVbTsNCg0KICAgIH0gZWxzZSB7DQogICAgICBwcmljZVBlclBpZWNlT3JkZXJVbSA9IG5ldHRMaW5lQW1vdW50LmRpdmlkZShvcmRlcmVkUXVhbnRpdHksIG51bWJlck9mRGVjaW1hbHMudG9JbnRlZ2VyKCksIFJvdW5kaW5nTW9kZS5IQUxGX1VQKTsNCiAgICAgIHByaWNlcGVyUGllY2VPdW0gPSBwcmljZVBlclBpZWNlT3JkZXJVbTsNCg0KICAgIH0NCg0KICAgIEJpZ0RlY2ltYWwgcHJpY2VQZXJQaWVjZVByaWNlVW07DQoNCiAgICBpZiAob3JkZXJlZFF1YW50aXR5LmNvbXBhcmVUbyhCaWdEZWNpbWFsLlpFUk8pID09IDAgfHwgb3JkZXJlZFF1YW50aXR5UHJpY2VVbS5jb21wYXJlVG8oQmlnRGVjaW1hbC5aRVJPKSA9PSAwKSB7DQogICAgICBwcmljZVBlclBpZWNlUHJpY2VVbSA9IG5ldyBCaWdEZWNpbWFsKCIwLjAiKTsNCiAgICB9IGVsc2Ugew0KICAgICAgcHJpY2VQZXJQaWVjZVByaWNlVW0gPSBvcmRlcmVkUXVhbnRpdHkuZGl2aWRlKG9yZGVyZWRRdWFudGl0eVByaWNlVW0sIDEyLCBSb3VuZGluZ01vZGUuSEFMRl9VUCkubXVsdGlwbHkocHJpY2VQZXJQaWVjZU9yZGVyVW0pOw0KDQogICAgfQ0KDQogICAgYW1vdW50T3BlbiA9IG9wZW5RdWFudGl0eU9yZGVyVW0ubXVsdGlwbHkocHJpY2VQZXJQaWVjZU9yZGVyVW0pLnNldFNjYWxlKG51bWJlck9mRGVjaW1hbHMudG9JbnRlZ2VyKCksIFJvdW5kaW5nTW9kZS5IQUxGX1VQKS50b1BsYWluU3RyaW5nKCk7DQoNCiAgICBwcmljUGVyUGllY2VQcmljZVVtID0gcHJpY2VQZXJQaWVjZVByaWNlVW0uc2V0U2NhbGUobnVtYmVyT2ZEZWNpbWFscy50b0ludGVnZXIoKSwgUm91bmRpbmdNb2RlLkhBTEZfVVApLnRvUGxhaW5TdHJpbmcoKTsNCiAgICBwcmljUGVyUGllY2VPcmRlclVtID0gcHJpY2VQZXJQaWVjZU9yZGVyVW0uc2V0U2NhbGUobnVtYmVyT2ZEZWNpbWFscy50b0ludGVnZXIoKSwgUm91bmRpbmdNb2RlLkhBTEZfVVApLnRvUGxhaW5TdHJpbmcoKTsNCg0KICAgIGlmIChwcmljZVVuaXRTdGFuZGFyZC50cmltKCkuZXF1YWxzKCIxIikpIHsNCiAgICAgIHN0YW5kYXJkVW0gPSBQUFVOLnRyaW0oKTsNCiAgICAgIGFsdGVybmF0ZVVtID0gUFVVTi50cmltKCk7DQogICAgICBwcmljZVBlclBpZWNlU3RhbmRhcmRVbSA9IHByaWNQZXJQaWVjZVByaWNlVW0gPT0gbnVsbCA/ICIiIDogcHJpY1BlclBpZWNlUHJpY2VVbS50cmltKCk7DQogICAgICBvcGVuUXVhbnRpdHlTdGFuZGFyZFVtID0gb3BlblF1YW50aXR5UHJpY2VVbSA9PSBudWxsID8gIiIgOiBvcGVuUXVhbnRpdHlQcmljZVVtLnRyaW0oKTsNCiAgICAgIGludm9pY2VkUXVhbnRpdHlTdGFuZGFyZFVtID0gaW52b2ljZWRRdWFudGl0eVByaWNlVW0gPT0gbnVsbCA/ICIiIDogaW52b2ljZWRRdWFudGl0eVByaWNlVW0udHJpbSgpOw0KICAgICAgb3JkZXJlZFF1YW50aXR5U3RhbmRhcmRVbSA9IG9yZGVyZFF1YW50aXR5UHJpY2VVbSA9PSBudWxsID8gIiIgOiBvcmRlcmRRdWFudGl0eVByaWNlVW0udHJpbSgpOw0KICAgICAgcmVjZWl2ZWRRdWFudGl0eVN0YW5kYXJkVW0gPSByZWNlaXZlZFF1YW50aXR5UHJpY2VVbSA9PSBudWxsID8gIiIgOiByZWNlaXZlZFF1YW50aXR5UHJpY2VVbS50cmltKCk7DQoNCiAgICAgIGFsdGVybmF0aXZlUXVhbnRpdHlPcGVuID0gb3BlUXVhbnRpdHlPcmRlclVtOw0KICAgICAgYWx0ZXJuYXRpdmVQcmljZSA9IHByaWNQZXJQaWVjZU9yZGVyVW07DQoNCiAgICB9IGVsc2Ugew0KICAgICAgc3RhbmRhcmRVbSA9IFBVVU4udHJpbSgpOw0KICAgICAgYWx0ZXJuYXRlVW0gPSBQUFVOLnRyaW0oKTsNCiAgICAgIHByaWNlUGVyUGllY2VTdGFuZGFyZFVtID0gcHJpY1BlclBpZWNlUHJpY2VVbSA9PSBudWxsID8gIiIgOiBwcmljUGVyUGllY2VQcmljZVVtLnRyaW0oKTsNCiAgICAgIG9wZW5RdWFudGl0eVN0YW5kYXJkVW0gPSBvcGVuUXVhbnRpdHlQcmljZVVtID09IG51bGwgPyAiIiA6IG9wZW5RdWFudGl0eVByaWNlVW0udHJpbSgpOw0KICAgICAgaW52b2ljZWRRdWFudGl0eVN0YW5kYXJkVW0gPSBJVlFBID09IG51bGwgPyAiIiA6IElWUUEudHJpbSgpOw0KICAgICAgb3JkZXJlZFF1YW50aXR5U3RhbmRhcmRVbSA9IE9SUUEgPT0gbnVsbCA/ICIiIDogT1JRQS50cmltKCk7DQogICAgICByZWNlaXZlZFF1YW50aXR5U3RhbmRhcmRVbSA9IFJWUUEgPT0gbnVsbCA/ICIiIDogUlZRQS50cmltKCk7DQoNCiAgICAgIGFsdGVybmF0aXZlUXVhbnRpdHlPcGVuID0gb3BlblF1YW50aXR5UHJpY2VVbTsNCiAgICAgIGFsdGVybmF0aXZlUHJpY2UgPSBwcmljUGVyUGllY2VQcmljZVVtOw0KICAgIH0NCiAgICBlYWNoTGluZS5wdXQoJ2Ftb3VudE9wZW4nLCBhbW91bnRPcGVuKTsNCiAgICBlYWNoTGluZS5wdXQoJ3ByaWNlUGVyUGllY2VTdGFuZGFyZFVtJywgcHJpY2VQZXJQaWVjZVN0YW5kYXJkVW0pOw0KICAgIGVhY2hMaW5lLnB1dCgnc3RhbmRhcmRVbScsIHN0YW5kYXJkVW0pOw0KICAgIGVhY2hMaW5lLnB1dCgnb3BlblF1YW50aXR5U3RhbmRhcmRVbScsIG9wZW5RdWFudGl0eVN0YW5kYXJkVW0pOw0KICAgIGVhY2hMaW5lLnB1dCgnaW52b2ljZWRRdWFudGl0eVN0YW5kYXJkVW0nLCBpbnZvaWNlZFF1YW50aXR5U3RhbmRhcmRVbSk7DQogICAgZWFjaExpbmUucHV0KCdvcmRlcmVkUXVhbnRpdHlTdGFuZGFyZFVtJywgb3JkZXJlZFF1YW50aXR5U3RhbmRhcmRVbSk7DQogICAgZWFjaExpbmUucHV0KCdyZWNlaXZlZFF1YW50aXR5U3RhbmRhcmRVbScsIHJlY2VpdmVkUXVhbnRpdHlTdGFuZGFyZFVtKTsNCiAgICBlYWNoTGluZS5wdXQoJ2FsdGVybmF0ZVVtJywgYWx0ZXJuYXRlVW0pOw0KICAgIGVhY2hMaW5lLnB1dCgnYWx0ZXJuYXRpdmVRdWFudGl0eU9wZW4nLCBhbHRlcm5hdGl2ZVF1YW50aXR5T3Blbik7DQogICAgZWFjaExpbmUucHV0KCdhbHRlcm5hdGl2ZVByaWNlJywgYWx0ZXJuYXRpdmVQcmljZSk7DQogICAgZWFjaExpbmUucHV0KCdvcGVuUXVhbnRpdHlQcmljZVVtJywgb3BlblF1YW50aXR5UHJpY2VVbSk7DQogICAgZWFjaExpbmUucHV0KCdwb3BuRWExMycsIHBvcG5FYTEzKTsNCiAgfQ0KICAgDQogLyoqDQogICogZ2V0IFBPIGxpbmUgcmVjZWlwdCBkZXRhaWxzIGZyb20gdGFibGUgRkdSRUNMDQogICogDQogICovDQoNCiAgcHVibGljIGdldExpbmVSZWNlaXB0cyhTdHJpbmcgZWFjaFB1bm8sIEhhc2h0YWJsZSBlYWNoTGluZSkgew0KICAgIGxpbmVSZWNlaXB0TGlzdCA9IG5ldyBBcnJheUxpc3QgPCBIYXNodGFibGUgPiAoKTsNCiAgICBEQkFjdGlvbiBxdWVyeUZncmVjbCA9IGRhdGFiYXNlLnRhYmxlKCJGR1JFQ0wiKS5pbmRleCgiMDAiKS5zZWxlY3Rpb24oIkYyQ09OTyIsICJGMkRJVkkiLCAiRjJQVU5PIiwgIkYyUE5MSSIsICJGMlBOTFMiLCAiRjJSRVBOIiwgIkYyUkVMUCIsICJGMlJQUVQiLCAiRjJJVlFUIiwgIkYyUlBRQSIsICJGMklWUUEiLCAiRjJDQVdFIiwgIkYySVZDVyIsICJGMlJDQUMiLCAiRjJJQ0FDIiwgIkYyU0NPUCIsICJGMlNDT0MiLCAiRjJJTVNUIiwgIkYyVFJEVCIsICJGMlNFUkEiKS5idWlsZCgpOw0KICAgIERCQ29udGFpbmVyIHJlY29yZEZncmVjbCA9IHF1ZXJ5RmdyZWNsLmdldENvbnRhaW5lcigpOw0KICAgIHJlY29yZEZncmVjbC5zZXQoIkYyQ09OTyIsIEludGVnZXIucGFyc2VJbnQoQ09OTy50cmltKCkpKTsNCiAgICByZWNvcmRGZ3JlY2wuc2V0KCJGMkRJVkkiLCBvRGl2aS50cmltKCkpOw0KICAgIHJlY29yZEZncmVjbC5zZXQoIkYyUFVOTyIsIGVhY2hQdW5vLnRyaW0oKSk7DQogICAgcmVjb3JkRmdyZWNsLnNldCgiRjJQTkxJIiwgZWFjaExpbmUuZ2V0KCdQTkxJJykudG9TdHJpbmcoKS50b0ludGVnZXIoKSk7DQogICAgcmVjb3JkRmdyZWNsLnNldCgiRjJQTkxTIiwgZWFjaExpbmUuZ2V0KCdQTkxTJykudG9TdHJpbmcoKS50b0ludGVnZXIoKSk7DQogICAgDQogICAgaW50IHJlYWRzID0gcXVlcnlGZ3JlY2wucmVhZEFsbChyZWNvcmRGZ3JlY2wsIDUsIGdldEZncmVjbFJlY29yZHMpOw0KICB9DQoNCiAgQ2xvc3VyZSA8ID8gPiBnZXRGZ3JlY2xSZWNvcmRzID0gew0KICAgIERCQ29udGFpbmVyIHJlY29yZCAtPg0KICAgIFN0cmluZyBGMlJFUE4gPSByZWNvcmQuZ2V0KCdGMlJFUE4nKTsNCiAgICBTdHJpbmcgRjJSRUxQID0gcmVjb3JkLmdldCgnRjJSRUxQJyk7DQogICAgU3RyaW5nIEYyUlBRVCA9IHJlY29yZC5nZXQoJ0YyUlBRVCcpOw0KICAgIFN0cmluZyBGMklWUVQgPSByZWNvcmQuZ2V0KCdGMklWUVQnKTsNCiAgICBTdHJpbmcgRjJSUFFBID0gcmVjb3JkLmdldCgnRjJSUFFBJyk7DQogICAgU3RyaW5nIEYySVZRQSA9IHJlY29yZC5nZXQoJ0YySVZRQScpOw0KICAgIFN0cmluZyBGMkNBV0UgPSByZWNvcmQuZ2V0KCdGMkNBV0UnKTsNCiAgICBTdHJpbmcgRjJJVkNXID0gcmVjb3JkLmdldCgnRjJJVkNXJyk7DQogICAgU3RyaW5nIEYyUkNBQyA9IHJlY29yZC5nZXQoJ0YyUkNBQycpOw0KICAgIFN0cmluZyBGMklDQUMgPSByZWNvcmQuZ2V0KCdGMklDQUMnKTsNCiAgICBTdHJpbmcgRjJTQ09QID0gcmVjb3JkLmdldCgnRjJTQ09QJyk7DQogICAgU3RyaW5nIEYyU0NPQyA9IHJlY29yZC5nZXQoJ0YyU0NPQycpOw0KICAgIFN0cmluZyBGMklNU1QgPSByZWNvcmQuZ2V0KCdGMklNU1QnKTsNCiAgICBTdHJpbmcgRjJUUkRUID0gcmVjb3JkLmdldCgnRjJUUkRUJyk7DQogICAgU3RyaW5nIEYyU0VSQSA9IHJlY29yZC5nZXQoJ0YyU0VSQScpOw0KICAgIEhhc2h0YWJsZSB0ZW1wVGFibGUgPSBuZXcgSGFzaHRhYmxlIDwgU3RyaW5nLA0KICAgIFN0cmluZyA+ICgpOw0KICAgIHRlbXBUYWJsZS5wdXQoJ0YyUkVQTicsIEYyUkVQTik7DQogICAgdGVtcFRhYmxlLnB1dCgnRjJSRUxQJywgRjJSRUxQKTsNCiAgICB0ZW1wVGFibGUucHV0KCdGMlJQUVQnLCBGMlJQUVQpOw0KICAgIHRlbXBUYWJsZS5wdXQoJ0YySVZRVCcsIEYySVZRVCk7DQogICAgdGVtcFRhYmxlLnB1dCgnRjJSUFFBJywgRjJSUFFBKTsNCiAgICB0ZW1wVGFibGUucHV0KCdGMklWUUEnLCBGMklWUUEpOw0KICAgIHRlbXBUYWJsZS5wdXQoJ0YyQ0FXRScsIEYyQ0FXRSk7DQogICAgdGVtcFRhYmxlLnB1dCgnRjJJVkNXJywgRjJJVkNXKTsNCiAgICB0ZW1wVGFibGUucHV0KCdGMlJDQUMnLCBGMlJDQUMpOw0KICAgIHRlbXBUYWJsZS5wdXQoJ0YySUNBQycsIEYySUNBQyk7DQogICAgdGVtcFRhYmxlLnB1dCgnRjJTQ09QJywgRjJTQ09QKTsNCiAgICB0ZW1wVGFibGUucHV0KCdGMlNDT0MnLCBGMlNDT0MpOw0KICAgIHRlbXBUYWJsZS5wdXQoJ0YySU1TVCcsIEYySU1TVCk7DQogICAgdGVtcFRhYmxlLnB1dCgnRjJUUkRUJywgRjJUUkRUKTsNCiAgICB0ZW1wVGFibGUucHV0KCdGMlNFUkEnLCBGMlNFUkEpOw0KICAgIGxpbmVSZWNlaXB0TGlzdC5hZGQodGVtcFRhYmxlKTsNCg0KICB9DQoNCiAvKioNCiAgKiBjYWxjdWxhdGUgUE8gbGluZSByZWNlaXB0IHF1YW50aXRpZXMNCiAgKiANCiAgKi8NCiAgIA0KICBwdWJsaWMgY2FsY3VsYXRlUmVjZWlwdFF1YW50aXRpZXMoSGFzaHRhYmxlIGVhY2hMaW5lUmVjZWlwdCwgSGFzaHRhYmxlIGVhY2hMaW5lKSB7DQogICAgU3RyaW5nIFBQVU4gPSBlYWNoTGluZS5nZXQoJ1BQVU4nKTsNCiAgICBTdHJpbmcgUFVVTiA9IGVhY2hMaW5lLmdldCgnUFVVTicpOw0KICAgIFN0cmluZyBVTk1TID0gZWFjaExpbmUuZ2V0KCdVTk1TJyk7DQogICAgU3RyaW5nIENXVU4gPSBlYWNoTGluZS5nZXQoJ0NXVU4nKTsNCg0KICAgIFN0cmluZyBGMlJFUE4gPSBlYWNoTGluZVJlY2VpcHQuZ2V0KCdGMlJFUE4nKTsNCiAgICBTdHJpbmcgRjJSRUxQID0gZWFjaExpbmVSZWNlaXB0LmdldCgnRjJSRUxQJyk7DQogICAgU3RyaW5nIEYyUlBRVCA9IGVhY2hMaW5lUmVjZWlwdC5nZXQoJ0YyUlBRVCcpOw0KICAgIHJlY2VpcHRRdWFudGl0eSA9IEYyUlBRVDsNCg0KICAgIFN0cmluZyBGMklWUVQgPSBlYWNoTGluZVJlY2VpcHQuZ2V0KCdGMklWUVQnKTsNCiAgICBTdHJpbmcgRjJSUFFBID0gZWFjaExpbmVSZWNlaXB0LmdldCgnRjJSUFFBJyk7DQogICAgU3RyaW5nIEYySVZRQSA9IGVhY2hMaW5lUmVjZWlwdC5nZXQoJ0YySVZRQScpOw0KICAgIFN0cmluZyBGMkNBV0UgPSBlYWNoTGluZVJlY2VpcHQuZ2V0KCdGMkNBV0UnKTsNCiAgICBTdHJpbmcgRjJJVkNXID0gZWFjaExpbmVSZWNlaXB0LmdldCgnRjJJVkNXJyk7DQogICAgU3RyaW5nIEYyUkNBQyA9IGVhY2hMaW5lUmVjZWlwdC5nZXQoJ0YyUkNBQycpOw0KICAgIFN0cmluZyBGMklDQUMgPSBlYWNoTGluZVJlY2VpcHQuZ2V0KCdGMklDQUMnKTsNCiAgICBTdHJpbmcgRjJTQ09QID0gZWFjaExpbmVSZWNlaXB0LmdldCgnRjJTQ09QJyk7DQogICAgU3RyaW5nIEYyU0NPQyA9IGVhY2hMaW5lUmVjZWlwdC5nZXQoJ0YyU0NPQycpOw0KICAgIFN0cmluZyBGMklNU1QgPSBlYWNoTGluZVJlY2VpcHQuZ2V0KCdGMklNU1QnKTsNCiAgICBTdHJpbmcgRjJUUkRUID0gZWFjaExpbmVSZWNlaXB0LmdldCgnRjJUUkRUJyk7DQogICAgU3RyaW5nIEYyU0VSQSA9IGVhY2hMaW5lUmVjZWlwdC5nZXQoJ0YyU0VSQScpOw0KDQogICAgUFBVTiA9IFBQVU4gPT0gbnVsbCA/ICIiIDogUFBVTi50cmltKCk7DQogICAgUFVVTiA9IFBVVU4gPT0gbnVsbCA/ICIiIDogUFVVTi50cmltKCk7DQogICAgVU5NUyA9IFVOTVMgPT0gbnVsbCA/ICIiIDogVU5NUy50cmltKCk7DQogICAgQ1dVTiA9IENXVU4gPT0gbnVsbCA/ICIiIDogQ1dVTi50cmltKCk7DQogICAgcHJpY2VVbUNvZmEgPSBwcmljZVVtQ29mYSA9PSBudWxsID8gIjEiIDogcHJpY2VVbUNvZmEudHJpbSgpOw0KICAgIHByaWNlVW1EbWNmID0gcHJpY2VVbURtY2YgPT0gbnVsbCA/ICIxIiA6IHByaWNlVW1EbWNmLnRyaW0oKTsNCg0KICAgIFN0cmluZyByZWNlaXZlZFF1YW50aXR5QWx0VW0gPSAiIjsNCiAgICBTdHJpbmcgb3BlUXVhbnRpdHlPcmRlclVtID0gIiI7DQogICAgU3RyaW5nIG9wZW5DYXRjaFdlaWdodCA9ICIiOw0KICAgIFN0cmluZyBvcGVuUXVhbnRpdHlQdXJjaGFzZU9yZGVyUHJpY2VVbSA9ICIiOw0KDQogICAgU3RyaW5nIG9wZW5BbW91bnRPcmRlclVtID0gIiI7DQogICAgU3RyaW5nIHJlY2VpdmVkUXVhbnRpdHkgPSAiIjsNCg0KICAgIEJpZ0RlY2ltYWwgZEZycHF0MiA9IG5ldyBCaWdEZWNpbWFsKDAuMGQpOw0KICAgIEJpZ0RlY2ltYWwgZEZpdnF0MiA9IG5ldyBCaWdEZWNpbWFsKDAuMGQpOw0KICAgIEJpZ0RlY2ltYWwgZEZycHFhMiA9IG5ldyBCaWdEZWNpbWFsKDAuMGQpOw0KICAgIEJpZ0RlY2ltYWwgZEZpdnFhMiA9IG5ldyBCaWdEZWNpbWFsKDAuMGQpOw0KICAgIEJpZ0RlY2ltYWwgZEZjYXdlMiA9IG5ldyBCaWdEZWNpbWFsKDAuMGQpOw0KICAgIEJpZ0RlY2ltYWwgZEZpdmN3MiA9IG5ldyBCaWdEZWNpbWFsKDAuMGQpOw0KICAgIEJpZ0RlY2ltYWwgZEZyY2FjMiA9IG5ldyBCaWdEZWNpbWFsKDAuMGQpOw0KICAgIEJpZ0RlY2ltYWwgZEZpY2FjMiA9IG5ldyBCaWdEZWNpbWFsKDAuMGQpOw0KICAgIEJpZ0RlY2ltYWwgZEZzY29wMiA9IG5ldyBCaWdEZWNpbWFsKDAuMGQpOw0KICAgIEJpZ0RlY2ltYWwgZEZzY29jMiA9IG5ldyBCaWdEZWNpbWFsKDAuMGQpOw0KICAgIEJpZ0RlY2ltYWwgZEZzZXJhMiA9IG5ldyBCaWdEZWNpbWFsKDAuMGQpOw0KDQogICAgQmlnRGVjaW1hbCBkY29mYSA9IG5ldyBCaWdEZWNpbWFsKHByaWNlVW1Db2ZhKTsNCg0KICAgIGludCBpbnRPcmRlclVtRGNjZCA9IG51bWJlck9mRGVjaW1hbHMudG9JbnRlZ2VyKCk7DQogICAgaW50IGludFByaWNlVW1EY2NkID0gbnVtYmVyT2ZEZWNpbWFscy50b0ludGVnZXIoKTsNCiAgICBpbnQgaW50QmFzaWNVbURjY2QgPSBudW1iZXJPZkRlY2ltYWxzLnRvSW50ZWdlcigpOw0KDQogICAgaWYgKEYyQ0FXRSAhPSBudWxsICYmICFGMkNBV0UudHJpbSgpLmVxdWFscygiIikpDQogICAgICBkRmNhd2UyID0gbmV3IEJpZ0RlY2ltYWwoRjJDQVdFLnRyaW0oKSk7DQogICAgaWYgKEYyUlBRVCAhPSBudWxsICYmICFGMlJQUVQudHJpbSgpLmVxdWFscygiIikpDQogICAgICBkRnJwcXQyID0gbmV3IEJpZ0RlY2ltYWwoRjJSUFFULnRyaW0oKSk7DQogICAgaWYgKEYySVZRVCAhPSBudWxsICYmICFGMklWUVQudHJpbSgpLmVxdWFscygiIikpDQogICAgICBkRml2cXQyID0gbmV3IEJpZ0RlY2ltYWwoRjJJVlFULnRyaW0oKSk7DQogICAgaWYgKEYyUlBRQSAhPSBudWxsICYmICFGMlJQUUEudHJpbSgpLmVxdWFscygiIikpDQogICAgICBkRnJwcWEyID0gbmV3IEJpZ0RlY2ltYWwoRjJSUFFBLnRyaW0oKSk7DQogICAgaWYgKEYySVZRQSAhPSBudWxsICYmICFGMklWUUEudHJpbSgpLmVxdWFscygiIikpDQogICAgICBkRml2cWEyID0gbmV3IEJpZ0RlY2ltYWwoRjJJVlFBLnRyaW0oKSk7DQogICAgaWYgKEYySVZDVyAhPSBudWxsICYmICFGMklWQ1cudHJpbSgpLmVxdWFscygiIikpDQogICAgICBkRml2Y3cyID0gbmV3IEJpZ0RlY2ltYWwoRjJJVkNXLnRyaW0oKSk7DQogICAgaWYgKEYyUkNBQyAhPSBudWxsICYmICFGMlJDQUMudHJpbSgpLmVxdWFscygiIikpDQogICAgICBkRnJjYWMyID0gbmV3IEJpZ0RlY2ltYWwoRjJSQ0FDLnRyaW0oKSk7DQogICAgaWYgKEYySUNBQyAhPSBudWxsICYmICFGMklDQUMudHJpbSgpLmVxdWFscygiIikpDQogICAgICBkRmljYWMyID0gbmV3IEJpZ0RlY2ltYWwoRjJJQ0FDLnRyaW0oKSk7DQogICAgaWYgKEYyU0NPUCAhPSBudWxsICYmICFGMlNDT1AudHJpbSgpLmVxdWFscygiIikpDQogICAgICBkRnNjb3AyID0gbmV3IEJpZ0RlY2ltYWwoRjJTQ09QLnRyaW0oKSk7DQogICAgaWYgKEYyU0NPQyAhPSBudWxsICYmICFGMlNDT0MudHJpbSgpLmVxdWFscygiIikpDQogICAgICBkRnNjb2MyID0gbmV3IEJpZ0RlY2ltYWwoRjJTQ09DLnRyaW0oKSk7DQogICAgaWYgKEYyU0VSQSAhPSBudWxsICYmICFGMlNFUkEudHJpbSgpLmVxdWFscygiIikpDQogICAgICBkRnNlcmEyID0gbmV3IEJpZ0RlY2ltYWwoRjJTRVJBLnRyaW0oKSk7DQogICAgaWYgKG9yZGVyVW1EY2NkICE9IG51bGwgJiYgIW9yZGVyVW1EY2NkLnRyaW0oKS5lcXVhbHMoIiIpKQ0KICAgICAgaW50T3JkZXJVbURjY2QgPSBJbnRlZ2VyLnZhbHVlT2Yob3JkZXJVbURjY2QudHJpbSgpKTsNCiAgICBpZiAocHJpY2VVbURjY2QgIT0gbnVsbCAmJiAhcHJpY2VVbURjY2QudHJpbSgpLmVxdWFscygiIikpDQogICAgICBpbnRQcmljZVVtRGNjZCA9IEludGVnZXIudmFsdWVPZihwcmljZVVtRGNjZC50cmltKCkpOw0KICAgIGlmIChiYXNpY1VtRGNjZCAhPSBudWxsICYmICFiYXNpY1VtRGNjZC50cmltKCkuZXF1YWxzKCIiKSkNCiAgICAgIGludEJhc2ljVW1EY2NkID0gSW50ZWdlci52YWx1ZU9mKGJhc2ljVW1EY2NkLnRyaW0oKSk7DQoNCiAgICBpZiAoZEZjYXdlMi5jb21wYXJlVG8obmV3IEJpZ0RlY2ltYWwoMC4wZCkpICE9IDApIHsNCg0KICAgICAgb3BlbkNhdGNoV2VpZ2h0ID0gZEZjYXdlMi5zdWJ0cmFjdChkRml2Y3cyKS5zZXRTY2FsZShudW1iZXJPZkRlY2ltYWxzLnRvSW50ZWdlcigpLCBSb3VuZGluZ01vZGUuSEFMRl9VUCkudG9QbGFpblN0cmluZygpOw0KDQogICAgfQ0KDQogICAgcmVjZWl2ZWRRdWFudGl0eUFsdFVtID0gZEZycHFhMi5zdWJ0cmFjdChkRml2cWEyKS5zZXRTY2FsZShpbnRPcmRlclVtRGNjZCwgUm91bmRpbmdNb2RlLkhBTEZfVVApLnRvUGxhaW5TdHJpbmcoKTsNCiAgICByZWNlaXZlZFF1YW50aXR5ID0gZEZycHF0Mi5zdWJ0cmFjdChkRml2cXQyKS5zZXRTY2FsZShpbnRCYXNpY1VtRGNjZCwgUm91bmRpbmdNb2RlLkhBTEZfVVApLnRvUGxhaW5TdHJpbmcoKTsNCiAgICBvcGVRdWFudGl0eU9yZGVyVW0gPSBkRnJwcWEyLnN1YnRyYWN0KGRGaXZxYTIpLnNldFNjYWxlKGludEJhc2ljVW1EY2NkLCBSb3VuZGluZ01vZGUuSEFMRl9VUCkudG9QbGFpblN0cmluZygpOw0KDQogICAgQmlnRGVjaW1hbCBkT3BlbkFtb3VudExvY2FsQ3VycmVuY3kgPSBkRnJjYWMyLnN1YnRyYWN0KGRGaWNhYzIpOw0KICAgIG9wZW5BbW91bnRMb2NhbEN1cnJlbmN5ID0gZE9wZW5BbW91bnRMb2NhbEN1cnJlbmN5LnRvUGxhaW5TdHJpbmcoKTsNCg0KICAgIGlmIChvRG1jdS5lcXVhbHMoIjEiKSkgew0KICAgICAgb3BlbkFtb3VudE9yZGVyVW0gPSBkT3BlbkFtb3VudExvY2FsQ3VycmVuY3kuZGl2aWRlKGRGc2VyYTIsIG51bWJlck9mRGVjaW1hbHMudG9JbnRlZ2VyKCksIFJvdW5kaW5nTW9kZS5IQUxGX1VQKS50b1BsYWluU3RyaW5nKCk7DQogICAgfSBlbHNlIGlmIChvRG1jdS5lcXVhbHMoIjIiKSkgew0KICAgICAgb3BlbkFtb3VudE9yZGVyVW0gPSBkT3BlbkFtb3VudExvY2FsQ3VycmVuY3kubXVsdGlwbHkoZEZzZXJhMikuc2V0U2NhbGUobnVtYmVyT2ZEZWNpbWFscy50b0ludGVnZXIoKSwgUm91bmRpbmdNb2RlLkhBTEZfVVApLnRvUGxhaW5TdHJpbmcoKTsNCiAgICB9DQoNCiAgICBlYWNoTGluZVJlY2VpcHQucHV0KCdyZWNlaXZlZFF1YW50aXR5QWx0VW0nLCByZWNlaXZlZFF1YW50aXR5QWx0VW0pOw0KICAgIGVhY2hMaW5lUmVjZWlwdC5wdXQoJ29wZVF1YW50aXR5T3JkZXJVbScsIG9wZVF1YW50aXR5T3JkZXJVbSk7DQogICAgZWFjaExpbmVSZWNlaXB0LnB1dCgnb3BlbkNhdGNoV2VpZ2h0Jywgb3BlbkNhdGNoV2VpZ2h0KTsNCiAgICBlYWNoTGluZVJlY2VpcHQucHV0KCdvcGVuUXVhbnRpdHlQdXJjaGFzZU9yZGVyUHJpY2VVbScsIG9wZW5RdWFudGl0eVB1cmNoYXNlT3JkZXJQcmljZVVtKTsNCiAgICBlYWNoTGluZVJlY2VpcHQucHV0KCdvcGVuQW1vdW50TG9jYWxDdXJyZW5jeScsIG9wZW5BbW91bnRMb2NhbEN1cnJlbmN5KTsNCiAgICBlYWNoTGluZVJlY2VpcHQucHV0KCdvcGVuQW1vdW50T3JkZXJVbScsIG9wZW5BbW91bnRPcmRlclVtKTsNCiAgICBlYWNoTGluZVJlY2VpcHQucHV0KCdyZWNlaXZlZFF1YW50aXR5JywgcmVjZWl2ZWRRdWFudGl0eSk7DQogIH0NCg0KDQogLyoqDQogICogY2hlY2sgb3BlbiByZWNlaXB0IGxpbmUNCiAgKiANCiAgKi8NCiAgIA0KICBwdWJsaWMgYm9vbGVhbiBpZk9wZW5SZWNlaXB0KEhhc2h0YWJsZSBlYWNoTGluZVJlY2VpcHQpIHsNCiAgICBvcGVuTGluZVJlY2VpcHRMaXN0ID0gbmV3IEFycmF5TGlzdCA8IEhhc2h0YWJsZSA+ICgpOw0KICAgIFN0cmluZyBpRmltc3QyID0gZWFjaExpbmVSZWNlaXB0LmdldCgnRjJJTVNUJyk7DQogICAgU3RyaW5nIGlPcGVuUXVhbnRpdHlPcmRlclVtID0gZWFjaExpbmVSZWNlaXB0LmdldCgnb3BlUXVhbnRpdHlPcmRlclVtJyk7DQogICAgaUZpbXN0MiA9IGlGaW1zdDIgPT0gbnVsbCA/ICIiIDogaUZpbXN0Mi50cmltKCk7DQogICAgaU9wZW5RdWFudGl0eU9yZGVyVW0gPSBpT3BlblF1YW50aXR5T3JkZXJVbSA9PSBudWxsID8gIiIgOiBpT3BlblF1YW50aXR5T3JkZXJVbS50cmltKCk7DQogICAgaU9wZW5RdWFudGl0eU9yZGVyVW0gPSBpT3BlblF1YW50aXR5T3JkZXJVbS5lcXVhbHMoIiIpID8gIjAiIDogaU9wZW5RdWFudGl0eU9yZGVyVW0ucmVwbGFjZSgnLCcsICcuJyk7DQogICAgRG91YmxlIGRPcGVuUXVhbnRpdHlPcmRlclVtID0gRG91YmxlLnBhcnNlRG91YmxlKGlPcGVuUXVhbnRpdHlPcmRlclVtKTsNCg0KICAgIHJldHVybiAoIWlGaW1zdDIuZXF1YWxzKCI5IikgJiYgKERvdWJsZS5jb21wYXJlKGRPcGVuUXVhbnRpdHlPcmRlclVtLCAwLjAwMDFkKSA+IDAgfHwgRG91YmxlLmNvbXBhcmUoZE9wZW5RdWFudGl0eU9yZGVyVW0sIC0wLjAwMDFkKSA8IDApKTsNCiAgfQ0KDQogLyoqDQogICogc2VuZCBQTyBsaW5lIHJlY2VpcHQgZGV0YWlscyB0byBvdXRwdXQNCiAgKiANCiAgKi8NCiAgIA0KICBwdWJsaWMgd3JpdGVSZWNlaXB0cyhTdHJpbmcgZWFjaFB1bm8sIEhhc2h0YWJsZSBlYWNoT3BlbkxpbmVSZWNlaXB0LCBIYXNodGFibGUgZWFjaExpbmUpIHsNCiAgICBzdGFuZGFyZFVuaXRNZWFzdXJlID0gZWFjaExpbmUuZ2V0KCdzdGFuZGFyZFVtJykudG9TdHJpbmcoKTsNCiAgICB1bml0TWVhc3VyZSA9IGVhY2hMaW5lLmdldCgnVU5NUycpLnRvU3RyaW5nKCk7DQogICAgYWx0ZXJuYXRlVW5pdE1lYXN1cmUgPSBlYWNoTGluZS5nZXQoJ2FsdGVybmF0ZVVtJykudG9TdHJpbmcoKTsNCiAgICBTdHJpbmcgUlFBVU0gPSBlYWNoT3BlbkxpbmVSZWNlaXB0LmdldCgncmVjZWl2ZWRRdWFudGl0eUFsdFVtJyk7DQogICAgU3RyaW5nIE9BTEMgPSBlYWNoT3BlbkxpbmVSZWNlaXB0LmdldCgnb3BlbkFtb3VudExvY2FsQ3VycmVuY3knKS50b1N0cmluZygpOw0KICAgIGRvdWJsZSBSUUFNID0gRG91YmxlLnBhcnNlRG91YmxlKFJRQVVNKTsNCiAgICBTdHJpbmcgY29udmVydGVkUHJpY2UgPSAiIjsNCiAgICANCiAgICBpZiAoUlFBTSAhPSAwLjApIHsNCiAgICAgIA0KICAgICAgZG91YmxlIGNvbnZlcnRlZCA9IERvdWJsZS5wYXJzZURvdWJsZShlYWNoT3BlbkxpbmVSZWNlaXB0LmdldCgnb3BlbkFtb3VudE9yZGVyVW0nKS50b1N0cmluZygpKSAvIERvdWJsZS5wYXJzZURvdWJsZShlYWNoT3BlbkxpbmVSZWNlaXB0LmdldCgncmVjZWl2ZWRRdWFudGl0eUFsdFVtJykudG9TdHJpbmcoKSk7DQogICAgICANCiAgICAgIERlY2ltYWxGb3JtYXQgZGVjT2JqZWN0ID0gbmV3IERlY2ltYWxGb3JtYXQoIiMuIyMjIyMjIik7DQogICAgICBjb252ZXJ0ZWRQcmljZSA9IGRlY09iamVjdC5mb3JtYXQoY29udmVydGVkKTsNCiAgICB9IGVsc2Ugew0KICAgICAgDQogICAgICBkb3VibGUgY29udmVydGVkID0gMC4wMDAwMDA7DQogICAgICBEZWNpbWFsRm9ybWF0IGRlY09iamVjdCA9IG5ldyBEZWNpbWFsRm9ybWF0KCIjLiMjIyMjIyIpOw0KICAgICAgY29udmVydGVkUHJpY2UgPSBkZWNPYmplY3QuZm9ybWF0KGNvbnZlcnRlZCk7DQogICAgfQ0KICAgIGRvdWJsZSB2YWx1ZVJlY1F0eSA9IERvdWJsZS5wYXJzZURvdWJsZShlYWNoT3BlbkxpbmVSZWNlaXB0LmdldCgncmVjZWl2ZWRRdWFudGl0eUFsdFVtJykudG9TdHJpbmcoKSk7DQoNCiAgICBpZiAodmFsdWVSZWNRdHkgPiAwIHx8IHZhbHVlUmVjUXR5IDwgMCkgew0KICAgICAgaWYgKGVhY2hMaW5lLmdldCgnUFVTTCcpLnRvU3RyaW5nKCkgPCAnODUnICYmICFvSWFwYy5lcXVhbHMoIjEiKSkgew0KDQogICAgICAgIG1pLm91dERhdGEucHV0KCdSQ1RQJywgJ0xSJyk7DQogICAgICAgIG1pLm91dERhdGEucHV0KCdQVU5PJywgZWFjaFB1bm8pOw0KICAgICAgICBtaS5vdXREYXRhLnB1dCgnUE5MSScsIGVhY2hMaW5lLmdldCgnUE5MSScpLnRvU3RyaW5nKCkpOw0KICAgICAgICBtaS5vdXREYXRhLnB1dCgnUE5MUycsIGVhY2hMaW5lLmdldCgnUE5MUycpLnRvU3RyaW5nKCkpOw0KICAgICAgICBtaS5vdXREYXRhLnB1dCgnSVROTycsIGVhY2hMaW5lLmdldCgnSVROTycpLnRvU3RyaW5nKCkpOw0KDQogICAgICAgIG1pLm91dERhdGEucHV0KCdQTkxJJywgZWFjaExpbmUuZ2V0KCdQTkxJJykudG9TdHJpbmcoKSk7DQogICAgICAgIG1pLm91dERhdGEucHV0KCdQTkxTJywgZWFjaExpbmUuZ2V0KCdQTkxTJykudG9TdHJpbmcoKSk7DQogICAgICAgIG1pLm91dERhdGEucHV0KCdUUkRUJywgZWFjaExpbmUuZ2V0KCdUUkRUJykudG9TdHJpbmcoKSk7DQogICAgICAgIG1pLm91dERhdGEucHV0KCdMV0hMJywgZWFjaExpbmUuZ2V0KCdXSExPJykudG9TdHJpbmcoKSk7DQogICAgICAgIG1pLm91dERhdGEucHV0KCdJVE5PJywgZWFjaExpbmUuZ2V0KCdJVE5PJykudG9TdHJpbmcoKSk7DQogICAgICAgIG1pLm91dERhdGEucHV0KCdQSVREJywgZWFjaExpbmUuZ2V0KCdQSVREJykudG9TdHJpbmcoKSk7DQogICAgICAgIG1pLm91dERhdGEucHV0KCdQSVRUJywgZWFjaExpbmUuZ2V0KCdQSVRUJykudG9TdHJpbmcoKSk7DQogICAgICAgIG1pLm91dERhdGEucHV0KCdTSVRFJywgZWFjaExpbmUuZ2V0KCdTSVRFJykudG9TdHJpbmcoKSk7DQogICAgICAgIG1pLm91dERhdGEucHV0KCdDQVFBJywgZWFjaExpbmUuZ2V0KCdDQVFBJykudG9TdHJpbmcoKSk7DQogICAgICAgIG1pLm91dERhdGEucHV0KCdSSlFBJywgZWFjaExpbmUuZ2V0KCdSSlFBJykudG9TdHJpbmcoKSk7DQogICAgICAgIG1pLm91dERhdGEucHV0KCdTRFFBJywgZWFjaExpbmUuZ2V0KCdTRFFBJykudG9TdHJpbmcoKSk7DQogICAgICAgIG1pLm91dERhdGEucHV0KCdPUlFBJywgZWFjaExpbmUuZ2V0KCdPUlFBJykudG9TdHJpbmcoKSk7DQogICAgICAgIG1pLm91dERhdGEucHV0KCdJVlFBJywgZWFjaExpbmUuZ2V0KCdJVlFBJykudG9TdHJpbmcoKSk7DQogICAgICAgIG1pLm91dERhdGEucHV0KCdSVlFBJywgZWFjaExpbmUuZ2V0KCdSVlFBJykudG9TdHJpbmcoKSk7DQogICAgICAgIG1pLm91dERhdGEucHV0KCdDRlFBJywgZWFjaExpbmUuZ2V0KCdDRlFBJykudG9TdHJpbmcoKSk7DQogICAgICAgIG1pLm91dERhdGEucHV0KCdPUVBVJywgZWFjaExpbmUuZ2V0KCdvcGVuUXVhbnRpdHlQcmljZVVtJykudG9TdHJpbmcoKSk7DQogICAgICAgIG1pLm91dERhdGEucHV0KCdQVVJDJywgZWFjaExpbmUuZ2V0KCdQVVJDJykudG9TdHJpbmcoKSk7DQogICAgICAgIG1pLm91dERhdGEucHV0KCdMQlVZJywgZWFjaExpbmUuZ2V0KCdCVVlFJykudG9TdHJpbmcoKSk7DQogICAgICAgIG1pLm91dERhdGEucHV0KCdTVFVNJywgZWFjaExpbmUuZ2V0KCdzdGFuZGFyZFVtJykudG9TdHJpbmcoKSk7DQogICAgICAgIG1pLm91dERhdGEucHV0KCdVTk1TJywgZWFjaExpbmUuZ2V0KCdVTk1TJykudG9TdHJpbmcoKSk7DQogICAgICAgIG1pLm91dERhdGEucHV0KCdBTFVNJywgZWFjaExpbmUuZ2V0KCdhbHRlcm5hdGVVbScpLnRvU3RyaW5nKCkpOw0KICAgICAgICBpZiAoZWFjaE9wZW5MaW5lUmVjZWlwdC5nZXQoJ29wZW5DYXRjaFdlaWdodCcpLnRvU3RyaW5nKCkgIT0gIiIpIHsNCiAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnQ1dVTicsIGVhY2hMaW5lLmdldCgnQ1dVTicpLnRvU3RyaW5nKCkpOw0KICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgIG1pLm91dERhdGEucHV0KCdDV1VOJywgIiIpOw0KICAgICAgICB9DQogICAgICAgIG1pLm91dERhdGEucHV0KCdMTkFNJywgZWFjaExpbmUuZ2V0KCdMTkFNJykudG9TdHJpbmcoKSk7DQogICAgICAgIG1pLm91dERhdGEucHV0KCdQVVBSJywgZWFjaExpbmUuZ2V0KCdwcmljZVBlclBpZWNlU3RhbmRhcmRVbScpLnRvU3RyaW5nKCkpOw0KICAgICAgICBtaS5vdXREYXRhLnB1dCgnUFVRVCcsIGVhY2hMaW5lLmdldCgnUFVRVCcpLnRvU3RyaW5nKCkpOw0KICAgICAgICBtaS5vdXREYXRhLnB1dCgnQUxQUicsIGVhY2hMaW5lLmdldCgnYWx0ZXJuYXRpdmVQcmljZScpLnRvU3RyaW5nKCkpOw0KICAgICAgICBtaS5vdXREYXRhLnB1dCgnUFRDRCcsIGVhY2hMaW5lLmdldCgnVlRDRCcpLnRvU3RyaW5nKCkpOw0KICAgICAgICBpZiAoZWFjaExpbmUuZ2V0KCdWVENEJykudG9TdHJpbmcoKS5sZW5ndGgoKSA9PSAxKSB7DQoNCiAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnVlRDRCcsICcwJyArIGVhY2hMaW5lLmdldCgnVlRDRCcpLnRvU3RyaW5nKCkpOw0KICAgICAgICB9IGVsc2Ugew0KDQogICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ1ZUQ0QnLCBlYWNoTGluZS5nZXQoJ1ZUQ0QnKS50b1N0cmluZygpKTsNCiAgICAgICAgfQ0KICAgICAgICBtaS5vdXREYXRhLnB1dCgnR1JNVCcsIGVhY2hMaW5lLmdldCgnR1JNVCcpLnRvU3RyaW5nKCkpOw0KICAgICAgICBtaS5vdXREYXRhLnB1dCgnTE1PRCcsIGVhY2hMaW5lLmdldCgnTU9ETCcpLnRvU3RyaW5nKCkpOw0KICAgICAgICBtaS5vdXREYXRhLnB1dCgnTFRFRCcsIGVhY2hMaW5lLmdldCgnVEVETCcpLnRvU3RyaW5nKCkpOw0KICAgICAgICBtaS5vdXREYXRhLnB1dCgnTFRFTCcsIGVhY2hMaW5lLmdldCgnVEVMMScpLnRvU3RyaW5nKCkpOw0KICAgICAgICBtaS5vdXREYXRhLnB1dCgnTFBTTCcsIGVhY2hMaW5lLmdldCgnUFVTTCcpLnRvU3RyaW5nKCkpOw0KICAgICAgICBtaS5vdXREYXRhLnB1dCgnTFBTVCcsIGVhY2hMaW5lLmdldCgnUFVTVCcpLnRvU3RyaW5nKCkpOw0KICAgICAgICBtaS5vdXREYXRhLnB1dCgnUE9QTicsIGVhY2hMaW5lLmdldCgncG9wbkVhMTMnKS50b1N0cmluZygpKTsNCiAgICAgICAgbWkub3V0RGF0YS5wdXQoJ1JPUkMnLCBlYWNoTGluZS5nZXQoJ1JPUkMnKS50b1N0cmluZygpKTsNCiAgICAgICAgbWkub3V0RGF0YS5wdXQoJ1JPUk4nLCBlYWNoTGluZS5nZXQoJ1JPUk4nKS50b1N0cmluZygpKTsNCiAgICAgICAgbWkub3V0RGF0YS5wdXQoJ1JPUkwnLCBlYWNoTGluZS5nZXQoJ1JPUkwnKS50b1N0cmluZygpKTsNCiAgICAgICAgbWkub3V0RGF0YS5wdXQoJ1JPUlgnLCBlYWNoTGluZS5nZXQoJ1JPUlgnKS50b1N0cmluZygpKTsNCiAgICAgICAgbWkub3V0RGF0YS5wdXQoJ1NVRE8nLCBlYWNoTGluZS5nZXQoJ1NVRE8nKS50b1N0cmluZygpKTsNCiAgICAgICAgbWkub3V0RGF0YS5wdXQoJ0ZSUkMnLCBlYWNoTGluZS5nZXQoJ0ZSUkMnKS50b1N0cmluZygpKTsNCiAgICAgICAgbWkub3V0RGF0YS5wdXQoJ0ZSUkUnLCBlYWNoTGluZS5nZXQoJ0ZSUkUnKS50b1N0cmluZygpKTsNCiAgICAgICAgbWkub3V0RGF0YS5wdXQoJ0FEUUEnLCBlYWNoTGluZS5nZXQoJ0FEUUEnKS50b1N0cmluZygpKTsNCiAgICAgICAgbWkub3V0RGF0YS5wdXQoJ09SUVQnLCBlYWNoTGluZS5nZXQoJ09SUVQnKS50b1N0cmluZygpKTsNCiAgICAgICAgbWkub3V0RGF0YS5wdXQoJ0FNT1AnLCBlYWNoTGluZS5nZXQoJ2Ftb3VudE9wZW4nKS50b1N0cmluZygpKTsNCiAgICAgICAgbWkub3V0RGF0YS5wdXQoJ0FNT1InLCBlYWNoTGluZS5nZXQoJ0xOQU0nKS50b1N0cmluZygpKTsNCiAgICAgICAgbWkub3V0RGF0YS5wdXQoJ1BSQ0UnLCBjb252ZXJ0ZWRQcmljZSkNCiAgICAgICAgbWkub3V0RGF0YS5wdXQoJ1VOSVQnLCBlYWNoTGluZS5nZXQoJ2FsdGVybmF0ZVVtJykudG9TdHJpbmcoKSk7DQogICAgICAgIG1pLm91dERhdGEucHV0KCdPUFFUJywgZWFjaExpbmUuZ2V0KCdvcGVuUXVhbnRpdHlTdGFuZGFyZFVtJykudG9TdHJpbmcoKSk7DQogICAgICAgIG1pLm91dERhdGEucHV0KCdRVElWJywgZWFjaExpbmUuZ2V0KCdpbnZvaWNlZFF1YW50aXR5U3RhbmRhcmRVbScpLnRvU3RyaW5nKCkpOw0KICAgICAgICBtaS5vdXREYXRhLnB1dCgnUVRPUicsIGVhY2hMaW5lLmdldCgnb3JkZXJlZFF1YW50aXR5U3RhbmRhcmRVbScpLnRvU3RyaW5nKCkpDQogICAgICAgIG1pLm91dERhdGEucHV0KCdRVFJWJywgZWFjaExpbmUuZ2V0KCdyZWNlaXZlZFF1YW50aXR5U3RhbmRhcmRVbScpLnRvU3RyaW5nKCkpOw0KICAgICAgICBtaS5vdXREYXRhLnB1dCgnQUxUVScsIGVhY2hMaW5lLmdldCgnYWx0ZXJuYXRlVW0nKS50b1N0cmluZygpKTsNCiAgICAgICAgbWkub3V0RGF0YS5wdXQoJ0FMUU8nLCBlYWNoTGluZS5nZXQoJ2FsdGVybmF0aXZlUXVhbnRpdHlPcGVuJykudG9TdHJpbmcoKSk7DQogICAgICAgIG1pLm91dERhdGEucHV0KCdBTFRQJywgZWFjaExpbmUuZ2V0KCdhbHRlcm5hdGl2ZVByaWNlJykudG9TdHJpbmcoKSk7DQogICAgICAgIG1pLm91dERhdGEucHV0KCdSRUxQJywgZWFjaE9wZW5MaW5lUmVjZWlwdC5nZXQoJ0YyUkVMUCcpLnRvU3RyaW5nKCkpOw0KICAgICAgICBtaS5vdXREYXRhLnB1dCgnUlBOTScsIGVhY2hPcGVuTGluZVJlY2VpcHQuZ2V0KCdGMlJFUE4nKS50b1N0cmluZygpKTsNCiAgICAgICAgbWkub3V0RGF0YS5wdXQoJ1JQRFQnLCBlYWNoT3BlbkxpbmVSZWNlaXB0LmdldCgnRjJUUkRUJykudG9TdHJpbmcoKSk7DQogICAgICAgIG1pLm91dERhdGEucHV0KCdSUFFUJywgZWFjaE9wZW5MaW5lUmVjZWlwdC5nZXQoJ3JlY2VpdmVkUXVhbnRpdHknKS50b1N0cmluZygpKTsNCiAgICAgICAgbWkub3V0RGF0YS5wdXQoJ1JRQUwnLCBlYWNoT3BlbkxpbmVSZWNlaXB0LmdldCgncmVjZWl2ZWRRdWFudGl0eUFsdFVtJykudG9TdHJpbmcoKSk7DQogICAgICAgIG1pLm91dERhdGEucHV0KCdPQU9VJywgZWFjaE9wZW5MaW5lUmVjZWlwdC5nZXQoJ29wZW5BbW91bnRPcmRlclVtJykudG9TdHJpbmcoKSk7DQogICAgICAgIG1pLm91dERhdGEucHV0KCdPQUxDJywgZWFjaE9wZW5MaW5lUmVjZWlwdC5nZXQoJ29wZW5BbW91bnRMb2NhbEN1cnJlbmN5JykudG9TdHJpbmcoKSk7DQogICAgICAgIG1pLm91dERhdGEucHV0KCdPUENXJywgZWFjaE9wZW5MaW5lUmVjZWlwdC5nZXQoJ29wZW5DYXRjaFdlaWdodCcpLnRvU3RyaW5nKCkpOw0KICAgICAgICBtaS5vdXREYXRhLnB1dCgnT1FPVScsIGVhY2hPcGVuTGluZVJlY2VpcHQuZ2V0KCdyZWNlaXZlZFF1YW50aXR5QWx0VW0nKS50b1N0cmluZygpKTsNCiAgICAgICAgbWkub3V0RGF0YS5wdXQoJ09RUE0nLCBlYWNoT3BlbkxpbmVSZWNlaXB0LmdldCgnb3BlblF1YW50aXR5UHVyY2hhc2VPcmRlclByaWNlVW0nKS50b1N0cmluZygpKTsNCiAgICAgICAgbWkud3JpdGUoKTsNCiAgICAgIH0NCiAgICB9DQoNCiAgfQ0KDQogLyoqDQogICogcmV0cml2ZSByZWNlaXB0IGNoYXJnZXMgZnJvbSB0YWJsZSBGR1JQQ0wNCiAgKiANCiAgKi8NCiAgIA0KICBwdWJsaWMgZ2F0aGVyUmVjZWlwdENoYXJnZXMoU3RyaW5nIGVhY2hQdW5vLCBIYXNodGFibGUgZWFjaExpbmVSZWNlaXB0LCBIYXNodGFibGUgZWFjaExpbmUpIHsNCiAgICBsaW5lQ2hhcmdlUmVjZWlwdExpc3QgPSBuZXcgQXJyYXlMaXN0IDwgSGFzaHRhYmxlID4gKCk7DQogICAgREJBY3Rpb24gcXVlcnlGZ3JwY2wgPSBkYXRhYmFzZS50YWJsZSgiRkdSUENMIikuaW5kZXgoIjAwIikuc2VsZWN0aW9uKCJGM0NPTk8iLCAiRjNESVZJIiwgIkYzUFVOTyIsICJGM1BOTEkiLCAiRjNQTkxTIiwgIkYzUkVQTiIsICJGM1JFTFAiLCAiRjNDRFNFIiwgIkYzQ0VJRCIsICJGM0VYVFkiLCAiRjNTQ09DIiwgIkYzU0NPUCIsICJGM0lWUVQiLCAiRjNJVlFBIiwgIkYzUkNBQyIsICJGM0lDQUMiKS5idWlsZCgpOw0KICAgIERCQ29udGFpbmVyIHJlY29yZEZncnBjbCA9IHF1ZXJ5RmdycGNsLmdldENvbnRhaW5lcigpOw0KICAgIHJlY29yZEZncnBjbC5zZXQoIkYzQ09OTyIsIEludGVnZXIucGFyc2VJbnQoQ09OTy50cmltKCkpKTsNCiAgICByZWNvcmRGZ3JwY2wuc2V0KCJGM0RJVkkiLCBvRGl2aS50cmltKCkpOw0KICAgIHJlY29yZEZncnBjbC5zZXQoIkYzUFVOTyIsIGVhY2hQdW5vLnRyaW0oKSk7DQogICAgcmVjb3JkRmdycGNsLnNldCgiRjNQTkxJIiwgZWFjaExpbmUuZ2V0KCdQTkxJJykudG9TdHJpbmcoKS50b0ludGVnZXIoKSk7DQogICAgcmVjb3JkRmdycGNsLnNldCgiRjNQTkxTIiwgZWFjaExpbmUuZ2V0KCdQTkxTJykudG9TdHJpbmcoKS50b0ludGVnZXIoKSk7DQogICAgcmVjb3JkRmdycGNsLnNldCgnRjNSRVBOJywgTG9uZy5wYXJzZUxvbmcoZWFjaExpbmVSZWNlaXB0LmdldCgnRjJSRVBOJykudG9TdHJpbmcoKSkpOw0KICAgIHJlY29yZEZncnBjbC5zZXQoJ0YzUkVMUCcsIEludGVnZXIucGFyc2VJbnQoZWFjaExpbmVSZWNlaXB0LmdldCgnRjJSRUxQJykudG9TdHJpbmcoKSkpOw0KICAgIA0KICAgIGludCByZWFkcyA9IHF1ZXJ5RmdycGNsLnJlYWRBbGwocmVjb3JkRmdycGNsLCA3LCBnZXRGZ3JwY2xSZWNvcmRzKTsNCiAgfQ0KDQogIENsb3N1cmUgPCA/ID4gZ2V0RmdycGNsUmVjb3JkcyA9IHsNCiAgICBEQkNvbnRhaW5lciByZWNvcmQgLT4NCiAgICBIYXNodGFibGUgdGVtcFRhYmxlID0gbmV3IEhhc2h0YWJsZSA8IFN0cmluZywNCiAgICBTdHJpbmcgPiAoKTsNCiAgICB0ZW1wVGFibGUucHV0KCdjZHNlTGNyJywgcmVjb3JkLmdldCgnRjNDRFNFJykudG9TdHJpbmcoKSk7DQogICAgdGVtcFRhYmxlLnB1dCgnY2VpZExjcicsIHJlY29yZC5nZXQoJ0YzQ0VJRCcpLnRvU3RyaW5nKCkpOw0KICAgIHRlbXBUYWJsZS5wdXQoJ2V4dHlMY3InLCByZWNvcmQuZ2V0KCdGM0VYVFknKS50b1N0cmluZygpKTsNCiAgICB0ZW1wVGFibGUucHV0KCdzY29jTGNyJywgcmVjb3JkLmdldCgnRjNTQ09DJykudG9TdHJpbmcoKSk7DQogICAgdGVtcFRhYmxlLnB1dCgnc2NvcExjcicsIHJlY29yZC5nZXQoJ0YzU0NPUCcpLnRvU3RyaW5nKCkpOw0KICAgIHRlbXBUYWJsZS5wdXQoJ2l2cXRMY3InLCByZWNvcmQuZ2V0KCdGM0lWUVQnKS50b1N0cmluZygpKTsNCiAgICB0ZW1wVGFibGUucHV0KCdwdW5vTGNyJywgcmVjb3JkLmdldCgnRjNQVU5PJykudG9TdHJpbmcoKSArIHJlY29yZC5nZXQoJ0YzUE5MSScpLnRvU3RyaW5nKCkgKyByZWNvcmQuZ2V0KCdGM1BOTFMnKS50b1N0cmluZygpKTsNCiAgICB0ZW1wVGFibGUucHV0KCdpdnFhTGNyJywgcmVjb3JkLmdldCgnRjNJVlFBJykudG9TdHJpbmcoKSk7DQogICAgdGVtcFRhYmxlLnB1dCgncmNhY0xjcicsIHJlY29yZC5nZXQoJ0YzUkNBQycpLnRvU3RyaW5nKCkpOw0KICAgIHRlbXBUYWJsZS5wdXQoJ2ljYWNMY3InLCByZWNvcmQuZ2V0KCdGM0lDQUMnKS50b1N0cmluZygpKTsNCiAgICB0ZW1wVGFibGVDaGFyZ2VzLnB1dChyZWNvcmQuZ2V0KCdGM1BVTk8nKS50b1N0cmluZygpLnRyaW0oKSArIHJlY29yZC5nZXQoJ0YzUE5MSScpLnRvU3RyaW5nKCkudHJpbSgpICsgcmVjb3JkLmdldCgnRjNQTkxTJykudG9TdHJpbmcoKS50cmltKCkgKyByZWNvcmQuZ2V0KCdGM0NEU0UnKS50b1N0cmluZygpLnRyaW0oKSwgcmVjb3JkLmdldCgnRjNJVlFBJykudG9TdHJpbmcoKS50cmltKCkpOw0KICAgIHRlbXBUYWJsZUNoYXJnZXMxLnB1dChyZWNvcmQuZ2V0KCdGM1BVTk8nKS50b1N0cmluZygpLnRyaW0oKSwgcmVjb3JkLmdldCgnRjNQTkxJJykudG9TdHJpbmcoKS50cmltKCkpOw0KICAgIGxpbmVDaGFyZ2VSZWNlaXB0TGlzdC5hZGQodGVtcFRhYmxlKTsNCiAgICANCiAgfQ0KDQogIC8qKiByZXRyaXZlIGNoYXJnZSB0ZXh0IHVzaW5nIFBQUzI4ME1JLkdldEVsZW1lbnQNCiAgICogDQogICAqLw0KICAgDQogICANCiAgcHVibGljIGdldENoYXJnZVRleHQoSGFzaHRhYmxlIGVhY2hMaW5lQ2hhcmdlUmVjZWlwdCkgew0KICAgIFN0cmluZyBDRUlEID0gZWFjaExpbmVDaGFyZ2VSZWNlaXB0LmdldCgnY2VpZExjcicpOw0KICAgIFN0cmluZyBUWDMwID0gIiI7DQogICAgYm9vbGVhbiByZWNvcmRFeGlzdHMgPSB0cnVlOw0KICAgIGRlZiBjYWxsYmFjayA9IHsNCiAgICAgIE1hcCA8IFN0cmluZywNCiAgICAgIFN0cmluZyA+IHJlc3VsdHMgLT4NCiAgICAgIHJlY29yZEV4aXN0cyA9ICFyZXN1bHRzLmdldCgnZXJyb3InKTsNCiAgICAgIGlmIChyZWNvcmRFeGlzdHMpIHsNCiAgICAgICAgVFgzMCA9IHJlc3VsdHMuZ2V0KCdUWDMwJyk7DQoNCiAgICAgIH0NCiAgICAgIGVhY2hMaW5lQ2hhcmdlUmVjZWlwdC5wdXQoJ3R4MzBMY3InLCBUWDMwKTsNCg0KICAgIH0NCiAgICBkZWYgcGFyYW1zID0gWyJDRUlEIjogQ0VJRC50cmltKCldOw0KICAgIG1pQ2FsbGVyLmNhbGwoIlBQUzI4ME1JIiwgIkdldEVsZW1lbnQiLCBwYXJhbXMsIGNhbGxiYWNrKTsNCiAgfQ0KICANCiAgLyoqIGNhbGN1bGF0ZSByZWNlaXB0IGNoYXJnZSBxdWFudGl0aWVzDQogICAqLw0KICBwdWJsaWMgY2FsY3VsYXRlUmVjZWlwdENoYXJnZVF1YW50aXRpZXMoSGFzaHRhYmxlIGVhY2hMaW5lLCBIYXNodGFibGUgZWFjaExpbmVSZWNlaXB0LCBIYXNodGFibGUgZWFjaExpbmVDaGFyZ2VSZWNlaXB0KSB7DQogICAgU3RyaW5nIFBVVU4gPSBlYWNoTGluZS5nZXQoJ1BVVU4nKTsNCiAgICBTdHJpbmcgUFBVTiA9IGVhY2hMaW5lLmdldCgnUFBVTicpOw0KICAgIFN0cmluZyBGMkNBV0UgPSBlYWNoTGluZVJlY2VpcHQuZ2V0KCdGMkNBV0UnKTsNCiAgICBTdHJpbmcgUlBRQSA9IGVhY2hMaW5lUmVjZWlwdC5nZXQoJ0YyUlBRQScpOw0KICAgIFN0cmluZyBGMlJQUVQgPSBlYWNoTGluZVJlY2VpcHQuZ2V0KCdGMlJQUVQnKTsNCiAgICBTdHJpbmcgRjNJVlFUID0gZWFjaExpbmVDaGFyZ2VSZWNlaXB0LmdldCgnaXZxdExjcicpOw0KICAgIFN0cmluZyBGMlJQUUEgPSBlYWNoTGluZVJlY2VpcHQuZ2V0KCdGMlJQUUEnKTsNCiAgICBTdHJpbmcgRjNJVlFBID0gZWFjaExpbmVDaGFyZ2VSZWNlaXB0LmdldCgnaXZxYUxjcicpOw0KICAgIGludlF0eSA9IEYzSVZRQTsNCiAgICANCiAgICBTdHJpbmcgRjJJVkNXID0gZWFjaExpbmVSZWNlaXB0LmdldCgnRjJJVkNXJyk7DQogICAgU3RyaW5nIEYzUkNBQyA9IGVhY2hMaW5lQ2hhcmdlUmVjZWlwdC5nZXQoJ3JjYWNMY3InKTsNCiAgICBTdHJpbmcgRjNJQ0FDID0gZWFjaExpbmVDaGFyZ2VSZWNlaXB0LmdldCgnaWNhY0xjcicpOw0KICAgIFN0cmluZyBGM1NDT1AgPSBlYWNoTGluZUNoYXJnZVJlY2VpcHQuZ2V0KCdzY29wTGNyJyk7DQogICAgU3RyaW5nIEYzU0NPQyA9IGVhY2hMaW5lQ2hhcmdlUmVjZWlwdC5nZXQoJ3Njb2NMY3InKTsNCiAgICBTdHJpbmcgRjJTRVJBID0gZWFjaExpbmVSZWNlaXB0LmdldCgnRjJTRVJBJyk7DQoNCiAgICBQVVVOID0gUFVVTiA9PSBudWxsID8gIiIgOiBQVVVOLnRyaW0oKTsNCiAgICBQUFVOID0gUFBVTiA9PSBudWxsID8gIiIgOiBQUFVOLnRyaW0oKTsNCiAgICBGMkNBV0UgPSBGMkNBV0UgPT0gbnVsbCA/ICIiIDogRjJDQVdFLnRyaW0oKTsNCiAgICBSUFFBID0gUlBRQSA9PSBudWxsID8gIiIgOiBSUFFBLnRyaW0oKTsNCiAgICBGMlJQUVQgPSBGMlJQUVQgPT0gbnVsbCA/ICIiIDogRjJSUFFULnRyaW0oKTsNCiAgICBGM0lWUVQgPSBGM0lWUVQgPT0gbnVsbCA/ICIiIDogRjNJVlFULnRyaW0oKTsNCiAgICBGMlJQUUEgPSBGMlJQUUEgPT0gbnVsbCA/ICIiIDogRjJSUFFBLnRyaW0oKTsNCiAgICBGM0lWUUEgPSBGM0lWUUEgPT0gbnVsbCA/ICIiIDogRjNJVlFBLnRyaW0oKTsNCiAgICBGMklWQ1cgPSBGMklWQ1cgPT0gbnVsbCA/ICIiIDogRjJJVkNXLnRyaW0oKTsNCiAgICBGM1JDQUMgPSBGM1JDQUMgPT0gbnVsbCA/ICIiIDogRjNSQ0FDLnRyaW0oKTsNCiAgICBGM0lDQUMgPSBGM0lDQUMgPT0gbnVsbCA/ICIiIDogRjNJQ0FDLnRyaW0oKTsNCiAgICBGM1NDT1AgPSBGM1NDT1AgPT0gbnVsbCA/ICIiIDogRjNTQ09QLnRyaW0oKTsNCiAgICBGM1NDT0MgPSBGM1NDT0MgPT0gbnVsbCA/ICIiIDogRjNTQ09DLnRyaW0oKTsNCiAgICBGMlNFUkEgPSBGMlNFUkEgPT0gbnVsbCA/ICIiIDogRjJTRVJBLnRyaW0oKTsNCiAgICBvRG1jdSA9IG9EbWN1ID09IG51bGwgPyAiIiA6IG9EbWN1LnRyaW0oKTsNCiAgICBvcmRlclVtRGNjZCA9IG9yZGVyVW1EY2NkID09IG51bGwgPyAiIiA6IG9yZGVyVW1EY2NkLnRyaW0oKTsNCiAgICBiYXNpY1VtRGNjZCA9IGJhc2ljVW1EY2NkID09IG51bGwgPyAiIiA6IGJhc2ljVW1EY2NkLnRyaW0oKTsNCg0KICAgIERvdWJsZSBkRmNhd2UyID0gRG91YmxlLnBhcnNlRG91YmxlKEYyQ0FXRS5pc0VtcHR5KCkgPyAiMCIgOiBGMkNBV0UudHJpbSgpKTsNCiAgICBEb3VibGUgZEZycHF0MiA9IERvdWJsZS5wYXJzZURvdWJsZShGMlJQUVQuaXNFbXB0eSgpID8gIjAiIDogRjJSUFFULnRyaW0oKSk7DQogICAgRG91YmxlIGRGaXZxdDMgPSBEb3VibGUucGFyc2VEb3VibGUoRjNJVlFULmlzRW1wdHkoKSA/ICIwIiA6IEYzSVZRVC50cmltKCkpOw0KICAgIERvdWJsZSBkRnJwcWEyID0gRG91YmxlLnBhcnNlRG91YmxlKEYyUlBRQS5pc0VtcHR5KCkgPyAiMCIgOiBGMlJQUUEudHJpbSgpKTsNCiAgICBEb3VibGUgZEZyY2FjMyA9IERvdWJsZS5wYXJzZURvdWJsZShGM1JDQUMuaXNFbXB0eSgpID8gIjAiIDogRjNSQ0FDLnRyaW0oKSk7DQogICAgRG91YmxlIGRGc2VyYTIgPSBEb3VibGUucGFyc2VEb3VibGUoRjJTRVJBLmlzRW1wdHkoKSA/ICIwIiA6IEYyU0VSQS50cmltKCkpOw0KDQogICAgaW50IGludEJhc2ljVW1EY2NkID0gSW50ZWdlci52YWx1ZU9mKGJhc2ljVW1EY2NkLnRyaW0oKSk7DQogICAgaW50IGludE9yZGVyVW1EY2NkID0gb3JkZXJVbURjY2QuaXNFbXB0eSgpID8gaW50QmFzaWNVbURjY2QgOiBJbnRlZ2VyLnZhbHVlT2Yob3JkZXJVbURjY2QudHJpbSgpKTsNCg0KICAgIERvdWJsZSBkUmVjZWl2ZWRRdWFudGl0eSA9IDAuMGQ7DQogICAgRG91YmxlIGRSZWNlaXZlZENvc3RBbW91bnRPcmRlclVtT3JkZXJDdXJyZW5jeSA9IDAuMGQ7DQoNCiAgICBpZiAob0RtY3UuZXF1YWxzKCIxIikpIHsNCiAgICAgIGRGc2VyYTIgPSAxZCAvIGRGc2VyYTI7DQogICAgfQ0KICAgIGRSZWNlaXZlZFF1YW50aXR5ID0gZEZycHFhMjsNCiAgICBkUmVjZWl2ZWRDb3N0QW1vdW50T3JkZXJVbU9yZGVyQ3VycmVuY3kgPSBEb3VibGUuY29tcGFyZShkRnJwcXQyLCAwLjBkKSA9PSAwID8gMC4wZCA6IChEb3VibGUpKChkRnJwcWEyIC8gZEZycHF0MikgKiBkRnJjYWMzICogZEZzZXJhMik7DQogICAgcmVjZWl2ZWRRdWFudGl0eU9yZGVyVW0gPSBEb3VibGUudG9TdHJpbmcobmV3IEJpZ0RlY2ltYWwoZFJlY2VpdmVkUXVhbnRpdHkpLnNldFNjYWxlKGludE9yZGVyVW1EY2NkLCBSb3VuZGluZ01vZGUuSEFMRl9VUCkuZG91YmxlVmFsdWUoKSk7DQogICAgcmVjZXZkQ29zdEFtb3VudE9yZGVyVW1PcmRlckN1cnJlbmN5ID0gRG91YmxlLnRvU3RyaW5nKG5ldyBCaWdEZWNpbWFsKGRSZWNlaXZlZENvc3RBbW91bnRPcmRlclVtT3JkZXJDdXJyZW5jeSkuc2V0U2NhbGUobnVtYmVyT2ZEZWNpbWFscy50b0ludGVnZXIoKSwgUm91bmRpbmdNb2RlLkhBTEZfVVApLmRvdWJsZVZhbHVlKCkpOw0KICAgIG9wZVF1YW50aXR5T3JkZXJVbSA9IERvdWJsZS50b1N0cmluZyhuZXcgQmlnRGVjaW1hbCgoZEZycHF0MiAtIGRGaXZxdDMpKS5zZXRTY2FsZShpbnRCYXNpY1VtRGNjZCwgUm91bmRpbmdNb2RlLkhBTEZfVVApLmRvdWJsZVZhbHVlKCkpOw0KDQogICAgZWFjaExpbmVDaGFyZ2VSZWNlaXB0LnB1dCgncmVjZWl2ZWRRdWFudGl0eU9yZGVyVW0nLCByZWNlaXZlZFF1YW50aXR5T3JkZXJVbSk7DQogICAgZWFjaExpbmVDaGFyZ2VSZWNlaXB0LnB1dCgncmVjZXZkQ29zdEFtb3VudE9yZGVyVW1PcmRlckN1cnJlbmN5JywgcmVjZXZkQ29zdEFtb3VudE9yZGVyVW1PcmRlckN1cnJlbmN5KTsNCiAgICBlYWNoTGluZUNoYXJnZVJlY2VpcHQucHV0KCdvcGVRdWFudGl0eU9yZGVyVW0nLCBvcGVRdWFudGl0eU9yZGVyVW0pOw0KICB9DQoNCiAgLyoqIENoZWNrIGlmIHJlY2VpcHQgY2hhcmdlcyBvcGVuDQogICAqLw0KICBwdWJsaWMgaWZSZWNlaXB0Q2hhcmdlT3BlbihIYXNodGFibGUgZWFjaExpbmVDaGFyZ2VSZWNlaXB0KSB7DQogICAgU3RyaW5nIG9wZVF1YW50aXR5T3JkZXJVbSA9IGVhY2hMaW5lQ2hhcmdlUmVjZWlwdC5nZXQoJ29wZVF1YW50aXR5T3JkZXJVbScpOw0KICAgIFN0cmluZyByZWNldmRDb3N0QW1vdW50T3JkZXJVbU9yZGVyQ3VycmVuY3kgPSBlYWNoTGluZUNoYXJnZVJlY2VpcHQuZ2V0KCdyZWNldmRDb3N0QW1vdW50T3JkZXJVbU9yZGVyQ3VycmVuY3knKTsNCg0KICAgIG9wZVF1YW50aXR5T3JkZXJVbSA9IG9wZVF1YW50aXR5T3JkZXJVbSA9PSBudWxsID8gIiIgOiBvcGVRdWFudGl0eU9yZGVyVW0udHJpbSgpOw0KICAgIG9wZVF1YW50aXR5T3JkZXJVbSA9IG9wZVF1YW50aXR5T3JkZXJVbS5lcXVhbHMoIiIpID8gIjAiIDogb3BlUXVhbnRpdHlPcmRlclVtLnJlcGxhY2UoJywnLCAnLicpOw0KDQogICAgQmlnRGVjaW1hbCBvcGVuUXVhbnRpdHlPcmRlclVtID0gbmV3IEJpZ0RlY2ltYWwob3BlUXVhbnRpdHlPcmRlclVtKTsNCg0KICAgIHJlY2V2ZENvc3RBbW91bnRPcmRlclVtT3JkZXJDdXJyZW5jeSA9IHJlY2V2ZENvc3RBbW91bnRPcmRlclVtT3JkZXJDdXJyZW5jeSA9PSBudWxsID8gIiIgOiByZWNldmRDb3N0QW1vdW50T3JkZXJVbU9yZGVyQ3VycmVuY3kudHJpbSgpOw0KICAgIHJlY2V2ZENvc3RBbW91bnRPcmRlclVtT3JkZXJDdXJyZW5jeSA9IHJlY2V2ZENvc3RBbW91bnRPcmRlclVtT3JkZXJDdXJyZW5jeS5lcXVhbHMoIiIpID8gIjAiIDogcmVjZXZkQ29zdEFtb3VudE9yZGVyVW1PcmRlckN1cnJlbmN5LnJlcGxhY2UoJywnLCAnLicpOw0KDQogICAgQmlnRGVjaW1hbCByZWNlaXZlZENvc3RBbW91bnRPcmRlclVtT3JkZXJDdXJyZW5jeSA9IG5ldyBCaWdEZWNpbWFsKHJlY2V2ZENvc3RBbW91bnRPcmRlclVtT3JkZXJDdXJyZW5jeSk7DQoNCiAgICBTdHJpbmcgZXhwb3J0RW1wdHlDaGFyZ2VzID0gZXhwb3J0RW1wdHkgPT0gbnVsbCA/ICIiIDogZXhwb3J0RW1wdHkudHJpbSgpOw0KDQogICAgYm9vbGVhbiBvcGVuUXVhbnRpdHkgPSBvcGVuUXVhbnRpdHlPcmRlclVtLmNvbXBhcmVUbyhCaWdEZWNpbWFsLlpFUk8pICE9IDA7DQoNCiAgICBib29sZWFuIG9wZW5BbW91bnQgPSByZWNlaXZlZENvc3RBbW91bnRPcmRlclVtT3JkZXJDdXJyZW5jeS5jb21wYXJlVG8oQmlnRGVjaW1hbC5aRVJPKSAhPSAwOw0KDQogICAgaWYgKCFleHBvcnRFbXB0eUNoYXJnZXMuZXF1YWxzKCIxIikgJiYgIW9wZW5BbW91bnQgJiYgb3BlblF1YW50aXR5KSB7DQogICAgICByZXR1cm4gZmFsc2U7DQogICAgfSBlbHNlIHsNCiAgICAgIHJldHVybiBvcGVuUXVhbnRpdHk7DQogICAgfQ0KICB9DQogIC8qKiBjaGVjayBQTyBsaW5lIGNoYXJnZSBvcmRlciBwcmljZSBhbmQgQmFzaWMgdW5pdA0KICAgKi8NCiAgcHVibGljIGNoZWNrQ2hhcmdlT3JkZXJQcmljZUFuZEJhc2VVbml0KEhhc2h0YWJsZSBlYWNoTGluZSwgSGFzaHRhYmxlIGVhY2hMaW5lUmVjZWlwdCwgSGFzaHRhYmxlIGVhY2hMaW5lQ2hhcmdlUmVjZWlwdCkgew0KICAgIFN0cmluZyBQVVVOID0gZWFjaExpbmUuZ2V0KCdQVVVOJyk7DQogICAgU3RyaW5nIFVOTVMgPSBlYWNoTGluZS5nZXQoJ1VOTVMnKTsNCiAgICBTdHJpbmcgQ1dVTiA9IGVhY2hMaW5lLmdldCgnQ1dVTicpOw0KICAgIFN0cmluZyBQUFVOID0gZWFjaExpbmUuZ2V0KCdQUFVOJyk7DQogICAgU3RyaW5nIE9SUUEgPSBlYWNoTGluZS5nZXQoJ09SUUEnKTsNCiAgICBTdHJpbmcgT1JRVCA9IGVhY2hMaW5lLmdldCgnT1JRVCcpOw0KICAgIFN0cmluZyBSUFFBID0gZWFjaExpbmVSZWNlaXB0LmdldCgnRjJSUFFBJyk7DQogICAgcmVwUXR5ID0gZWFjaExpbmVSZWNlaXB0LmdldCgnRjJSUFFBJyk7DQogICAgU3RyaW5nIFJQUVQgPSBlYWNoTGluZVJlY2VpcHQuZ2V0KCdGMlJQUVQnKTsNCiAgICBTdHJpbmcgSVZRQSA9IGVhY2hMaW5lQ2hhcmdlUmVjZWlwdC5nZXQoJ2l2cWFMY3InKTsNCiAgICBTdHJpbmcgSVZRVCA9IGVhY2hMaW5lQ2hhcmdlUmVjZWlwdC5nZXQoJ2l2cXRMY3InKTsNCg0KICAgIGlmIChQVVVOLnRyaW0oKS5lcXVhbHMoVU5NUy50cmltKCkpKSB7DQogICAgICBlYWNoTGluZUNoYXJnZVJlY2VpcHQucmVwbGFjZSgnaXZxdExjcicsIElWUUEpOw0KICAgIH0gZWxzZSB7DQogICAgICBCaWdEZWNpbWFsIGRibEl2cWEgPSBuZXcgQmlnRGVjaW1hbChJVlFBKTsNCiAgICAgIEJpZ0RlY2ltYWwgZGJsQ29mYSA9IG5ldyBCaWdEZWNpbWFsKG9yZGVyVW1Db2ZhKTsNCg0KICAgICAgaWYgKG9yZGVyVW1EbWNmLmVxdWFscygiMSIpKSB7DQogICAgICAgIElWUVQgPSBkYmxJdnFhLm11bHRpcGx5KGRibENvZmEpLnNldFNjYWxlKDgsIFJvdW5kaW5nTW9kZS5IQUxGX1VQKS50b1BsYWluU3RyaW5nKCk7DQoNCiAgICAgIH0gZWxzZSB7DQogICAgICAgIElWUVQgPSBkYmxJdnFhLmRpdmlkZShkYmxDb2ZhKS5zZXRTY2FsZSg4LCBSb3VuZGluZ01vZGUuSEFMRl9VUCkudG9QbGFpblN0cmluZygpOw0KICAgICAgfQ0KICAgICAgZWFjaExpbmVDaGFyZ2VSZWNlaXB0LnJlcGxhY2UoJ2l2cXRMY3InLCBJVlFUKTsNCiAgICB9DQoNCiAgICBpZiAoUFBVTi50cmltKCkuZXF1YWxzKFBVVU4udHJpbSgpKSkgew0KICAgICAgT1JRQSA9IE9SUUEgPT0gbnVsbCA/ICIiIDogT1JRQS50cmltKCk7DQogICAgICBSUFFBID0gUlBRQSA9PSBudWxsID8gIiIgOiBSUFFBLnRyaW0oKTsNCiAgICAgIElWUUEgPSBJVlFBID09IG51bGwgPyAiIiA6IElWUUEudHJpbSgpOw0KDQogICAgICBvcmRlcmRRdWFudGl0eVByaWNlVW0gPSBPUlFBOw0KICAgICAgcmVjZWl2ZWRRdWFudGl0eVByaWNlVW0gPSBSUFFBOw0KICAgICAgaW52b2ljZWRRdWFudGl0eVByaWNlVW0gPSBJVlFBOw0KDQogICAgICBCaWdEZWNpbWFsIGRibFJwcWEgPSBuZXcgQmlnRGVjaW1hbChSUFFBKTsNCiAgICAgIEJpZ0RlY2ltYWwgZGJsSXZxYSA9IG5ldyBCaWdEZWNpbWFsKElWUUEpOw0KDQogICAgICBvcGVuUXVhbnRpdHlQcmljZVVtID0gKGRibFJwcWEgLSBkYmxJdnFhKS5zZXRTY2FsZSg0LCBSb3VuZGluZ01vZGUuSEFMRl9VUCkudG9QbGFpblN0cmluZygpOw0KICAgIH0NCg0KICAgIGlmIChQUFVOLnRyaW0oKS5lcXVhbHMoVU5NUy50cmltKCkpICYmICFQUFVOLnRyaW0oKS5lcXVhbHMoUFVVTi50cmltKCkpKSB7DQogICAgICBPUlFUID0gT1JRVCA9PSBudWxsID8gIiIgOiBPUlFULnRyaW0oKTsNCiAgICAgIFJQUVQgPSBSUFFUID09IG51bGwgPyAiIiA6IFJQUVQudHJpbSgpOw0KICAgICAgSVZRVCA9IElWUVQgPT0gbnVsbCA/ICIiIDogSVZRVC50cmltKCk7DQoNCiAgICAgIG9yZGVyZFF1YW50aXR5UHJpY2VVbSA9IE9SUVQ7DQogICAgICByZWNlaXZlZFF1YW50aXR5UHJpY2VVbSA9IFJQUVQ7DQogICAgICBpbnZvaWNlZFF1YW50aXR5UHJpY2VVbSA9IElWUVQ7DQoNCiAgICAgIEJpZ0RlY2ltYWwgZGJsUnBxdCA9IG5ldyBCaWdEZWNpbWFsKFJQUVQpOw0KICAgICAgQmlnRGVjaW1hbCBkYmxJdnF0ID0gbmV3IEJpZ0RlY2ltYWwoSVZRVCk7DQoNCiAgICAgIG9wZW5RdWFudGl0eVByaWNlVW0gPSAoZGJsUnBxdCAtIGRibEl2cXQpLnNldFNjYWxlKDQsIFJvdW5kaW5nTW9kZS5IQUxGX1VQKS50b1BsYWluU3RyaW5nKCk7DQogICAgfQ0KICAgIGlmICghUFBVTi50cmltKCkuZXF1YWxzKFVOTVMudHJpbSgpKSAmJiAhUFBVTi50cmltKCkuZXF1YWxzKFBVVU4udHJpbSgpKSkgew0KICAgICAgSVZRVCA9IElWUVQgPT0gbnVsbCA/ICIiIDogSVZRVC50cmltKCk7DQogICAgICBPUlFUID0gT1JRVCA9PSBudWxsID8gIiIgOiBPUlFULnRyaW0oKTsNCiAgICAgIFJQUVQgPSBSUFFUID09IG51bGwgPyAiIiA6IFJQUVQudHJpbSgpOw0KICAgICAgU3RyaW5nIERDQ0QgPSBwcmljZVVtRGNjZCA9PSBudWxsID8gIiIgOiBwcmljZVVtRGNjZC50cmltKCk7DQogICAgICBTdHJpbmcgRE1DRiA9IHByaWNlVW1EbWNmID09IG51bGwgPyAiIiA6IHByaWNlVW1EbWNmLnRyaW0oKTsNCiAgICAgIFN0cmluZyBDT0ZBID0gcHJpY2VVbUNvZmEgPT0gbnVsbCA/ICIiIDogcHJpY2VVbUNvZmEudHJpbSgpOw0KDQogICAgICBCaWdEZWNpbWFsIGRibEl2cXQgPSBuZXcgQmlnRGVjaW1hbChJVlFUKTsNCiAgICAgIEJpZ0RlY2ltYWwgZGJsQ29mYSA9IG5ldyBCaWdEZWNpbWFsKENPRkEpOw0KICAgICAgQmlnRGVjaW1hbCBkYmxPcnF0ID0gbmV3IEJpZ0RlY2ltYWwoT1JRVCk7DQogICAgICBCaWdEZWNpbWFsIGRibFJwcXQgPSBuZXcgQmlnRGVjaW1hbChSUFFUKTsNCg0KICAgICAgaWYgKEFVVFBBLmVxdWFscygiMSIpKSB7DQogICAgICAgIGlmIChETUNGLmVxdWFscygiMSIpKSB7DQoNCiAgICAgICAgICBvcmRlcmRRdWFudGl0eVByaWNlVW0gPSBkYmxPcnF0LmRpdmlkZShkYmxDb2ZhKS5zZXRTY2FsZShJbnRlZ2VyLnBhcnNlSW50KERDQ0QpLCBSb3VuZGluZ01vZGUuSEFMRl9VUCkudG9QbGFpblN0cmluZygpOw0KICAgICAgICAgIHJlY2VpdmVkUXVhbnRpdHlQcmljZVVtID0gZGJsUnBxdC5kaXZpZGUoZGJsQ29mYSkuc2V0U2NhbGUoSW50ZWdlci5wYXJzZUludChEQ0NEKSwgUm91bmRpbmdNb2RlLkhBTEZfVVApLnRvUGxhaW5TdHJpbmcoKTsNCiAgICAgICAgICBvcGVuUXVhbnRpdHlQcmljZVVtID0gKGRibFJwcXQgLSBkYmxJdnF0KS5kaXZpZGUoZGJsQ29mYSkuc2V0U2NhbGUoSW50ZWdlci5wYXJzZUludChEQ0NEKSwgUm91bmRpbmdNb2RlLkhBTEZfVVApLnRvUGxhaW5TdHJpbmcoKTsNCg0KICAgICAgICB9IGVsc2Ugew0KDQogICAgICAgICAgb3JkZXJkUXVhbnRpdHlQcmljZVVtID0gZGJsT3JxdC5tdWx0aXBseShkYmxDb2ZhKS5zZXRTY2FsZShJbnRlZ2VyLnBhcnNlSW50KERDQ0QpLCBSb3VuZGluZ01vZGUuSEFMRl9VUCkudG9QbGFpblN0cmluZygpOw0KICAgICAgICAgIHJlY2VpdmVkUXVhbnRpdHlQcmljZVVtID0gZGJsUnBxdC5tdWx0aXBseShkYmxDb2ZhKS5zZXRTY2FsZShJbnRlZ2VyLnBhcnNlSW50KERDQ0QpLCBSb3VuZGluZ01vZGUuSEFMRl9VUCkudG9QbGFpblN0cmluZygpOw0KICAgICAgICAgIG9wZW5RdWFudGl0eVByaWNlVW0gPSAoZGJsUnBxdCAtIGRibEl2cXQpLm11bHRpcGx5KGRibENvZmEpLnNldFNjYWxlKEludGVnZXIucGFyc2VJbnQoRENDRCksIFJvdW5kaW5nTW9kZS5IQUxGX1VQKS50b1BsYWluU3RyaW5nKCk7DQogICAgICAgIH0NCiAgICAgIH0NCiAgICAgIGlmIChBVVRQQS5lcXVhbHMoIjIiKSkgew0KICAgICAgICBpZiAoRE1DRi5lcXVhbHMoIjEiKSkgew0KDQogICAgICAgICAgb3JkZXJkUXVhbnRpdHlQcmljZVVtID0gZGJsT3JxdC5kaXZpZGUoZGJsQ29mYSkuc2V0U2NhbGUoMiwgUm91bmRpbmdNb2RlLkhBTEZfVVApLnRvUGxhaW5TdHJpbmcoKTsNCiAgICAgICAgICByZWNlaXZlZFF1YW50aXR5UHJpY2VVbSA9IGRibFJwcXQuZGl2aWRlKGRibENvZmEpLnNldFNjYWxlKDIsIFJvdW5kaW5nTW9kZS5IQUxGX1VQKS50b1BsYWluU3RyaW5nKCk7DQogICAgICAgICAgb3BlblF1YW50aXR5UHJpY2VVbSA9IChkYmxScHF0IC0gZGJsSXZxdCkuZGl2aWRlKGRibENvZmEpLnNldFNjYWxlKDIsIFJvdW5kaW5nTW9kZS5IQUxGX1VQKS50b1BsYWluU3RyaW5nKCk7DQoNCiAgICAgICAgfSBlbHNlIHsNCg0KICAgICAgICAgIG9yZGVyZFF1YW50aXR5UHJpY2VVbSA9IGRibE9ycXQubXVsdGlwbHkoZGJsQ29mYSkuc2V0U2NhbGUoMiwgUm91bmRpbmdNb2RlLkhBTEZfVVApLnRvUGxhaW5TdHJpbmcoKTsNCiAgICAgICAgICByZWNlaXZlZFF1YW50aXR5UHJpY2VVbSA9IGRibFJwcXQubXVsdGlwbHkoZGJsQ29mYSkuc2V0U2NhbGUoMiwgUm91bmRpbmdNb2RlLkhBTEZfVVApLnRvUGxhaW5TdHJpbmcoKTsNCiAgICAgICAgICBvcGVuUXVhbnRpdHlQcmljZVVtID0gKGRibFJwcXQgLSBkYmxJdnF0KS5tdWx0aXBseShkYmxDb2ZhKS5zZXRTY2FsZSgyLCBSb3VuZGluZ01vZGUuSEFMRl9VUCkudG9QbGFpblN0cmluZygpOw0KICAgICAgICB9DQogICAgICB9DQogICAgfQ0KDQogICAgUlBRQSA9IFJQUUEgPT0gbnVsbCA/ICIiIDogUlBRQS50cmltKCk7DQogICAgSVZRQSA9IElWUUEgPT0gbnVsbCA/ICIiIDogSVZRQS50cmltKCk7DQogICAgb3JkZXJVbURjY2QgPSBvcmRlclVtRGNjZCA9PSBudWxsID8gIiIgOiBvcmRlclVtRGNjZC50cmltKCk7DQoNCiAgICBCaWdEZWNpbWFsIGRibFJwcWEgPSBuZXcgQmlnRGVjaW1hbChSUFFBKTsNCiAgICBCaWdEZWNpbWFsIGRibEl2cWEgPSBuZXcgQmlnRGVjaW1hbChJVlFBKTsNCiAgICBCaWdEZWNpbWFsIGRibEludlF0eSA9IG5ldyBCaWdEZWNpbWFsKGludlF0eSk7DQogICAgaW50IGludE9yZGVyVW1EY2NkID0gSW50ZWdlci52YWx1ZU9mKG9yZGVyVW1EY2NkKTsNCg0KICAgIG9wZVF1YW50aXR5T3JkZXJVbSA9IGRibFJwcWEuc3VidHJhY3QoZGJsSXZxYSkuc2V0U2NhbGUoaW50T3JkZXJVbURjY2QsIFJvdW5kaW5nTW9kZS5IQUxGX1VQKS50b1BsYWluU3RyaW5nKCk7DQogICAgb3BlblF1YW50aXR5T3JkZXJVbWEgPSBkYmxScHFhLnN1YnRyYWN0KGRibEludlF0eSkuc2V0U2NhbGUoaW50T3JkZXJVbURjY2QsIFJvdW5kaW5nTW9kZS5IQUxGX1VQKS50b1BsYWluU3RyaW5nKCk7DQoNCiAgICBvcGVRdWFudGl0eU9yZGVyVW0gPSBvcGVRdWFudGl0eU9yZGVyVW0gPT0gbnVsbCA/ICIiIDogb3BlUXVhbnRpdHlPcmRlclVtLnRyaW0oKTsNCiAgICByZWNldmRDb3N0QW1vdW50T3JkZXJVbU9yZGVyQ3VycmVuY3kgPSByZWNldmRDb3N0QW1vdW50T3JkZXJVbU9yZGVyQ3VycmVuY3kgPT0gbnVsbCA/ICIiIDogcmVjZXZkQ29zdEFtb3VudE9yZGVyVW1PcmRlckN1cnJlbmN5LnRyaW0oKTsNCiAgICByZWNlaXZlZFF1YW50aXR5UHJpY2VVbSA9IHJlY2VpdmVkUXVhbnRpdHlQcmljZVVtID09IG51bGwgPyAiIiA6IHJlY2VpdmVkUXVhbnRpdHlQcmljZVVtLnRyaW0oKTsNCiAgICByZWNlaXZlZFF1YW50aXR5T3JkZXJVbSA9IHJlY2VpdmVkUXVhbnRpdHlPcmRlclVtID09IG51bGwgPyAiIiA6IHJlY2VpdmVkUXVhbnRpdHlPcmRlclVtLnRyaW0oKTsNCiAgICBvcGVuUXVhbnRpdHlQcmljZVVtID0gb3BlblF1YW50aXR5UHJpY2VVbSA9PSBudWxsID8gIiIgOiBvcGVuUXVhbnRpdHlQcmljZVVtLnRyaW0oKTsNCg0KICAgIEJpZ0RlY2ltYWwgZGJsT3BlblF1YW50aXR5T3JkZXJVbSA9IG5ldyBCaWdEZWNpbWFsKG9wZVF1YW50aXR5T3JkZXJVbSk7DQogICAgQmlnRGVjaW1hbCBkYmxSZWNlaXZlZENvc3RBbW91bnRPcmRlclVtT3JkZXJDdXJyZW5jeSA9IG5ldyBCaWdEZWNpbWFsKHJlY2V2ZENvc3RBbW91bnRPcmRlclVtT3JkZXJDdXJyZW5jeSk7DQogICAgQmlnRGVjaW1hbCBkYmxSZWNlaXZlZFF1YW50aXR5UHJpY2VVbSA9IG5ldyBCaWdEZWNpbWFsKHJlY2VpdmVkUXVhbnRpdHlQcmljZVVtKTsNCiAgICBCaWdEZWNpbWFsIGRibFJlY2VpdmVkUXVhbnRpdHlPcmRlclVtID0gbmV3IEJpZ0RlY2ltYWwocmVjZWl2ZWRRdWFudGl0eU9yZGVyVW0pOw0KICAgIEJpZ0RlY2ltYWwgZGJsT3BlblF1YW50aXR5UHJpY2VVbSA9IG5ldyBCaWdEZWNpbWFsKG9wZW5RdWFudGl0eVByaWNlVW0pOw0KDQogICAgQmlnRGVjaW1hbCBkYmxQcmljZVBlclBpZWNlT3JkZXJVbSA9IGRibFJlY2VpdmVkUXVhbnRpdHlPcmRlclVtLmNvbXBhcmVUbygwLjApID09IDAgPyAwLjAgOiBkYmxSZWNlaXZlZENvc3RBbW91bnRPcmRlclVtT3JkZXJDdXJyZW5jeSAvIGRibFJlY2VpdmVkUXVhbnRpdHlPcmRlclVtOw0KICAgIEJpZ0RlY2ltYWwgZGJsUHJpY2VQZXJQaWVjZVByaWNlVW0gPSBkYmxSZWNlaXZlZFF1YW50aXR5UHJpY2VVbS5jb21wYXJlVG8oMC4wKSA9PSAwID8gMC4wIDogKGRibFJlY2VpdmVkUXVhbnRpdHlPcmRlclVtIC8gZGJsUmVjZWl2ZWRRdWFudGl0eVByaWNlVW0pICogZGJsUHJpY2VQZXJQaWVjZU9yZGVyVW07DQoNCiAgICBhbW91bnRSZWNlaXZlZFByaWNlVW0gPSBkYmxSZWNlaXZlZFF1YW50aXR5UHJpY2VVbS5tdWx0aXBseShkYmxQcmljZVBlclBpZWNlUHJpY2VVbSkuc2V0U2NhbGUobnVtYmVyT2ZEZWNpbWFscy50b0ludGVnZXIoKSwgUm91bmRpbmdNb2RlLkhBTEZfVVApLnRvUGxhaW5TdHJpbmcoKTsNCiAgICBhbW91bnRPcGVuUHJpY2VVbSA9IGRibE9wZW5RdWFudGl0eVByaWNlVW0ubXVsdGlwbHkoZGJsUHJpY2VQZXJQaWVjZVByaWNlVW0pLnNldFNjYWxlKG51bWJlck9mRGVjaW1hbHMudG9JbnRlZ2VyKCksIFJvdW5kaW5nTW9kZS5IQUxGX1VQKS50b1BsYWluU3RyaW5nKCk7DQogICAgYW1vdW50T3Blbk9yZGVyVW0gPSBkYmxPcGVuUXVhbnRpdHlPcmRlclVtLm11bHRpcGx5KGRibFByaWNlUGVyUGllY2VPcmRlclVtKS5zZXRTY2FsZShudW1iZXJPZkRlY2ltYWxzLnRvSW50ZWdlcigpLCBSb3VuZGluZ01vZGUuSEFMRl9VUCkudG9QbGFpblN0cmluZygpOw0KDQogICAgcHJpY1BlclBpZWNlUHJpY2VVbSA9IGRibFByaWNlUGVyUGllY2VQcmljZVVtLnNldFNjYWxlKG51bWJlck9mRGVjaW1hbHMudG9JbnRlZ2VyKCksIFJvdW5kaW5nTW9kZS5IQUxGX1VQKS50b1BsYWluU3RyaW5nKCk7DQogICAgcHJpY1BlclBpZWNlT3JkZXJVbSA9IGRibFByaWNlUGVyUGllY2VPcmRlclVtLnNldFNjYWxlKG51bWJlck9mRGVjaW1hbHMudG9JbnRlZ2VyKCksIFJvdW5kaW5nTW9kZS5IQUxGX1VQKS50b1BsYWluU3RyaW5nKCk7Ow0KDQogIH0NCg0KICAvKiogYWRkIFBPIGxpbmUgb3BlbiBjaGFyZ2UgdG8gcmVjZWlwdCBsaXN0DQogICAqLw0KICBwdWJsaWMgYWRkVG9MaW5lT3BlbkNoYXJnZVJlY2VpcHRMaXN0KFN0cmluZyBlYWNoUHVubywgSGFzaHRhYmxlIGVhY2hMaW5lLCBIYXNodGFibGUgZWFjaExpbmVSZWNlaXB0LCBIYXNodGFibGUgZWFjaExpbmVDaGFyZ2VSZWNlaXB0KSB7DQogICAgU3RyaW5nIFBOTEkgPSBlYWNoTGluZS5nZXQoJ1BOTEknKTsNCiAgICBTdHJpbmcgUE5MUyA9IGVhY2hMaW5lLmdldCgnUE5MUycpOw0KICAgIFN0cmluZyBDRFNFID0gZWFjaExpbmVDaGFyZ2VSZWNlaXB0LmdldCgnY2RzZUxjcicpOw0KICAgIFN0cmluZyBDRUlEID0gZWFjaExpbmVDaGFyZ2VSZWNlaXB0LmdldCgnY2VpZExjcicpOw0KICAgIFN0cmluZyBSRVBOID0gZWFjaExpbmVSZWNlaXB0LmdldCgnRjJSRVBOJyk7DQogICAgU3RyaW5nIFJFTFAgPSBlYWNoTGluZVJlY2VpcHQuZ2V0KCdGMlJFTFAnKTsNCiAgICBTdHJpbmcgVFgzMCA9IGVhY2hMaW5lQ2hhcmdlUmVjZWlwdC5nZXQoJ3R4MzBMY3InKTsNCiAgICBTdHJpbmcgRVhUWSA9IGVhY2hMaW5lQ2hhcmdlUmVjZWlwdC5nZXQoJ2V4dHlMY3InKTsNCiAgICBTdHJpbmcgSVROTyA9IGVhY2hMaW5lLmdldCgnSVROTycpOw0KICAgIFN0cmluZyBQUFVOID0gZWFjaExpbmUuZ2V0KCdQUFVOJyk7DQogICAgU3RyaW5nIFBVVU4gPSBlYWNoTGluZS5nZXQoJ1BVVU4nKTsNCg0KICAgIEhhc2h0YWJsZSB0ZW1wVGFibGUgPSBuZXcgSGFzaHRhYmxlIDwgU3RyaW5nLCBTdHJpbmcgPiAoKTsNCiAgICB0ZW1wVGFibGUucHV0KCJQVU5PIiwgZWFjaFB1bm8pOw0KICAgIHRlbXBUYWJsZS5wdXQoIlBOTEkiLCBQTkxJKTsNCiAgICB0ZW1wVGFibGUucHV0KCJQTkxTIiwgUE5MUyk7DQogICAgdGVtcFRhYmxlLnB1dCgic2VxdWVuY2VOdW1iZXIiLCBDRFNFKTsNCiAgICB0ZW1wVGFibGUucHV0KCJjb3N0aW5nRWxlbWVudCIsIENFSUQpOw0KICAgIHRlbXBUYWJsZS5wdXQoInJlY2VpcHROdW1iZXIiLCBSRVBOKTsNCiAgICB0ZW1wVGFibGUucHV0KCJjb3N0aW5nRWxlbWVudERlc2NyaXB0aW9uIiwgVFgzMCk7DQogICAgdGVtcFRhYmxlLnB1dCgiY2hhcmdlVHlwZSIsIEVYVFkpOw0KICAgIHRlbXBUYWJsZS5wdXQoIml0ZW1OdW1iZXIiLCBJVE5PKTsNCiAgICB0ZW1wVGFibGUucHV0KCdGMlJFTFAnLCBSRUxQKTsNCg0KICAgIHRlbXBUYWJsZS5wdXQoImFtb3VudE9wZW4iLCBhbW91bnRPcGVuUHJpY2VVbSk7DQogICAgdGVtcFRhYmxlLnB1dCgiYW1vdW50T3JkZXJlZCIsIGFtb3VudFJlY2VpdmVkUHJpY2VVbSk7DQogICAgdGVtcFRhYmxlLnB1dCgiUHJpY2UiLCBwcmljUGVyUGllY2VQcmljZVVtKTsNCiAgICB0ZW1wVGFibGUucHV0KCJVbml0IiwgUFBVTik7DQogICAgdGVtcFRhYmxlLnB1dCgicXVhbnRpdHlPcGVuIiwgb3BlblF1YW50aXR5UHJpY2VVbSk7DQogICAgdGVtcFRhYmxlLnB1dCgicXR5SW52b2ljZWQiLCBpbnZvaWNlZFF1YW50aXR5UHJpY2VVbSk7DQogICAgdGVtcFRhYmxlLnB1dCgicXVhbnRpdHlPcmRlcmVkIiwgb3JkZXJkUXVhbnRpdHlQcmljZVVtKTsNCiAgICB0ZW1wVGFibGUucHV0KCJxdWFudGl0eVJlY2VpdmVkIiwgcmVjZWl2ZWRRdWFudGl0eVByaWNlVW0pOw0KDQogICAgaWYgKFBVVU4uZXF1YWxzKFBQVU4udHJpbSgpKSkgew0KICAgICAgdGVtcFRhYmxlLnB1dCgiYWx0ZXJuYXRpdmVVbml0IiwgIi0iKTsNCiAgICAgIHRlbXBUYWJsZS5wdXQoImFsdGVybmF0aXZlUXVhbnRpdHlPcGVuIiwgIjAuMCIpOw0KICAgICAgdGVtcFRhYmxlLnB1dCgiYWx0ZXJuYXRpdmVQcmljZSIsICIwLjAiKTsNCiAgICB9IGVsc2Ugew0KICAgICAgdGVtcFRhYmxlLnB1dCgiYWx0ZXJuYXRpdmVVbml0IiwgUFVVTik7DQogICAgICB0ZW1wVGFibGUucHV0KCJhbHRlcm5hdGl2ZVF1YW50aXR5T3BlbiIsIG9wZVF1YW50aXR5T3JkZXJVbSk7DQogICAgICB0ZW1wVGFibGUucHV0KCJhbHRlcm5hdGl2ZVByaWNlIiwgcHJpY1BlclBpZWNlT3JkZXJVbSk7DQogICAgfQ0KICAgIGxpbmVPcGVuQ2hhcmdlUmVjZWlwdExpc3QuYWRkKHRlbXBUYWJsZSk7DQoNCiAgfQ0KICAvKiogZ2V0IGxpbmUgY2hhcmdlcyBmcm9tIHRhYmxlIE1QT0VYUA0KICAgKi8NCiAgcHJpdmF0ZSBnZXRMaW5lQ2hhcmdlcyhTdHJpbmcgZWFjaFB1bm8sIEhhc2h0YWJsZSBlYWNoTGluZSkgew0KICAgIHRlbXBMaW5lQ2hhcmdlTGlzdCA9IG5ldyBBcnJheUxpc3QgPCBIYXNodGFibGUgPiAoKTsNCiAgICBsaW5lQ2hhcmdlTGlzdCA9IG5ldyBBcnJheUxpc3QgPCBIYXNodGFibGUgPiAoKTsNCiAgICBEQkFjdGlvbiBxdWVyeU1wb2V4cCA9IGRhdGFiYXNlLnRhYmxlKCJNUE9FWFAiKS5pbmRleCgiMDAiKS5zZWxlY3Rpb24oIklWQ09OTyIsICJJVlBVTk8iLCAiSVZQTkxJIiwgIklWUE5MUyIsICJJVkNEU0UiLCAiSVZSRVBOIiwgIklWRVhUWSIsICJJVkNFSUQiLCAiSVZFWElDIiwgIklWV1NPUCIsICJJVkNVQ0QiLCAiSVZDRVZBIiwgIklWQ0VWSiIsICJJVlRIUFIiLCAiSVZJVkNRIiwgIklWQUNJTiIpLmJ1aWxkKCk7DQogICAgREJDb250YWluZXIgcmVjb3JkTXBvZXhwID0gcXVlcnlNcG9leHAuZ2V0Q29udGFpbmVyKCk7DQogICAgcmVjb3JkTXBvZXhwLnNldCgiSVZDT05PIiwgSW50ZWdlci5wYXJzZUludChDT05PLnRyaW0oKSkpOw0KICAgIHJlY29yZE1wb2V4cC5zZXQoIklWUFVOTyIsIGVhY2hQdW5vLnRyaW0oKSk7DQogICAgcmVjb3JkTXBvZXhwLnNldCgiSVZQTkxJIiwgSW50ZWdlci5wYXJzZUludChlYWNoTGluZS5nZXQoJ1BOTEknKS50b1N0cmluZygpKSk7DQogICAgcmVjb3JkTXBvZXhwLnNldCgiSVZQTkxTIiwgSW50ZWdlci5wYXJzZUludChlYWNoTGluZS5nZXQoJ1BOTFMnKS50b1N0cmluZygpKSk7DQogICAgDQogICAgaW50IHJlYWRzID0gcXVlcnlNcG9leHAucmVhZEFsbChyZWNvcmRNcG9leHAsIDQsIGdldE1wb2V4cExpbmVSZWNvcmRzKTsNCg0KICB9DQoNCiAgQ2xvc3VyZSA8ID8gPiBnZXRNcG9leHBMaW5lUmVjb3JkcyA9IHsNCiAgICBEQkNvbnRhaW5lciByZWNvcmQgLT4NCiAgICBTdHJpbmcgUE5MSSA9IHJlY29yZC5nZXQoJ0lWUE5MSScpOw0KICAgIFN0cmluZyBQTkxTID0gcmVjb3JkLmdldCgnSVZQTkxTJyk7DQogICAgU3RyaW5nIENEU0UgPSByZWNvcmQuZ2V0KCdJVkNEU0UnKTsNCiAgICBTdHJpbmcgUkVQTiA9IHJlY29yZC5nZXQoJ0lWUkVQTicpOw0KICAgIFN0cmluZyBFWFRZID0gcmVjb3JkLmdldCgnSVZFWFRZJyk7DQogICAgU3RyaW5nIENFSUQgPSByZWNvcmQuZ2V0KCdJVkNFSUQnKTsNCiAgICBTdHJpbmcgRVhJQyA9IHJlY29yZC5nZXQoJ0lWRVhJQycpOw0KICAgIFN0cmluZyBXU09QID0gcmVjb3JkLmdldCgnSVZXU09QJyk7DQogICAgU3RyaW5nIENVQ0QgPSByZWNvcmQuZ2V0KCdJVkNVQ0QnKTsNCiAgICBTdHJpbmcgQ0VWQSA9IHJlY29yZC5nZXQoJ0lWQ0VWQScpOw0KICAgIFN0cmluZyBDRVZKID0gcmVjb3JkLmdldCgnSVZDRVZKJyk7DQogICAgU3RyaW5nIFRIUFIgPSByZWNvcmQuZ2V0KCdJVlRIUFInKTsNCiAgICBTdHJpbmcgSVZDUSA9IHJlY29yZC5nZXQoJ0lWSVZDUScpOw0KICAgIFN0cmluZyBBQ0lOID0gcmVjb3JkLmdldCgnSVZBQ0lOJyk7DQogICAgSGFzaHRhYmxlIHRlbXBUYWJsZSA9IG5ldyBIYXNodGFibGUgPCBTdHJpbmcsDQogICAgU3RyaW5nID4gKCk7DQogICAgdGVtcFRhYmxlLnB1dCgnUE5MSScsIFBOTEkpOw0KICAgIHRlbXBUYWJsZS5wdXQoJ1BOTFMnLCBQTkxTKTsNCiAgICB0ZW1wVGFibGUucHV0KCdDRFNFJywgQ0RTRSk7DQogICAgdGVtcFRhYmxlLnB1dCgnUkVQTicsIFJFUE4pOw0KICAgIHRlbXBUYWJsZS5wdXQoJ0VYVFknLCBFWFRZKTsNCiAgICB0ZW1wVGFibGUucHV0KCdDRUlEJywgQ0VJRCk7DQogICAgdGVtcFRhYmxlLnB1dCgnRVhJQycsIEVYSUMpOw0KICAgIHRlbXBUYWJsZS5wdXQoJ1dTT1AnLCBXU09QKTsNCiAgICB0ZW1wVGFibGUucHV0KCdDVUNEJywgQ1VDRCk7DQogICAgdGVtcFRhYmxlLnB1dCgnQ0VWQScsIENFVkEpOw0KICAgIHRlbXBUYWJsZS5wdXQoJ0NFVkonLCBDRVZKKTsNCiAgICB0ZW1wVGFibGUucHV0KCdUSFBSJywgVEhQUik7DQogICAgdGVtcFRhYmxlLnB1dCgnSVZDUScsIElWQ1EpOw0KICAgIHRlbXBUYWJsZS5wdXQoJ0FDSU4nLCBBQ0lOKTsNCiAgICB0ZW1wTGluZUNoYXJnZUxpc3QuYWRkKHRlbXBUYWJsZSk7DQoNCiAgfQ0KICAvKiogZ2V0IGxpbmUgY2hhcmdlIHRleHQgdXNpbmcgUFBTMjgwTUkuR2V0RWxlbWVudA0KICAgKi8NCiAgcHJpdmF0ZSBnZXRMaW5lQ2hhcmdlVGV4dChTdHJpbmcgZWFjaFB1bm8sIEhhc2h0YWJsZSBlYWNoVGVtcExpbmVDaGFyZ2UsIEhhc2h0YWJsZSBlYWNoTGluZSkgew0KICAgIFN0cmluZyBDRUlEID0gZWFjaFRlbXBMaW5lQ2hhcmdlLmdldCgnQ0VJRCcpOw0KICAgIFN0cmluZyBpUFVOTyA9IGVhY2hQdW5vOw0KICAgIFN0cmluZyBpUE5MSSA9IGVhY2hUZW1wTGluZUNoYXJnZS5nZXQoJ1BOTEknKTsNCiAgICBTdHJpbmcgaVBOTFMgPSBlYWNoVGVtcExpbmVDaGFyZ2UuZ2V0KCdQTkxTJyk7DQogICAgU3RyaW5nIGlDRFNFID0gZWFjaFRlbXBMaW5lQ2hhcmdlLmdldCgnQ0RTRScpOw0KICAgIFN0cmluZyBpQ0VJRCA9IGVhY2hUZW1wTGluZUNoYXJnZS5nZXQoJ0NFSUQnKTsNCiAgICBTdHJpbmcgaVdTT1AgPSBlYWNoVGVtcExpbmVDaGFyZ2UuZ2V0KCdXU09QJyk7DQogICAgU3RyaW5nIFRYMzAgPSAiIjsNCiAgICBib29sZWFuIHJlY29yZEV4aXN0cyA9IHRydWU7DQogICAgZGVmIGNhbGxiYWNrID0gew0KICAgICAgTWFwIDwgU3RyaW5nLA0KICAgICAgU3RyaW5nID4gcmVzdWx0cyAtPg0KICAgICAgcmVjb3JkRXhpc3RzID0gIXJlc3VsdHMuZ2V0KCdlcnJvcicpOw0KICAgICAgaWYgKHJlY29yZEV4aXN0cykgew0KICAgICAgICBUWDMwID0gcmVzdWx0cy5nZXQoJ1RYMzAnKTsNCg0KICAgICAgfQ0KDQogICAgICBTdHJpbmcgRVhUWSA9IGVhY2hUZW1wTGluZUNoYXJnZS5nZXQoJ0VYVFknKTsNCg0KICAgICAgaWYgKHZhbGlkQ2hhcmdlVHlwZXMuY29udGFpbnMoRVhUWS50cmltKCkpKSB7DQoNCiAgICAgICAgbGluZU9wZW5DaGFyZ2VSZWNlaXB0TGlzdC5lYWNoIHsNCg0KICAgICAgICAgIGxpbmVPcGVuQ2hhcmdlUmVjZWlwdCAtPg0KICAgICAgICAgICAgSGFzaHRhYmxlIGh0T3BlblJlY2VpcHRDaGFyZ2UgPSBsaW5lT3BlbkNoYXJnZVJlY2VpcHQ7DQoNCiAgICAgICAgICBTdHJpbmcgcHVubyA9IGh0T3BlblJlY2VpcHRDaGFyZ2UuY29udGFpbnNLZXkoIlBVTk8iKSA/IGh0T3BlblJlY2VpcHRDaGFyZ2UNCiAgICAgICAgICAgIC5nZXQoIlBVTk8iKSA6IG51bGw7DQogICAgICAgICAgU3RyaW5nIHBubGkgPSBodE9wZW5SZWNlaXB0Q2hhcmdlLmNvbnRhaW5zS2V5KCJQTkxJIikgPyBodE9wZW5SZWNlaXB0Q2hhcmdlDQogICAgICAgICAgICAuZ2V0KCJQTkxJIikgOiBudWxsOw0KICAgICAgICAgIFN0cmluZyBwbmxzID0gaHRPcGVuUmVjZWlwdENoYXJnZS5jb250YWluc0tleSgiUE5MUyIpID8gaHRPcGVuUmVjZWlwdENoYXJnZQ0KICAgICAgICAgICAgLmdldCgiUE5MUyIpIDogbnVsbDsNCiAgICAgICAgICBTdHJpbmcgY2RzZSA9IGh0T3BlblJlY2VpcHRDaGFyZ2UuY29udGFpbnNLZXkoInNlcXVlbmNlTnVtYmVyIikgPyBodE9wZW5SZWNlaXB0Q2hhcmdlDQogICAgICAgICAgICAuZ2V0KCJzZXF1ZW5jZU51bWJlciIpIDogbnVsbDsNCiAgICAgICAgICBTdHJpbmcgY2VpZCA9IGh0T3BlblJlY2VpcHRDaGFyZ2UuY29udGFpbnNLZXkoImNvc3RpbmdFbGVtZW50IikgPyBodE9wZW5SZWNlaXB0Q2hhcmdlDQogICAgICAgICAgICAuZ2V0KCJjb3N0aW5nRWxlbWVudCIpIDogbnVsbDsNCiAgICAgICAgICBwdW5vID0gcHVubyA9PSBudWxsID8gIiIgOiBwdW5vLnRyaW0oKTsNCiAgICAgICAgICBwbmxpID0gcG5saSA9PSBudWxsID8gIiIgOiBwbmxpLnRyaW0oKTsNCiAgICAgICAgICBwbmxzID0gcG5scyA9PSBudWxsID8gIiIgOiBwbmxzLnRyaW0oKTsNCiAgICAgICAgICBjZHNlID0gY2RzZSA9PSBudWxsID8gIiIgOiBjZHNlLnRyaW0oKTsNCiAgICAgICAgICBjZWlkID0gY2VpZCA9PSBudWxsID8gIiIgOiBjZWlkLnRyaW0oKTsNCiAgICAgICAgICBpZiAocHVuby5lcXVhbHMoaVBVTk8pICYmIHBubGkuZXF1YWxzKGlQTkxJKSAmJiBwbmxzLmVxdWFscyhpUE5MUykgJiYNCiAgICAgICAgICAgIGNkc2UuZXF1YWxzKGlDRFNFKSAmJiBjZWlkLmVxdWFscyhpQ0VJRCkpIHsNCg0KICAgICAgICAgICAgaHRPcGVuUmVjZWlwdENoYXJnZS5wdXQoIk9wZXJhdG9yIiwgZWFjaFRlbXBMaW5lQ2hhcmdlLmdldCgnV1NPUCcpKTsNCiAgICAgICAgICAgIGh0T3BlblJlY2VpcHRDaGFyZ2UucHV0KCJjb3N0aW5nRWxlbWVudERlc2NyaXB0aW9uIiwgVFgzMCk7DQogICAgICAgICAgICBodE9wZW5SZWNlaXB0Q2hhcmdlLnB1dCgidGhpcmRQYXJ0eUNvc3RzIiwgZWFjaFRlbXBMaW5lQ2hhcmdlLmdldCgnVEhQUicpKTsNCiAgICAgICAgICAgIGh0T3BlblJlY2VpcHRDaGFyZ2UucHV0KCJpbnZvaWNlQ29zdHMiLCBlYWNoVGVtcExpbmVDaGFyZ2UuZ2V0KCdJVkNRJykpOw0KICAgICAgICAgICAgaHRPcGVuUmVjZWlwdENoYXJnZS5wdXQoImFjY0ludm9pY2VDb3N0cyIsIGVhY2hUZW1wTGluZUNoYXJnZS5nZXQoJ0FDSU4nKSk7DQogICAgICAgICAgICBodE9wZW5SZWNlaXB0Q2hhcmdlLnB1dCgiQ3VycmVuY3kiLCBlYWNoVGVtcExpbmVDaGFyZ2UuZ2V0KCdDVUNEJykpOw0KICAgICAgICAgICAgaHRPcGVuUmVjZWlwdENoYXJnZS5wdXQoImNvc3RpbmdFbGVtZW50QW1vdW50IiwgZWFjaFRlbXBMaW5lQ2hhcmdlLmdldCgnQ0VWQScpKTsNCiAgICAgICAgICAgIGh0T3BlblJlY2VpcHRDaGFyZ2UucHV0KCJhZGp1c3RlZENvc3RpbmdFbGVtZW50QW1vdW50IiwgZWFjaFRlbXBMaW5lQ2hhcmdlLmdldCgnQ0VWSicpKTsNCiAgICAgICAgICAgIGh0T3BlblJlY2VpcHRDaGFyZ2UucHV0KCJ2YXRDb2RlIiwgZWFjaExpbmUuZ2V0KCdWVENEJykpOw0KICAgICAgICAgICAgaHRPcGVuUmVjZWlwdENoYXJnZS5wdXQoImNoYXJnZUZhY3RvciIsIGVhY2hUZW1wTGluZUNoYXJnZS5nZXQoJ0VYSUMnKSk7DQogICAgICAgICAgICBib29sZWFuIGFkZENoYXJnZSA9IHRydWU7DQogICAgICAgICAgICBpV1NPUCA9ICIyMCI7DQogICAgICAgICAgICBpZiAoZml4ZWRDaGFyZ2VUeXBlcy5jb250YWlucyhpV1NPUCkpIHsNCg0KICAgICAgICAgICAgICBCaWdEZWNpbWFsIHF1YW50aXR5SW52b2ljZWQgPSBuZXcgQmlnRGVjaW1hbChodE9wZW5SZWNlaXB0Q2hhcmdlLmdldCgicXR5SW52b2ljZWQiKS50b1N0cmluZygpKTsNCg0KICAgICAgICAgICAgICBodE9wZW5SZWNlaXB0Q2hhcmdlLnB1dCgicXVhbnRpdHlPcGVuIiwgIjEiKTsNCiAgICAgICAgICAgICAgaHRPcGVuUmVjZWlwdENoYXJnZS5wdXQoInF0eUludm9pY2VkIiwgIjEiKTsNCiAgICAgICAgICAgICAgaHRPcGVuUmVjZWlwdENoYXJnZS5wdXQoInF1YW50aXR5T3JkZXJlZCIsICIxIik7DQogICAgICAgICAgICAgIGh0T3BlblJlY2VpcHRDaGFyZ2UucHV0KCJxdWFudGl0eVJlY2VpdmVkIiwgIjEiKTsNCiAgICAgICAgICAgICAgaHRPcGVuUmVjZWlwdENoYXJnZS5wdXQoIlByaWNlIiwgaHRPcGVuUmVjZWlwdENoYXJnZS5nZXQoImFtb3VudE9yZGVyZWQiKSk7DQoNCiAgICAgICAgICAgICAgaHRPcGVuUmVjZWlwdENoYXJnZS5wdXQoImFsdGVybmF0aXZlUXVhbnRpdHlPcGVuIiwgIjEiKTsNCiAgICAgICAgICAgICAgaHRPcGVuUmVjZWlwdENoYXJnZS5wdXQoImFsdGVybmF0aXZlUHJpY2UiLCBodE9wZW5SZWNlaXB0Q2hhcmdlLmdldCgiYW1vdW50T3JkZXJlZCIpKTsNCiAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgaWYgKGFkZENoYXJnZSkgew0KDQogICAgICAgICAgICAgIGxpbmVDaGFyZ2VMaXN0LmFkZChodE9wZW5SZWNlaXB0Q2hhcmdlKTsNCiAgICAgICAgICAgIH0NCg0KICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgICAgfQ0KDQogICAgfQ0KICAgIGRlZiBwYXJhbXMgPSBbIkNFSUQiOiBDRUlELnRyaW0oKV07DQogICAgbWlDYWxsZXIuY2FsbCgiUFBTMjgwTUkiLCAiR2V0RWxlbWVudCIsIHBhcmFtcywgY2FsbGJhY2spOw0KICB9DQogIC8qKiBzZW5kIGxpbmUgY2hhcmdlIGRldGFpbHMgdG8gb3V0cHV0DQogICAqLw0KICBwcml2YXRlIHdyaXRlTGluZUNoYXJnZXMoU3RyaW5nIFBVTk8sIEhhc2h0YWJsZSBlYWNoTGluZUNoYXJnZSwgSGFzaHRhYmxlIGVhY2hMaW5lKSB7DQoNCiAgICBpZiAoZWFjaExpbmUuZ2V0KCdQVVNMJykudG9TdHJpbmcoKSA8ICc4NScgfHwgZWFjaExpbmUuZ2V0KCdQVVNMJykudG9TdHJpbmcoKSA9PSAnODUnICYmIGVhY2hMaW5lQ2hhcmdlLmdldCgidGhpcmRQYXJ0eUNvc3RzIikgPT0gMSkgew0KICAgICAgaWYgKCghZWFjaExpbmVDaGFyZ2UuZ2V0KCJjb3N0aW5nRWxlbWVudEFtb3VudCIpLmVxdWFscygiMC4wMCIpICYmIGVhY2hMaW5lQ2hhcmdlLmdldCgiUHJpY2UiKSA9PSBudWxsKSB8fCBlYWNoTGluZUNoYXJnZS5nZXQoIlByaWNlIikgIT0gbnVsbCkgew0KICAgICAgICBTdHJpbmcgb09yZGVyTnVtYmVyID0gUFVOTzsNCiAgICAgICAgU3RyaW5nIG9MaW5lTnVtYmVyID0gZWFjaExpbmVDaGFyZ2UuZ2V0KCJQTkxJIik7DQogICAgICAgIFN0cmluZyBvU3ViTGluZU51bWJlciA9IGVhY2hMaW5lQ2hhcmdlLmdldCgiUE5MUyIpOyAgICAgICAgDQogICAgICAgIFN0cmluZyBvU2VxdWVuY2VOdW1iZXIgPSBlYWNoTGluZUNoYXJnZS5nZXQoInNlcXVlbmNlTnVtYmVyIik7DQogICAgICAgIHRlbXBUYWJsZUNoYXJnZXMuZ2V0KG9PcmRlck51bWJlciArIG9MaW5lTnVtYmVyICsgb1N1YkxpbmVOdW1iZXIgKyBvU2VxdWVuY2VOdW1iZXIpOw0KICAgICAgICBTdHJpbmcgaW52UXR5ID0gdGVtcFRhYmxlQ2hhcmdlcy5nZXQob09yZGVyTnVtYmVyICsgb0xpbmVOdW1iZXIgKyBvU3ViTGluZU51bWJlciArIG9TZXF1ZW5jZU51bWJlcik7DQogICAgICAgIFN0cmluZyBvQ29zdGluZ0VsZW1lbnQgPSBlYWNoTGluZUNoYXJnZS5nZXQoImNvc3RpbmdFbGVtZW50Iik7DQogICAgICAgIFN0cmluZyBvUmVjZWlwdE51bWJlciA9IGVhY2hMaW5lQ2hhcmdlLmdldCgicmVjZWlwdE51bWJlciIpOw0KICAgICAgICBTdHJpbmcgb0Nvc3RpbmdFbGVtZW50RGVzY3JpcHRpb24gPSBlYWNoTGluZUNoYXJnZS5nZXQoImNvc3RpbmdFbGVtZW50RGVzY3JpcHRpb24iKTsNCiAgICAgICAgU3RyaW5nIG9DaGFyZ2VUeXBlID0gZWFjaExpbmVDaGFyZ2UuZ2V0KCJjaGFyZ2VUeXBlIik7DQogICAgICAgIFN0cmluZyBvT3BlcmF0b3IgPSBlYWNoTGluZUNoYXJnZS5nZXQoIk9wZXJhdG9yIik7DQogICAgICAgIFN0cmluZyBvSXRlbU51bWJlciA9IGVhY2hMaW5lQ2hhcmdlLmdldCgiaXRlbU51bWJlciIpOw0KICAgICAgICBTdHJpbmcgb1RoaXJkUGFydHlDb3N0cyA9IGVhY2hMaW5lQ2hhcmdlLmdldCgidGhpcmRQYXJ0eUNvc3RzIik7DQogICAgICAgIFN0cmluZyBvSW52b2ljZUNvc3RzID0gZWFjaExpbmVDaGFyZ2UuZ2V0KCJpbnZvaWNlQ29zdHMiKTsNCiAgICAgICAgU3RyaW5nIG9DdXJyZW5jeSA9IGVhY2hMaW5lQ2hhcmdlLmdldCgiQ3VycmVuY3kiKTsNCiAgICAgICAgU3RyaW5nIG9Db3N0aW5nRWxlbWVudEFtb3VudCA9IGVhY2hMaW5lQ2hhcmdlLmdldCgiY29zdGluZ0VsZW1lbnRBbW91bnQiKTsNCiAgICAgICAgU3RyaW5nIG9BY2NJbnZvaWNlQ29zdHMgPSBlYWNoTGluZUNoYXJnZS5nZXQoImFjY0ludm9pY2VDb3N0cyIpOw0KICAgICAgICBTdHJpbmcgb0FkanVzdGVkQ29zdGluZ0VsZW1lbnRBbW91bnQgPSBlYWNoTGluZUNoYXJnZS5nZXQoImFkanVzdGVkQ29zdGluZ0VsZW1lbnRBbW91bnQiKTsNCiAgICAgICAgU3RyaW5nIG9WYXRDb2RlID0gZWFjaExpbmVDaGFyZ2UuZ2V0KCJ2YXRDb2RlIik7DQogICAgICAgIFN0cmluZyBvQ2hhcmdlRmFjdG9yID0gZWFjaExpbmVDaGFyZ2UuZ2V0KCJjaGFyZ2VGYWN0b3IiKTsNCiAgICAgICAgU3RyaW5nIG9BbW91bnRPcGVuID0gZWFjaExpbmVDaGFyZ2UuZ2V0KCJhbW91bnRPcGVuIik7DQogICAgICAgIFN0cmluZyBvQW1vdW50T3JkZXJlZCA9IGVhY2hMaW5lQ2hhcmdlLmdldCgiYW1vdW50T3JkZXJlZCIpOw0KICAgICAgICBTdHJpbmcgb1ByaWNlID0gZWFjaExpbmVDaGFyZ2UuZ2V0KCJQcmljZSIpOw0KICAgICAgICBTdHJpbmcgb1VuaXQgPSBlYWNoTGluZUNoYXJnZS5nZXQoIlVuaXQiKTsNCiAgICAgICAgU3RyaW5nIG9RdWFudGl0eU9wZW4gPSBlYWNoTGluZUNoYXJnZS5nZXQoInF1YW50aXR5T3BlbiIpOw0KICAgICAgICBTdHJpbmcgb1F1YW50aXR5SW52b2ljZWQgPSBlYWNoTGluZUNoYXJnZS5nZXQoInF0eUludm9pY2VkIik7DQogICAgICAgIFN0cmluZyBvUXVhbnRpdHlPcmRlcmVkID0gZWFjaExpbmVDaGFyZ2UuZ2V0KCJxdWFudGl0eU9yZGVyZWQiKTsNCiAgICAgICAgU3RyaW5nIG9RdWFudGl0eVJlY2VpdmVkID0gZWFjaExpbmVDaGFyZ2UuZ2V0KCJxdWFudGl0eVJlY2VpdmVkIik7DQogICAgICAgIFN0cmluZyBvQWx0ZXJuYXRpdmVVbml0ID0gZWFjaExpbmVDaGFyZ2UuZ2V0KCJhbHRlcm5hdGl2ZVVuaXQiKTsNCiAgICAgICAgU3RyaW5nIG9BbHRlcm5hdGl2ZVF1YW50aXR5T3BlbiA9IGVhY2hMaW5lQ2hhcmdlLmdldCgiYWx0ZXJuYXRpdmVRdWFudGl0eU9wZW4iKTsNCiAgICAgICAgU3RyaW5nIG9BbHRlcm5hdGl2ZVByaWNlID0gZWFjaExpbmVDaGFyZ2UuZ2V0KCJhbHRlcm5hdGl2ZVByaWNlIik7DQogICAgICAgIFN0cmluZyBGMlJFTFAgPSBlYWNoTGluZUNoYXJnZS5nZXQoIkYyUkVMUCIpOw0KDQogICAgICAgIG9BbW91bnRPcGVuID0gb0Ftb3VudE9wZW4gPT0gbnVsbCA/IG9Db3N0aW5nRWxlbWVudEFtb3VudCA6IG9BbW91bnRPcGVuOw0KICAgICAgICBvQW1vdW50T3JkZXJlZCA9IG9BbW91bnRPcmRlcmVkID09IG51bGwgPyAiMSIgOiBvQW1vdW50T3JkZXJlZDsNCiAgICAgICAgb1ByaWNlID0gb1ByaWNlID09IG51bGwgPyBvQ29zdGluZ0VsZW1lbnRBbW91bnQgOiBvUHJpY2U7DQogICAgICAgIG9Vbml0ID0gb1VuaXQgPT0gbnVsbCA/ICIgIiA6IG9Vbml0Ow0KICAgICAgICBvUXVhbnRpdHlPcGVuID0gb1F1YW50aXR5T3BlbiA9PSBudWxsID8gIjEiIDogb1F1YW50aXR5T3BlbjsNCiAgICAgICAgb1F1YW50aXR5SW52b2ljZWQgPSBvUXVhbnRpdHlJbnZvaWNlZCA9PSBudWxsID8gIiAiIDogb1F1YW50aXR5SW52b2ljZWQ7DQogICAgICAgIG9RdWFudGl0eU9yZGVyZWQgPSBvUXVhbnRpdHlPcmRlcmVkID09IG51bGwgPyAiICIgOiBvUXVhbnRpdHlPcmRlcmVkOw0KICAgICAgICBvUXVhbnRpdHlSZWNlaXZlZCA9IG9RdWFudGl0eVJlY2VpdmVkID09IG51bGwgPyAiICIgOiBvUXVhbnRpdHlSZWNlaXZlZDsNCiAgICAgICAgb0FsdGVybmF0aXZlVW5pdCA9IG9BbHRlcm5hdGl2ZVVuaXQgPT0gbnVsbCA/ICIgIiA6IG9BbHRlcm5hdGl2ZVVuaXQ7DQogICAgICAgIG9BbHRlcm5hdGl2ZVF1YW50aXR5T3BlbiA9IG9BbHRlcm5hdGl2ZVF1YW50aXR5T3BlbiA9PSBudWxsID8gIiAiIDogb0FsdGVybmF0aXZlUXVhbnRpdHlPcGVuOw0KICAgICAgICBvQWx0ZXJuYXRpdmVQcmljZSA9IG9BbHRlcm5hdGl2ZVByaWNlID09IG51bGwgPyAiICIgOiBvQWx0ZXJuYXRpdmVQcmljZTsNCiAgICAgICAgU3RyaW5nIFByaWMgPSAiIjsNCiAgICAgICAgU3RyaW5nIGFjSW52b2ljZUNvc3QgPSBEb3VibGUucGFyc2VEb3VibGUob0Nvc3RpbmdFbGVtZW50QW1vdW50KSAtIERvdWJsZS5wYXJzZURvdWJsZShvQWNjSW52b2ljZUNvc3RzKQ0KICAgICAgICBTdHJpbmcgb3BlblF0eSA9IERvdWJsZS5wYXJzZURvdWJsZShyZXBRdHkpIC0gRG91YmxlLnBhcnNlRG91YmxlKGludlF0eSk7DQoNCiAgICAgICAgaWYgKCFvcGVuUXR5LmVxdWFscygiMC4wIikpIHsNCiAgICAgICAgICBkb3VibGUgY29udmVydGVkID0gRG91YmxlLnBhcnNlRG91YmxlKGFjSW52b2ljZUNvc3QpIC8gRG91YmxlLnBhcnNlRG91YmxlKG9wZW5RdHkpOw0KDQogICAgICAgICAgRGVjaW1hbEZvcm1hdCBkZWNPYmplY3QgPSBuZXcgRGVjaW1hbEZvcm1hdCgiIy4jIyMjIyMiKTsNCiAgICAgICAgICBQcmljID0gZGVjT2JqZWN0LmZvcm1hdChjb252ZXJ0ZWQpOw0KICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgIGRvdWJsZSBjb252ZXJ0ZWQgPSAwLjAwMDAwMA0KDQogICAgICAgICAgRGVjaW1hbEZvcm1hdCBkZWNPYmplY3QgPSBuZXcgRGVjaW1hbEZvcm1hdCgiIy4jIyMjIyMiKTsNCiAgICAgICAgICBQcmljID0gZGVjT2JqZWN0LmZvcm1hdChjb252ZXJ0ZWQpOw0KICAgICAgICB9DQogICAgICAgIGRvdWJsZSBvcFF0eSA9IERvdWJsZS5wYXJzZURvdWJsZShyZXBRdHkpIC0gRG91YmxlLnBhcnNlRG91YmxlKGludlF0eSk7DQogICAgICAgIA0KICAgICAgICANCiAgICAgICAgDQogICAgICAgIGlmIChvcFF0eSA+IDAgfHwgb3BRdHkgPCAwKSB7DQogICAgICAgICAgaWYgKCghb0FjY0ludm9pY2VDb3N0cy5lcXVhbHMoIiIpIHx8ICFvQWNjSW52b2ljZUNvc3RzLmVxdWFscygiMC4wIikpICYmICFvQ2hhcmdlRmFjdG9yLmVxdWFscygiMSIpKSB7DQogICAgICAgICAgICANCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdSQ1RQJywgIkxDIik7DQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnUFVOTycsIG9PcmRlck51bWJlcik7DQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnUE5MSScsIG9MaW5lTnVtYmVyKTsNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdQTkxTJywgb1N1YkxpbmVOdW1iZXIpOw0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ0NEU0UnLCBvU2VxdWVuY2VOdW1iZXIpOw0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ0NFSUQnLCBvQ29zdGluZ0VsZW1lbnQpOw0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ1JQTk0nLCBvUmVjZWlwdE51bWJlcik7DQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnT0FPVScsIGFjSW52b2ljZUNvc3QpOw0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ09BTEMnLCBvcGVuQW1vdW50TG9jYWxDdXJyZW5jeSk7DQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnT1FPVScsIG9wZW5RdHkpOw0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ0NFTEQnLCBvQ29zdGluZ0VsZW1lbnREZXNjcmlwdGlvbik7DQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnRVhUWScsIG9DaGFyZ2VUeXBlKTsNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdXU09QJywgb09wZXJhdG9yKTsNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdUSFBSJywgb1RoaXJkUGFydHlDb3N0cyk7DQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnQ1VDRCcsIG9DdXJyZW5jeSk7DQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnSVZDUycsIG9JbnZvaWNlQ29zdHMpOw0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ0NIRkMnLCBvQ2hhcmdlRmFjdG9yKTsNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdDRVZBJywgb0Nvc3RpbmdFbGVtZW50QW1vdW50KTsNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdDRVZKJywgb0FkanVzdGVkQ29zdGluZ0VsZW1lbnRBbW91bnQpOw0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ1ZUQ0QnLCBvVmF0Q29kZSk7DQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnSVROTycsIG9JdGVtTnVtYmVyKTsNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdBTU9QJywgb0Ftb3VudE9wZW4pOw0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ0FNT1InLCBvQW1vdW50T3JkZXJlZCk7DQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnUFJDRScsIFByaWMpOw0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ1VOSVQnLCBvVW5pdCk7DQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnT1BRVCcsIG9RdWFudGl0eU9wZW4pOw0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ1FUSVYnLCBvUXVhbnRpdHlJbnZvaWNlZCk7DQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnUVRPUicsIG9RdWFudGl0eU9yZGVyZWQpOw0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ1FUUlYnLCBvUXVhbnRpdHlSZWNlaXZlZCk7DQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnQUxUVScsIG9BbHRlcm5hdGl2ZVVuaXQpOw0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ0FMUU8nLCBvQWx0ZXJuYXRpdmVRdWFudGl0eU9wZW4pOw0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ0FMVFAnLCBvQWx0ZXJuYXRpdmVQcmljZSk7DQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnUkVMUCcsIEYyUkVMUCk7DQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnUlBRVCcsIHJlY2VpcHRRdWFudGl0eSk7DQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnUlFBTCcsIHJlY2VpcHRRdWFudGl0eSk7DQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnUE5MSScsIGVhY2hMaW5lLmdldCgnUE5MSScpLnRvU3RyaW5nKCkpOw0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ1BOTFMnLCBlYWNoTGluZS5nZXQoJ1BOTFMnKS50b1N0cmluZygpKTsNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdUUkRUJywgZWFjaExpbmUuZ2V0KCdUUkRUJykudG9TdHJpbmcoKSk7DQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnTFdITCcsIGVhY2hMaW5lLmdldCgnV0hMTycpLnRvU3RyaW5nKCkpOw0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ0lUTk8nLCBlYWNoTGluZS5nZXQoJ0lUTk8nKS50b1N0cmluZygpKTsNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdQSVREJywgZWFjaExpbmUuZ2V0KCdQSVREJykudG9TdHJpbmcoKSk7DQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnUElUVCcsIGVhY2hMaW5lLmdldCgnUElUVCcpLnRvU3RyaW5nKCkpOw0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ1NJVEUnLCBlYWNoTGluZS5nZXQoJ1NJVEUnKS50b1N0cmluZygpKTsNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdDQVFBJywgZWFjaExpbmUuZ2V0KCdDQVFBJykudG9TdHJpbmcoKSk7DQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnUkpRQScsIGVhY2hMaW5lLmdldCgnUkpRQScpLnRvU3RyaW5nKCkpOw0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ1NEUUEnLCBlYWNoTGluZS5nZXQoJ1NEUUEnKS50b1N0cmluZygpKTsNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdPUlFBJywgZWFjaExpbmUuZ2V0KCdPUlFBJykudG9TdHJpbmcoKSk7DQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnSVZRQScsIGludlF0eSk7DQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnUlZRQScsIGVhY2hMaW5lLmdldCgnUlZRQScpLnRvU3RyaW5nKCkpOw0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ0NGUUEnLCBlYWNoTGluZS5nZXQoJ0NGUUEnKS50b1N0cmluZygpKTsNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdPUVBVJywgZWFjaExpbmUuZ2V0KCdvcGVuUXVhbnRpdHlQcmljZVVtJykudG9TdHJpbmcoKSk7DQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnUFVSQycsIGVhY2hMaW5lLmdldCgnUFVSQycpLnRvU3RyaW5nKCkpOw0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ0xCVVknLCBlYWNoTGluZS5nZXQoJ0JVWUUnKS50b1N0cmluZygpKTsNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdTVFVNJywgZWFjaExpbmUuZ2V0KCdzdGFuZGFyZFVtJykudG9TdHJpbmcoKSk7DQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnVU5NUycsIGVhY2hMaW5lLmdldCgnVU5NUycpLnRvU3RyaW5nKCkpOw0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ0FMVU0nLCBlYWNoTGluZS5nZXQoJ2FsdGVybmF0ZVVtJykudG9TdHJpbmcoKSk7DQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnQ1dVTicsICIiKTsNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdMTkFNJywgZWFjaExpbmUuZ2V0KCdMTkFNJykudG9TdHJpbmcoKSk7DQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnUFVQUicsIGVhY2hMaW5lLmdldCgncHJpY2VQZXJQaWVjZVN0YW5kYXJkVW0nKS50b1N0cmluZygpKTsNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdQVVFUJywgZWFjaExpbmUuZ2V0KCdQVVFUJykudG9TdHJpbmcoKSk7DQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnQUxQUicsIGVhY2hMaW5lLmdldCgnYWx0ZXJuYXRpdmVQcmljZScpLnRvU3RyaW5nKCkpOw0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ1BUQ0QnLCBlYWNoTGluZS5nZXQoJ1ZUQ0QnKS50b1N0cmluZygpKTsNCiAgICAgICAgICAgIGlmIChlYWNoTGluZS5nZXQoJ1ZUQ0QnKS50b1N0cmluZygpLmxlbmd0aCgpID09IDEpIHsNCg0KICAgICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnVlRDRCcsICcwJyArIGVhY2hMaW5lLmdldCgnVlRDRCcpLnRvU3RyaW5nKCkpOw0KICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ1ZUQ0QnLCBlYWNoTGluZS5nZXQoJ1ZUQ0QnKS50b1N0cmluZygpKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdHUk1UJywgZWFjaExpbmUuZ2V0KCdHUk1UJykudG9TdHJpbmcoKSk7DQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnTE1PRCcsIGVhY2hMaW5lLmdldCgnTU9ETCcpLnRvU3RyaW5nKCkpOw0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ0xURUQnLCBlYWNoTGluZS5nZXQoJ1RFREwnKS50b1N0cmluZygpKTsNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdMVEVMJywgZWFjaExpbmUuZ2V0KCdURUwxJykudG9TdHJpbmcoKSk7DQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnTFBTTCcsIGVhY2hMaW5lLmdldCgnUFVTTCcpLnRvU3RyaW5nKCkpOw0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ0xQU1QnLCBlYWNoTGluZS5nZXQoJ1BVU1QnKS50b1N0cmluZygpKTsNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdQT1BOJywgZWFjaExpbmUuZ2V0KCdwb3BuRWExMycpLnRvU3RyaW5nKCkpOw0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ1JPUkMnLCBlYWNoTGluZS5nZXQoJ1JPUkMnKS50b1N0cmluZygpKTsNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdST1JOJywgZWFjaExpbmUuZ2V0KCdST1JOJykudG9TdHJpbmcoKSk7DQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnUk9STCcsIGVhY2hMaW5lLmdldCgnUk9STCcpLnRvU3RyaW5nKCkpOw0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ1JPUlgnLCBlYWNoTGluZS5nZXQoJ1JPUlgnKS50b1N0cmluZygpKTsNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdTVURPJywgZWFjaExpbmUuZ2V0KCdTVURPJykudG9TdHJpbmcoKSk7DQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnRlJSQycsIGVhY2hMaW5lLmdldCgnRlJSQycpLnRvU3RyaW5nKCkpOw0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ0ZSUkUnLCBlYWNoTGluZS5nZXQoJ0ZSUkUnKS50b1N0cmluZygpKTsNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdBRFFBJywgZWFjaExpbmUuZ2V0KCdBRFFBJykudG9TdHJpbmcoKSk7DQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnT1JRVCcsIGVhY2hMaW5lLmdldCgnT1JRVCcpLnRvU3RyaW5nKCkpOw0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ0FNT1AnLCBlYWNoTGluZS5nZXQoJ2Ftb3VudE9wZW4nKS50b1N0cmluZygpKTsNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdBTU9SJywgb0Nvc3RpbmdFbGVtZW50QW1vdW50KTsNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdQUkNFJywgUHJpYyk7DQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnVU5JVCcsIGVhY2hMaW5lLmdldCgnYWx0ZXJuYXRlVW0nKS50b1N0cmluZygpKTsNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdPUFFUJywgZWFjaExpbmUuZ2V0KCdvcGVuUXVhbnRpdHlTdGFuZGFyZFVtJykudG9TdHJpbmcoKSk7DQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnUVRJVicsIGVhY2hMaW5lLmdldCgnaW52b2ljZWRRdWFudGl0eVN0YW5kYXJkVW0nKS50b1N0cmluZygpKTsNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdRVE9SJywgZWFjaExpbmUuZ2V0KCdvcmRlcmVkUXVhbnRpdHlTdGFuZGFyZFVtJykudG9TdHJpbmcoKSkNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdRVFJWJywgZWFjaExpbmUuZ2V0KCdyZWNlaXZlZFF1YW50aXR5U3RhbmRhcmRVbScpLnRvU3RyaW5nKCkpOw0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ0FMVFUnLCBlYWNoTGluZS5nZXQoJ2FsdGVybmF0ZVVtJykudG9TdHJpbmcoKSk7DQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnQUxRTycsIGVhY2hMaW5lLmdldCgnYWx0ZXJuYXRpdmVRdWFudGl0eU9wZW4nKS50b1N0cmluZygpKTsNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdBTFRQJywgZWFjaExpbmUuZ2V0KCdhbHRlcm5hdGl2ZVByaWNlJykudG9TdHJpbmcoKSk7DQoNCiAgICAgICAgICAgIG1pLndyaXRlKCk7DQoNCiAgICAgICAgICB9IGVsc2Ugew0KDQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnUkNUUCcsICJMQyIpOw0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ1BVTk8nLCBvT3JkZXJOdW1iZXIpOw0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ1BOTEknLCBvTGluZU51bWJlcik7DQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnUE5MUycsIG9TdWJMaW5lTnVtYmVyKTsNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdDRFNFJywgb1NlcXVlbmNlTnVtYmVyKTsNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdDRUlEJywgb0Nvc3RpbmdFbGVtZW50KTsNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdSUE5NJywgb1JlY2VpcHROdW1iZXIpOw0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ09BT1UnLCBhY0ludm9pY2VDb3N0KTsNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdPQUxDJywgb3BlbkFtb3VudExvY2FsQ3VycmVuY3kpOw0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ09RT1UnLCBvcGVuUXR5KTsNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdDRUxEJywgb0Nvc3RpbmdFbGVtZW50RGVzY3JpcHRpb24pOw0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ0VYVFknLCBvQ2hhcmdlVHlwZSk7DQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnV1NPUCcsIG9PcGVyYXRvcik7DQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnVEhQUicsIG9UaGlyZFBhcnR5Q29zdHMpOw0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ0NVQ0QnLCBvQ3VycmVuY3kpOw0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ0lWQ1MnLCBvSW52b2ljZUNvc3RzKTsNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdDSEZDJywgb0NoYXJnZUZhY3Rvcik7DQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnQ0VWQScsIG9Db3N0aW5nRWxlbWVudEFtb3VudCk7DQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnQ0VWSicsIG9BZGp1c3RlZENvc3RpbmdFbGVtZW50QW1vdW50KTsNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdWVENEJywgb1ZhdENvZGUpOw0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ0lUTk8nLCBvSXRlbU51bWJlcik7DQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnQU1PUCcsIG9BbW91bnRPcGVuKTsNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdBTU9SJywgb0Ftb3VudE9yZGVyZWQpOw0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ1BSQ0UnLCBQcmljKTsNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdVTklUJywgb1VuaXQpOw0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ09QUVQnLCBvUXVhbnRpdHlPcGVuKTsNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdRVElWJywgb1F1YW50aXR5SW52b2ljZWQpOw0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ1FUT1InLCBvUXVhbnRpdHlPcmRlcmVkKTsNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdRVFJWJywgb1F1YW50aXR5UmVjZWl2ZWQpOw0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ0FMVFUnLCBvQWx0ZXJuYXRpdmVVbml0KTsNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdBTFFPJywgb0FsdGVybmF0aXZlUXVhbnRpdHlPcGVuKTsNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdBTFRQJywgb0FsdGVybmF0aXZlUHJpY2UpOw0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ1JFTFAnLCBGMlJFTFApOw0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ1JQUVQnLCByZWNlaXB0UXVhbnRpdHkpOw0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ1JRQUwnLCByZWNlaXB0UXVhbnRpdHkpOw0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ1BOTEknLCBlYWNoTGluZS5nZXQoJ1BOTEknKS50b1N0cmluZygpKTsNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdQTkxTJywgZWFjaExpbmUuZ2V0KCdQTkxTJykudG9TdHJpbmcoKSk7DQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnVFJEVCcsIGVhY2hMaW5lLmdldCgnVFJEVCcpLnRvU3RyaW5nKCkpOw0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ0xXSEwnLCBlYWNoTGluZS5nZXQoJ1dITE8nKS50b1N0cmluZygpKTsNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdJVE5PJywgZWFjaExpbmUuZ2V0KCdJVE5PJykudG9TdHJpbmcoKSk7DQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnUElURCcsIGVhY2hMaW5lLmdldCgnUElURCcpLnRvU3RyaW5nKCkpOw0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ1BJVFQnLCBlYWNoTGluZS5nZXQoJ1BJVFQnKS50b1N0cmluZygpKTsNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdTSVRFJywgZWFjaExpbmUuZ2V0KCdTSVRFJykudG9TdHJpbmcoKSk7DQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnQ0FRQScsIGVhY2hMaW5lLmdldCgnQ0FRQScpLnRvU3RyaW5nKCkpOw0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ1JKUUEnLCBlYWNoTGluZS5nZXQoJ1JKUUEnKS50b1N0cmluZygpKTsNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdTRFFBJywgZWFjaExpbmUuZ2V0KCdTRFFBJykudG9TdHJpbmcoKSk7DQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnT1JRQScsIGVhY2hMaW5lLmdldCgnT1JRQScpLnRvU3RyaW5nKCkpOw0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ0lWUUEnLCBpbnZRdHkpOw0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ1JWUUEnLCBlYWNoTGluZS5nZXQoJ1JWUUEnKS50b1N0cmluZygpKTsNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdDRlFBJywgZWFjaExpbmUuZ2V0KCdDRlFBJykudG9TdHJpbmcoKSk7DQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnT1FQVScsIGVhY2hMaW5lLmdldCgnb3BlblF1YW50aXR5UHJpY2VVbScpLnRvU3RyaW5nKCkpOw0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ1BVUkMnLCBlYWNoTGluZS5nZXQoJ1BVUkMnKS50b1N0cmluZygpKTsNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdMQlVZJywgZWFjaExpbmUuZ2V0KCdCVVlFJykudG9TdHJpbmcoKSk7DQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnU1RVTScsIGVhY2hMaW5lLmdldCgnc3RhbmRhcmRVbScpLnRvU3RyaW5nKCkpOw0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ1VOTVMnLCBlYWNoTGluZS5nZXQoJ1VOTVMnKS50b1N0cmluZygpKTsNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdBTFVNJywgZWFjaExpbmUuZ2V0KCdhbHRlcm5hdGVVbScpLnRvU3RyaW5nKCkpOw0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ0NXVU4nLCAiIik7DQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnTE5BTScsIGVhY2hMaW5lLmdldCgnTE5BTScpLnRvU3RyaW5nKCkpOw0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ1BVUFInLCBlYWNoTGluZS5nZXQoJ3ByaWNlUGVyUGllY2VTdGFuZGFyZFVtJykudG9TdHJpbmcoKSk7DQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnUFVRVCcsIGVhY2hMaW5lLmdldCgnUFVRVCcpLnRvU3RyaW5nKCkpOw0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ0FMUFInLCBlYWNoTGluZS5nZXQoJ2FsdGVybmF0aXZlUHJpY2UnKS50b1N0cmluZygpKTsNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdQVENEJywgZWFjaExpbmUuZ2V0KCdWVENEJykudG9TdHJpbmcoKSk7DQogICAgICAgICAgICBpZiAoZWFjaExpbmUuZ2V0KCdWVENEJykudG9TdHJpbmcoKS5sZW5ndGgoKSA9PSAxKSB7DQoNCiAgICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ1ZUQ0QnLCAnMCcgKyBlYWNoTGluZS5nZXQoJ1ZUQ0QnKS50b1N0cmluZygpKTsNCiAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdWVENEJywgZWFjaExpbmUuZ2V0KCdWVENEJykudG9TdHJpbmcoKSk7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnR1JNVCcsIGVhY2hMaW5lLmdldCgnR1JNVCcpLnRvU3RyaW5nKCkpOw0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ0xNT0QnLCBlYWNoTGluZS5nZXQoJ01PREwnKS50b1N0cmluZygpKTsNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdMVEVEJywgZWFjaExpbmUuZ2V0KCdURURMJykudG9TdHJpbmcoKSk7DQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnTFRFTCcsIGVhY2hMaW5lLmdldCgnVEVMMScpLnRvU3RyaW5nKCkpOw0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ0xQU0wnLCBlYWNoTGluZS5nZXQoJ1BVU0wnKS50b1N0cmluZygpKTsNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdMUFNUJywgZWFjaExpbmUuZ2V0KCdQVVNUJykudG9TdHJpbmcoKSk7DQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnUE9QTicsIGVhY2hMaW5lLmdldCgncG9wbkVhMTMnKS50b1N0cmluZygpKTsNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdST1JDJywgZWFjaExpbmUuZ2V0KCdST1JDJykudG9TdHJpbmcoKSk7DQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnUk9STicsIGVhY2hMaW5lLmdldCgnUk9STicpLnRvU3RyaW5nKCkpOw0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ1JPUkwnLCBlYWNoTGluZS5nZXQoJ1JPUkwnKS50b1N0cmluZygpKTsNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdST1JYJywgZWFjaExpbmUuZ2V0KCdST1JYJykudG9TdHJpbmcoKSk7DQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnU1VETycsIGVhY2hMaW5lLmdldCgnU1VETycpLnRvU3RyaW5nKCkpOw0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ0ZSUkMnLCBlYWNoTGluZS5nZXQoJ0ZSUkMnKS50b1N0cmluZygpKTsNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdGUlJFJywgZWFjaExpbmUuZ2V0KCdGUlJFJykudG9TdHJpbmcoKSk7DQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnQURRQScsIGVhY2hMaW5lLmdldCgnQURRQScpLnRvU3RyaW5nKCkpOw0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ09SUVQnLCBlYWNoTGluZS5nZXQoJ09SUVQnKS50b1N0cmluZygpKTsNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdBTU9QJywgZWFjaExpbmUuZ2V0KCdhbW91bnRPcGVuJykudG9TdHJpbmcoKSk7DQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnQU1PUicsIG9Db3N0aW5nRWxlbWVudEFtb3VudCk7DQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnUFJDRScsIFByaWMpOw0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ1VOSVQnLCBlYWNoTGluZS5nZXQoJ2FsdGVybmF0ZVVtJykudG9TdHJpbmcoKSk7DQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnT1BRVCcsIGVhY2hMaW5lLmdldCgnb3BlblF1YW50aXR5U3RhbmRhcmRVbScpLnRvU3RyaW5nKCkpOw0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ1FUSVYnLCBlYWNoTGluZS5nZXQoJ2ludm9pY2VkUXVhbnRpdHlTdGFuZGFyZFVtJykudG9TdHJpbmcoKSk7DQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnUVRPUicsIGVhY2hMaW5lLmdldCgnb3JkZXJlZFF1YW50aXR5U3RhbmRhcmRVbScpLnRvU3RyaW5nKCkpDQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnUVRSVicsIGVhY2hMaW5lLmdldCgncmVjZWl2ZWRRdWFudGl0eVN0YW5kYXJkVW0nKS50b1N0cmluZygpKTsNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdBTFRVJywgZWFjaExpbmUuZ2V0KCdhbHRlcm5hdGVVbScpLnRvU3RyaW5nKCkpOw0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ0FMUU8nLCBlYWNoTGluZS5nZXQoJ2FsdGVybmF0aXZlUXVhbnRpdHlPcGVuJykudG9TdHJpbmcoKSk7DQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnQUxUUCcsIGVhY2hMaW5lLmdldCgnYWx0ZXJuYXRpdmVQcmljZScpLnRvU3RyaW5nKCkpOw0KDQogICAgICAgICAgICBtaS53cml0ZSgpOw0KDQogICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICB9DQogICAgfQ0KICB9DQp9"}}}